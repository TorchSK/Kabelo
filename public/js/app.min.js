var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){"use strict";e.fn.tableToJSON=function(t){var i={ignoreColumns:[],onlyColumns:null,ignoreHiddenRows:!0,ignoreEmptyRows:!1,headings:null,allowHTML:!1,includeRowId:!1,textDataOverride:"data-override",extractor:null,textExtractor:null};t=e.extend(i,t);var a=function(e){return void 0!==e&&null!==e},n=function(e){return void 0!==e&&e.length>0},o=function(i){return a(t.onlyColumns)?-1===e.inArray(i,t.onlyColumns):-1!==e.inArray(i,t.ignoreColumns)},r=function(t,i){var o={},r=0;return e.each(i,function(e,i){r<t.length&&a(i)&&(n(t[r])&&(o[t[r]]=i),r++)}),o},s=function(i,a,n){var o,r=e(a),s=t.extractor||t.textExtractor,c=r.attr(t.textDataOverride);return null===s||n?e.trim(c||(t.allowHTML?r.html():a.textContent||r.text())||""):e.isFunction(s)?(o=c||s(i,r),"string"==typeof o?e.trim(o):o):"object"==(void 0===s?"undefined":_typeof(s))&&e.isFunction(s[i])?(o=c||s[i](i,r),"string"==typeof o?e.trim(o):o):e.trim(c||(t.allowHTML?r.html():a.textContent||r.text())||"")},c=function(i,a){var n=[],o=t.includeRowId,r="boolean"==typeof o?o:"string"==typeof o,c="string"==typeof o==1?o:"rowId";return r&&void 0===e(i).attr("id")&&n.push(c),e(i).children("td,th").each(function(e,t){n.push(s(e,t,a))}),n};return function(i,n){var c,d,l,u,p,h,f,m=[],v=0,g=[];return i.children("tbody,*").children("tr").each(function(i,n){if(i>0||a(t.headings)){var o=t.includeRowId,r="boolean"==typeof o?o:"string"==typeof o;h=e(n);var g=h.find("td").length===h.find("td:empty").length;!h.is(":visible")&&t.ignoreHiddenRows||g&&t.ignoreEmptyRows||h.data("ignore")&&"false"!==h.data("ignore")||(v=0,m[i]||(m[i]=[]),r&&(v+=1,void 0!==h.attr("id")?m[i].push(h.attr("id")):m[i].push("")),h.children().each(function(){for(f=e(this);m[i][v];)v++;if(f.filter("[rowspan]").length)for(l=parseInt(f.attr("rowspan"),10)-1,p=s(v,f),c=1;c<=l;c++)m[i+c]||(m[i+c]=[]),m[i+c][v]=p;if(f.filter("[colspan]").length)for(l=parseInt(f.attr("colspan"),10)-1,p=s(v,f),c=1;c<=l;c++)if(f.filter("[rowspan]").length)for(u=parseInt(f.attr("rowspan"),10),d=0;d<u;d++)m[i+d][v+c]=p;else m[i][v+c]=p;p=m[i][v]||s(v,f),a(p)&&(m[i][v]=p),v++}))}}),e.each(m,function(i,s){if(a(s)){var c=a(t.onlyColumns)||t.ignoreColumns.length?e.grep(s,function(e,t){return!o(t)}):s,d=a(t.headings)?n:e.grep(n,function(e,t){return!o(t)});p=r(d,c),g[g.length]=p}}),g}(this,function(e){var i=e.find("tr:first").first();return a(t.headings)?t.headings:c(i,!0)}(this))}}(jQuery),function(e){e.fn.loupe=function(t){var i=e.extend({loupe:"loupe",width:200,height:150},t||{});return this.length?this.each(function(){var a,n,o,r,s=e(this),c=s.is("img")?s:s.find("img:first"),d=function(){n.hide()};if(null!=s.data("loupe"))return s.data("loupe",t);o=function(e){var t=c.offset(),o=c.outerWidth(),l=c.outerHeight(),u=i.width/2,p=i.height/2;if(!s.data("loupe")||e.pageX>o+t.left+10||e.pageX<t.left-10||e.pageY>l+t.top+10||e.pageY<t.top-10)return d();r=r?clearTimeout(r):0,n.show().css({left:e.pageX-u,top:e.pageY-p}),a.css({left:0|-((e.pageX-t.left)/o*a.width()-u),top:0|-((e.pageY-t.top)/l*a.height()-p)})},n=e("<div />").addClass(i.loupe).css({width:i.width,height:i.height,position:"absolute",overflow:"hidden"}).append(a=e("<img />").attr("src",s.attr(s.is("img")?"src":"href")).css("position","absolute")).mousemove(o).hide().appendTo("body"),s.data("loupe",!0).mouseenter(o).mouseout(function(){r=setTimeout(d,10)})}):this}}(jQuery),function(e,t){e.fn.prettyEmbed=function(i){function a(a){var n=a.find("img").outerWidth(!0),o=a.find("img").outerHeight(!0),r="",s="";a.attr("data-pe-videoid")!==t?s=a.attr("data-pe-videoid"):i.videoID!==t?s=i.videoID:(s=t,console.error("PrettyEmbed.js Error:  Misformed or missing video ID.")),("false"===a.attr("data-pe-show-info")||!1===i.showInfo)&&(r+="&showinfo=0"),("false"===a.attr("data-pe-show-controls")||!1===i.showControls)&&(r+="&controls=0"),("true"===a.attr("data-pe-loop")||!0===i.loop)&&(r+="&loop=1"),("true"===a.attr("data-pe-closed-captions")||!0===i.closedCaptions)&&(r+="&cc_load_policy=1"),(a.attr("data-pe-localization")!==t||i.localization!==t)&&(a.attr("data-pe-localization")!==t?r+="&hl="+a.attr("data-pe-localization"):i.localization!==t&&(r+="&hl="+i.localization)),("light"==a.attr("data-pe-color-scheme")||"light"==i.colorScheme)&&(r+="&theme=light"),r+="false"===a.attr("data-pe-show-related")||!1===i.showRelated?"&rel=0":"&rel=1",fullScreenFlag="false"===a.attr("data-pe-allow-fullscreen")||!1===i.allowFullScreen?"":"allowfullscreen ",a.html('<iframe width="'+n+'" height="'+o+'" '+fullScreenFlag+'style="border:none;" src="//www.youtube.com/embed/'+s+"?autoplay=1"+r+'"></iframe>').addClass("play"),i.useFitVids&&e.isFunction(e.fn.fitVids)&&a.parent().fitVids()}function n(e){var t=/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/,i=e.match(t);return i&&11==i[7].length?i[7]:void console.error("PrettyEmbed.js Error:  Bad URL.")}i=e.extend({},e.fn.prettyEmbed.options,i);var o=!!/Android|webOS|iPhone|iPad|iPod|BlackBerry/i.test(navigator.userAgent);0===e("#pretty-embed-style").length&&e("<style />",{id:"pretty-embed-style",html:'.pretty-embed{position:relative;cursor:pointer;display:block}.pretty-embed img{width:100%;height:auto}.pretty-embed iframe{border:0 solid transparent}.pretty-embed:after{display:block;content:"";position:absolute;top:50%;margin-top:-19px;left:50%;margin-left:-27px;width:54px;height:38px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABMCAYAAACIylL7AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAABmxJREFUeF7t3W9MVlUcB3BNs3Kt1h/XC9eL6kWCAg6E8h/YMLKFm4v+GNZCfYHQnDoNVzjLYbZG8SLCVqSrHGgWtnDWbK1CK/sHi5oF8n+9IMcqiIqA6PT9Xs6Nx+tPAkSec+9zfu7zgnvuOffhfr3Avc997pk0XjUrahZNgytgJsyCRFgC6XAfZEEObIZ8KIBCeB5eglehHN6Cd+Bd+AA+huPwBXwF30At/KDVQ9P/OAXu+t8Cx/gaOOYnUAXc1ntQCRWwH16Dl6EYnoWdsA22QC6shvthOdwGSRAN18OVcAlM1rtpYgsbZiCLYRO8CIeBO7AZfoG/4B9QloP7gvvkV2iBGuB/Qv4HyINUmK537/gVBo2BV6ATpBdmjd0fwJ8qt4Le42MsDHA17IW/QdqYNX54NB6CmXr3j67QMQHaQBrcunA6IFXHMLJChxT4TQ9gTbxeyNBxDF9Y8Wawv6vCj3+sLNCxyIUVLoLPdAcr/BrgUh3P2YVGnitJHa3w2aTjObPQMBl4Iil1ssLnR7hYxzRUWMirElIHK/xW6JiGCguLPCtZ5jigYxosLKDGkBUss3TBNB2XE9hNIY2WmZJ1XE5gD3saLfPk67icwEo8jZZ53tZxOYF95Gm0zHNKx+UExjf4pJUsc/wOUxnWVP2FtJJllhkM7BrPQstcsQyM9x9IjZZ5bmdgvElGajTK7DmzVXxCvNgWQR5kYPd6FhppXuI8dfr0abVjxw4VFxcnrhMBNjIw3nYmNRqFgQ0MDChWU1OT2rxls5oTM0dcN8B2MjDeHyg1GiU0MFZfX5+qrq5WuY/kqujZ0WKfANrNwHhzpNRoFG9gbnV1damqqiq1Zu0aFRUdJfYNkP0MjDc1So1GOVdgLB5t7e3t6uj7R1Xmqkyxf0AcYWAHPAuNNFxgbvFoa2trU5WHK1XGPRniOD53nIHxdmup0SgjCYzlHm0tLS3q4JsHVfrydHE8n6phYB96FhpppIG55R5tDG7fvn0qLS1NHNdn6hmYL25rG21gLPdoa21tdU4FSktLVcqSFHF8n2hjYL64U2osgbnlHm0MrqGhQRUXF6uFixaK2zFcOwPj56SkRqOcT2Cs0KON6urqVGFhoUq6JUncnqE6IiYwtzo7O/872ujkyZOqYGeBX65TRl5gLO/RRrW1tSp/W76Km2v0dcrIDMyt0N9tLl7u4nXKmNgY8XWEWWQHxpKONjpx4oTKyc0RX0sY2cDcCj3ampubB8/d7jDu3M0GFlq9vb2qoqLC5KsjNjC3+CNw5QMrxW0bxAZWU1OjslZnids0UOQGxvOv7HXZKirKV++hRV5gjY2NasPGDX59lzpyAuNfgHlb85y7r6TxfcIJLNAXf3mOtf2J7aaeCI+Wc/E3kG+vdHR0qF1P7zL9UtNotTKwQL2ByYu7RUVFQb3p1HkDMxC3CHR3d6uS3SUqMSlR7B8Qzi0CfCag1GiUcwXW09Oj9uzdo+YvmC/2C5hjDMyXt7nxMlJZWZlKTkkW1w8o5zY3PhFUajSKG1h/f79zvS91aaq4XsCVM7DHPQuNlDAvwbnfcNmdy8T2CFHCwHzxYQjLUcDAfPFxI8vhfNzIFx/osxyrGBj/SY2WeZyPzPJBzPbR5f4Qw8CmgH3sgz9c6z5YxT7JzXyDD1bRgfniAnCEq3fCYuELzisirWSZ45COywnsIU+jZZ7HdFxOYDd4Gi3zLNJxOYERp2uSVrTCjxM/nPlkbSzwxVX7CFWuYxoqLIz3rGSZI13HNFRYSJytTupghU8rDJ5/eQsNd4esaJlhvY7n7EIjp/PgXJBSR2vicb7OoefVS4UV+Az7n3UHK3z+hEQdy/CFFTkfIychlQayLrweuEvHMbJCBz5a9ns9gDVx2mGxjmF0hY6XwZPAuT+kwa3xMwCcbfa6wb1/HoVBroL1cAz6QNqgNTa8isGZfOeC3uPjWBj0cuDk29nwDLwBnHybE5N1g51CeAj3Bd/H+gn4F9+nwBnYOTM8D4CFMPxfgReysHHOoTkdZsCNEAvzYSlw6nd3evt1sAG2wnZ4Ctwp7jkD+x54HfgsR36DnGr+CHDqeU47wiP9c/gS+Pm20GnuvVPau9z274B9qoEXCrgTOZ47rT0/a8D5lLltTmtfCi/Ac8DXydf7KHCHr4VMWAFpsAD4PfN75z7gvpiid8841KRJ/wIcsey9MCgPGwAAAABJRU5ErkJggg==);-webkit-background-size:cover;background-size:cover}.pretty-embed.play:after{display:none}.pretty-embed:hover:after{background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGwAAABMCAYAAACIylL7AAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAAJcEhZcwAADsMAAA7DAcdvqGQAAAAadEVYdFNvZnR3YXJlAFBhaW50Lk5FVCB2My41LjExR/NCNwAABwhJREFUeF7t3GlsVFUYBuCDIi4xGreA1O6dmXbaYQ2oCAriGjUuRDSiETVRISGCu2BcAH8gagKKpnWJ5UcBFVQIGhMDFGwVGcqU0m2WtkPpIqNSbEHaQj/fM5yh9HLAAlP6TTlv8iSdc+899/a8PenMnxHRSp3LIQ2ASyAO0mEUjIe7YTJMhWnwAsyBebAQFkM2fAl58A18Dz/Az7ABNsFm2AIeKIZypRIC/8MLkfO3g5zDDXLOXyAf5L1+hNWwEpZBLuTAh/AezIfX4UWYDk/AQ3APTIDR4IR4uBTOh35qmc5sdmU5BsC4XS7HLPgE1sAWqIK/4QB0ABlhci3kmuyBaiiCHyAHXsZaToSL1PJGL5jUBZ9BE5ARVfsgD64DteKnmNos++W1WY4v4CCQ0aM6YBXEqeU/uaCskRAETGacQSGYqGroXnZm2m+Cf4CMXtEKk1QdJw5OdECTutDoPQdgjKpFn2Cm/RwoBDJY8MEFqp5jE3TaJ1suMHrfLFVP19Q47f3ADWSwUgvnqZo6g8FRR51k8HKfqqkz1U77B0AGS8tVTYdTnWGT/EAGS3thgKpLiKoMWyqQwdqNqq5wYY9bDhr8zFF1CRHIsC0BMlj7VtWFwtJt64EM1ryqLiH86bYAkMFaC/SXZfVXL3QnGbxcJXyOtCuAjJgwRBbmtAwafN0qvI608UDc+ZwO8g8fqj12FnlUFvagZZAl/8hh1PZHI9W99Sb5XJnac84CM0WlPW0aEHe+EcOIDh0imWa/n2qen0VeZ7r23D5svixsjmWQpaMLk2lva6PQVjdVTXuWKtPt2mv6oI9FhT3tPSDuvJbCItm3dy/V5+dT4ImpVOGwaa/tQ5aJCltaDhB33uH6wmTkbvuroYHqfvqJ/A8/pL2+j1grym2py4G4q8Q7xOMVFkkLdtsfwSDtWv09+e6/VztPjNskC1tjGWSpO4XJRHZbY3U11X61grx33qGdL0YVibK01HVA3FV0s7BIIrtNFrdzaS5VTpygnTfGVMrCCi2DLFUMO7nCZI7stpoaagwEKJidTRVjb9DOHyOCojQt1Q3E3akUFsmR3SaL8/moZtEiKr92tPY+zDXIwjyWQZbKT6MwmS67DRoqKqh6wQIqGzFcez+mQmJHaqoHiLuyoadXWCQtTU2du00WV1pKVW+/TaUul/a+zMjCUlBYCl7wVjZ0SFQKk7HuNqne46HAq69SqTNDe38mQqIEhQFxF83CIunyvy1SnNtN/pkzaUe6Q/scvQyFpaCwFLxgrrQHCpPR7TaprrCQvE8/rX2WXhQS21EYEHelQ3qmsEi67LaqKgrm5lLZhAnaZ+lFsVPYjh4uTKa9tZV2ff01ld1+u/YZGAiJYhQGxF1PF9ZcUEC+SZO092YEhSWjsGS8YG6Hq2cK2+feSoEpU7T3ZCgkPCgMiLuSKBe2v6SEqp58ijz4y9XdjylZWDIKS8YL3krwwTYahf3r9VLN9OnkwQdR3X2YC4ltSckeIO62Z51eYQfw7i8463kUlaadP0aEC3NbBlk61cLa6utp5+zZ5LHZtfPGmAZRlJRcCMRd8UkW1rZ7N9XOnUvbHOna+WJUjSxsnWWQpe4W1r5nD9UteJc8zkztPDGuUmxNTF4DxJ0n88SFHWxupvpFi8njGqq9vo8okoUtswyydLzCDu3fT43ZOVQ8fKT2uj5mo3AnJuUAcbfNUlhHayvtzl1KxaOv1Z7fR60V7oSkhUDcbcvMChfW0d5OoRVf0fYxY7Xn9XF5YktC0mwg7orwJuLPb7+jkvE3a4+fJZbIwqZZBg2+5onf45MeBDJiwkxZ2HjLoMHXFLE5PikDyIgJt8rCLoeOowYNvlzit2sSz4UWIIO9K8NfrIIf/JYDBj9yU/UPF/brNYnrgAzWKsNlyfwal/ghkMHaKlWXEIVxiY8BGay9puoKF5ZsOWjwM1bVFS5MFMQleoEMlpqg6zdrFwxOXAhksJSnaurML4MTRgAZLN2tauoMBqXNR51k8FADhz9/WbNpcMIDm65OIIORwQkzVD3HBif0g/wuFxi9qRw6v69el41XJ6TCX0BGr9oPo1QtJw5OvA7+VhcaZ96/cJeqo3vJH5TghDIg44xqgHGqhpMLLrwwf1D8W7AXMJnRgw5BHtZ8oFr+U8+GQfGXwQzYCG1ARtQ0wRcwDNSKRzGY9GIYB89sGBi/AFbAFqiFZjgIZITJtWiBRiiHAlgJi0FugBvgxO8CezLrB8afAxfBVZACQ+B6uAXugckwFZ6F5+AVeAPegYWwGD6Bz2EpLIeVsBrWws+wHjbCb/A7eKAYypXAcUSOl4C8ZitshgKQ88m5f4Q1sArkvXPhU/gI3gf5nPJ5X4IZ8BQ8AvfBbTAG5O8sf3e5BnItzlXLE4UI8R86m8y4ltOs9gAAAABJRU5ErkJggg==)}'}).appendTo("head"),i.useFitVids&&(e.isFunction(e.fn.fitVids)||console.error("PrettyEmbed.js Error:  options.useFitVids is set to true; FitVids not found!"));var r;r=e(0===e(this).length?".pretty-embed":this),r.each(function(){e(this).addClass("pretty-embed");var a,r,s,c,d,l,u,p,h,f="",m="",v="";if(f=e(this).attr("data-pe-videoid")!==t?e(this).attr("data-pe-videoid"):e(this).attr("href")!==t?n(e(this).attr("href")):i.videoID,m=e(this).attr("data-pe-preview-size")!==t?e(this).attr("data-pe-preview-size"):i.previewSize!==t?i.previewSize:t,v=e(this).attr("data-pe-custom-preview-image")!==t?e(this).attr("data-pe-custom-preview-image"):i.customPreviewImage!==t?i.customPreviewImage:t,r=e(this).attr("data-pe-show-info")!==t?e(this).attr("data-pe-show-info"):i.showInfo!==t?i.showInfo:t,s=e(this).attr("data-pe-show-controls")!==t?e(this).attr("data-pe-show-controls"):i.showControls!==t?i.showControls:t,c=e(this).attr("data-pe-loop")!==t?e(this).attr("data-pe-loop"):i.loop!==t?i.loop:t,d=e(this).attr("data-pe-closed-captions")!==t?e(this).attr("data-pe-closed-captions"):i.closedCaptions!==t?i.closedCaptions:t,l=e(this).attr("data-pe-localization")!==t?e(this).attr("data-pe-localization"):i.localization!==t?i.localization:t,u=e(this).attr("data-pe-color-scheme")!==t?e(this).attr("data-pe-color-scheme"):i.colorScheme!==t?i.colorScheme:t,p=e(this).attr("data-pe-show-related")!==t?e(this).attr("data-pe-show-related"):i.showRelated!==t?i.showRelated:t,h=e(this).attr("data-pe-allow-fullscreen")!==t?e(this).attr("data-pe-allow-fullscreen"):i.allowFullScreen!==t?i.allowFullScreen:t,e(this).is("a")&&(a=e("<div />").addClass("pretty-embed"),a.attr("data-pe-videoid",f).attr("data-pe-preview-size",m).attr("data-pe-custom-preview-image",v).attr("data-pe-show-info",r).attr("data-pe-show-controls",s).attr("data-pe-loop",c).attr("data-pe-closed-captions",d).attr("data-pe-localization",l).attr("data-pe-color-scheme",u).attr("data-pe-show-related",p).attr("data-pe-allow-fullscreen",h),e(this).after(a)),v!==t&&""!==v)e(this).html('<img src="'+v+'" width="100%" alt="YouTube Video Preview" />');else{var g="";switch(m){case"thumb-default":g="default";break;case"thumb-1":g="1";break;case"thumb-2":g="2";break;case"thumb-3":g="3";break;case"default":g="mqdefault";break;case"medium":g="0";break;case"high":g="hqdefault";break;default:g="mqdefault"}e(this).html('<img src="//img.youtube.com/vi/'+f+"/"+g+'.jpg" width="100%" alt="YouTube Video Preview" />')}e(this).is("a")&&(a.html(e(this).html()),e(this).remove()),o&&e(window).on("load",function(){e(".pretty-embed").trigger("click")})}),e("body").on("click",".pretty-embed",function(t){t.preventDefault(),a(e(this))}),e.fn.prettyEmbed.options={videoID:"",previewSize:"",customPreviewImage:"",showInfo:!0,showControls:!0,loop:!1,closedCaptions:!1,colorScheme:"dark",showRelated:!1,useFitVids:!1}}}(jQuery),function(e,t){"function"==typeof define&&define.amd?define(["jquery"],function(i){return t(e,i)}):"object"==("undefined"==typeof module?"undefined":_typeof(module))&&"object"==_typeof(module.exports)?module.exports=t(e,require("jquery")):e.lity=t(e,e.jQuery||e.Zepto)}("undefined"!=typeof window?window:this,function(e,t){"use strict";function i(e){var t=S();return R&&e.length?(e.one(R,t.resolve),setTimeout(t.resolve,500)):t.resolve(),t.promise()}function a(e,i,a){if(1===arguments.length)return t.extend({},e);if("string"==typeof i){if(void 0===a)return void 0===e[i]?null:e[i];e[i]=a}else t.extend(e,i);return this}function n(e){for(var t,i=decodeURI(e.split("#")[0]).split("&"),a={},n=0,o=i.length;n<o;n++)i[n]&&(t=i[n].split("="),a[t[0]]=t[1]);return a}function o(e,i){return e+(e.indexOf("?")>-1?"&":"?")+t.param(i)}function r(e,t){var i=e.indexOf("#");return-1===i?t:(i>0&&(e=e.substr(i)),t+e)}function s(e){return t('<span class="lity-error"/>').append(e)}function c(e,i){var a=i.opener()&&i.opener().data("lity-desc")||"Image with no description",n=t('<img src="'+e+'" alt="'+a+'"/>'),o=S(),r=function(){o.reject(s("Failed loading image"))};return n.on("load",function(){if(0===this.naturalWidth)return r();o.resolve(n)}).on("error",r),o.promise()}function d(e,i){var a,n,o;try{a=t(e)}catch(e){return!1}return!!a.length&&(n=t('<i style="display:none !important"/>'),o=a.hasClass("lity-hide"),i.element().one("lity:remove",function(){n.before(a).remove(),o&&!a.closest(".lity-content").length&&a.addClass("lity-hide")}),a.removeClass("lity-hide").after(n))}function l(e){var i=F.exec(e);return!!i&&f(r(e,o("https://www.youtube"+(i[2]||"")+".com/embed/"+i[4],t.extend({autoplay:1},n(i[5]||"")))))}function u(e){var i=L.exec(e);return!!i&&f(r(e,o("https://player.vimeo.com/video/"+i[3],t.extend({autoplay:1},n(i[4]||"")))))}function p(e){var i=z.exec(e);return!!i&&(0!==e.indexOf("http")&&(e="https:"+e),f(r(e,o("https://www.facebook.com/plugins/video.php?href="+e,t.extend({autoplay:1},n(i[4]||""))))))}function h(e){var t=U.exec(e);return!!t&&f(r(e,o("https://www.google."+t[3]+"/maps?"+t[6],{output:t[6].indexOf("layer=c")>0?"svembed":"embed"})))}function f(e){return'<div class="lity-iframe-container"><iframe frameborder="0" allowfullscreen src="'+e+'"/></div>'}function m(){return C.documentElement.clientHeight?C.documentElement.clientHeight:Math.round(A.height())}function v(e){var t=y();t&&(27===e.keyCode&&t.options("esc")&&t.close(),9===e.keyCode&&g(e,t))}function g(e,t){var i=t.element().find(I),a=i.index(C.activeElement);e.shiftKey&&a<=0?(i.get(i.length-1).focus(),e.preventDefault()):e.shiftKey||a!==i.length-1||(i.get(0).focus(),e.preventDefault())}function $(){t.each(j,function(e,t){t.resize()})}function b(e){1===j.unshift(e)&&(T.addClass("lity-active"),A.on({resize:$,keydown:v})),t("body > *").not(e.element()).addClass("lity-hidden").each(function(){var e=t(this);void 0===e.data(D)&&e.data(D,e.attr(E)||null)}).attr(E,"true")}function _(e){var i;e.element().attr(E,"true"),1===j.length&&(T.removeClass("lity-active"),A.off({resize:$,keydown:v})),j=t.grep(j,function(t){return e!==t}),i=j.length?j[0].element():t(".lity-hidden"),i.removeClass("lity-hidden").each(function(){var e=t(this),i=e.data(D);i?e.attr(E,i):e.removeAttr(E),e.removeData(D)})}function y(){return 0===j.length?null:j[0]}function w(e,i,a,n){var o,r="inline",s=t.extend({},a);return n&&s[n]?(o=s[n](e,i),r=n):(t.each(["inline","iframe"],function(e,t){delete s[t],s[t]=a[t]}),t.each(s,function(t,a){return!a||!(!a.test||a.test(e,i))||(o=a(e,i),!1!==o?(r=t,!1):void 0)})),{handler:r,content:o||""}}function x(e,n,o,r){function s(e){l=t(e).css("max-height",m()+"px"),d.find(".lity-loader").each(function(){var e=t(this);i(e).always(function(){e.remove()})}),d.removeClass("lity-loading").find(".lity-content").empty().append(l),p=!0,l.trigger("lity:ready",[u])}var c,d,l,u=this,p=!1,h=!1;n=t.extend({},P,n),d=t(n.template),u.element=function(){return d},u.opener=function(){return o},u.options=t.proxy(a,u,n),u.handlers=t.proxy(a,u,n.handlers),u.resize=function(){p&&!h&&l.css("max-height",m()+"px").trigger("lity:resize",[u])},u.close=function(){if(p&&!h){h=!0,_(u);var e=S();if(r&&(C.activeElement===d[0]||t.contains(d[0],C.activeElement)))try{r.focus()}catch(e){}return l.trigger("lity:close",[u]),d.removeClass("lity-opened").addClass("lity-closed"),i(l.add(d)).always(function(){l.trigger("lity:remove",[u]),d.remove(),d=void 0,e.resolve()}),e.promise()}},c=w(e,u,n.handlers,n.handler),d.attr(E,"false").addClass("lity-loading lity-opened lity-"+c.handler).appendTo("body").focus().on("click","[data-lity-close]",function(e){t(e.target).is("[data-lity-close]")&&u.close()}).trigger("lity:open",[u]),b(u),t.when(c.content).always(s)}function k(e,i,a){e.preventDefault?(e.preventDefault(),a=t(this),e=a.data("lity-target")||a.attr("href")||a.attr("src")):a=t(a);var n=new x(e,t.extend({},a.data("lity-options")||a.data("lity"),i),a,C.activeElement);if(!e.preventDefault)return n}var C=e.document,A=t(e),S=t.Deferred,T=t("html"),j=[],E="aria-hidden",D="lity-"+E,I='a[href],area[href],input:not([disabled]),select:not([disabled]),textarea:not([disabled]),button:not([disabled]),iframe,object,embed,[contenteditable],[tabindex]:not([tabindex^="-"])',P={esc:!0,handler:null,handlers:{image:c,inline:d,youtube:l,vimeo:u,googlemaps:h,facebookvideo:p,iframe:f},template:'<div class="lity" role="dialog" aria-label="Dialog Window (Press escape to close)" tabindex="-1"><div class="lity-wrap" data-lity-close role="document"><div class="lity-loader" aria-hidden="true">Loading...</div><div class="lity-container"><div class="lity-content"></div><button class="lity-close" type="button" aria-label="Close (Press escape to close)" data-lity-close>&times;</button></div></div></div>'},O=/(^data:image\/)|(\.(png|jpe?g|gif|svg|webp|bmp|ico|tiff?)(\?\S*)?$)/i,F=/(youtube(-nocookie)?\.com|youtu\.be)\/(watch\?v=|v\/|u\/|embed\/?)?([\w-]{11})(.*)?/i,L=/(vimeo(pro)?.com)\/(?:[^\d]+)?(\d+)\??(.*)?$/,U=/((maps|www)\.)?google\.([^\/\?]+)\/?((maps\/?)?\?)(.*)/i,z=/(facebook\.com)\/([a-z0-9_-]*)\/videos\/([0-9]*)(.*)?$/i,R=function(){var e=C.createElement("div"),t={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var i in t)if(void 0!==e.style[i])return t[i];return!1}();return c.test=function(e){return O.test(e)},k.version="2.3.1",k.options=t.proxy(a,k,P),k.handlers=t.proxy(a,k,P.handlers),k.current=y,t(C).on("click.lity","[data-lity]",k),k}),function(e,t){"use strict";function i(i,a,o,s,c){function d(){k=e.devicePixelRatio>1,o=l(o),a.delay>=0&&setTimeout(function(){u(!0)},a.delay),(a.delay<0||a.combined)&&(s.e=$(a.throttle,function(e){"resize"===e.type&&(w=x=-1),u(e.all)}),s.a=function(e){e=l(e),o.push.apply(o,e)},s.g=function(){return o=n(o).filter(function(){return!n(this).data(a.loadedName)})},s.f=function(e){for(var t=0;t<e.length;t++){var i=o.filter(function(){return this===e[t]});i.length&&u(!1,i)}},u(),n(a.appendScroll).on("scroll."+c+" resize."+c,s.e))}function l(e){var o=a.defaultImage,r=a.placeholder,s=a.imageBase,c=a.srcsetAttribute,d=a.loaderAttribute,l=a._f||{};e=n(e).filter(function(){var e=n(this),i=v(this);return!e.data(a.handledName)&&(e.attr(a.attribute)||e.attr(c)||e.attr(d)||l[i]!==t)}).data("plugin_"+a.name,i);for(var u=0,p=e.length;u<p;u++){var h=n(e[u]),f=v(e[u]),m=h.attr(a.imageBaseAttribute)||s;f===T&&m&&h.attr(c)&&h.attr(c,g(h.attr(c),m)),l[f]===t||h.attr(d)||h.attr(d,l[f]),f===T&&o&&!h.attr(j)?h.attr(j,o):f===T||!r||h.css(I)&&"none"!==h.css(I)||h.css(I,"url('"+r+"')")}return e}function u(e,t){if(!o.length)return void(a.autoDestroy&&i.destroy());for(var r=t||o,s=!1,c=a.imageBase||"",d=a.srcsetAttribute,l=a.handledName,u=0;u<r.length;u++)if(e||t||h(r[u])){var f=n(r[u]),m=v(r[u]),g=f.attr(a.attribute),$=f.attr(a.imageBaseAttribute)||c,b=f.attr(a.loaderAttribute);f.data(l)||a.visibleOnly&&!f.is(":visible")||!((g||f.attr(d))&&(m===T&&($+g!==f.attr(j)||f.attr(d)!==f.attr(E))||m!==T&&$+g!==f.css(I))||b)||(s=!0,f.data(l,!0),p(f,m,$,b))}s&&(o=n(o).filter(function(){return!n(this).data(l)}))}function p(e,t,i,o){++y;var r=function(){_("onError",e),b(),r=n.noop};_("beforeLoad",e);var s=a.attribute,c=a.srcsetAttribute,d=a.sizesAttribute,l=a.retinaAttribute,u=a.removeAttribute,p=a.loadedName,h=e.attr(l);if(o){var f=function(){u&&e.removeAttr(a.loaderAttribute),e.data(p,!0),_(C,e),setTimeout(b,1),f=n.noop};e.off(S).one(S,r).one(A,f),_(o,e,function(t){t?(e.off(A),f()):(e.off(S),r())})||e.trigger(S)}else{var m=n(new Image);m.one(S,r).one(A,function(){e.hide(),t===T?e.attr(D,m.attr(D)).attr(E,m.attr(E)).attr(j,m.attr(j)):e.css(I,"url('"+m.attr(j)+"')"),e[a.effect](a.effectTime),u&&(e.removeAttr(s+" "+c+" "+l+" "+a.imageBaseAttribute),d!==D&&e.removeAttr(d)),e.data(p,!0),_(C,e),m.remove(),b()});var v=(k&&h?h:e.attr(s))||"";m.attr(D,e.attr(d)).attr(E,e.attr(c)).attr(j,v?i+v:null),m.complete&&m.trigger(A)}}function h(e){var t=e.getBoundingClientRect(),i=a.scrollDirection,n=a.threshold,o=m()+n>t.top&&-n<t.bottom,r=f()+n>t.left&&-n<t.right;return"vertical"===i?o:"horizontal"===i?r:o&&r}function f(){return w>=0?w:w=n(e).width()}function m(){return x>=0?x:x=n(e).height()}function v(e){return e.tagName.toLowerCase()}function g(e,t){if(t){var i=e.split(",");e="";for(var a=0,n=i.length;a<n;a++)e+=t+i[a].trim()+(a!==n-1?",":"")}return e}function $(e,t){var n,o=0;return function(r,s){function c(){o=+new Date,t.call(i,r)}var d=+new Date-o;n&&clearTimeout(n),d>e||!a.enableThrottle||s?c():n=setTimeout(c,e-d)}}function b(){--y,o.length||y||_("onFinishedAll")}function _(e,t,n){return!!(e=a[e])&&(e.apply(i,[].slice.call(arguments,1)),!0)}var y=0,w=-1,x=-1,k=!1,C="afterLoad",A="load",S="error",T="img",j="src",E="srcset",D="sizes",I="background-image";"event"===a.bind||r?d():n(e).on(A+"."+c,d)}function a(a,r){var s=this,c=n.extend({},s.config,r),d={},l=c.name+"-"+ ++o;return s.config=function(e,i){return i===t?c[e]:(c[e]=i,s)},s.addItems=function(e){return d.a&&d.a("string"===n.type(e)?n(e):e),s},s.getItems=function(){return d.g?d.g():{}},s.update=function(e){return d.e&&d.e({},!e),s},s.force=function(e){return d.f&&d.f("string"===n.type(e)?n(e):e),s},s.loadAll=function(){return d.e&&d.e({all:!0},!0),s},s.destroy=function(){return n(c.appendScroll).off("."+l,d.e),n(e).off("."+l),d={},t},i(s,c,a,d,l),c.chainable?a:s}var n=e.jQuery||e.Zepto,o=0,r=!1;n.fn.Lazy=n.fn.lazy=function(e){return new a(this,e)},n.Lazy=n.lazy=function(e,i,o){if(n.isFunction(i)&&(o=i,i=[]),n.isFunction(o)){e=n.isArray(e)?e:[e],i=n.isArray(i)?i:[i];for(var r=a.prototype.config,s=r._f||(r._f={}),c=0,d=e.length;c<d;c++)(r[e[c]]===t||n.isFunction(r[e[c]]))&&(r[e[c]]=o);for(var l=0,u=i.length;l<u;l++)s[i[l]]=e[0]}},a.prototype.config={name:"lazy",chainable:!0,autoDestroy:!0,bind:"load",threshold:500,visibleOnly:!1,appendScroll:e,scrollDirection:"both",imageBase:null,defaultImage:"data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",placeholder:null,delay:-1,combined:!1,attribute:"data-src",srcsetAttribute:"data-srcset",sizesAttribute:"data-sizes",retinaAttribute:"data-retina",loaderAttribute:"data-loader",imageBaseAttribute:"data-imagebase",removeAttribute:!0,handledName:"handled",loadedName:"loaded",effect:"show",effectTime:0,enableThrottle:!0,throttle:250,beforeLoad:t,afterLoad:t,onError:t,onFinishedAll:t},n(e).on("load",function(){r=!0})}(window),function(e){"use strict";e.fn.fitVids=function(t){var i={customSelector:null,ignore:null};if(!document.getElementById("fit-vids-style")){var a=document.head||document.getElementsByTagName("head")[0],n=document.createElement("div");n.innerHTML='<p>x</p><style id="fit-vids-style">.fluid-width-video-wrapper{width:100%;position:relative;padding:0;}.fluid-width-video-wrapper iframe,.fluid-width-video-wrapper object,.fluid-width-video-wrapper embed {position:absolute;top:0;left:0;width:100%;height:100%;}</style>',a.appendChild(n.childNodes[1])}return t&&e.extend(i,t),this.each(function(){var t=['iframe[src*="player.vimeo.com"]','iframe[src*="youtube.com"]','iframe[src*="youtube-nocookie.com"]','iframe[src*="kickstarter.com"][src*="video.html"]',"object","embed"];i.customSelector&&t.push(i.customSelector);var a=".fitvidsignore";i.ignore&&(a=a+", "+i.ignore);var n=e(this).find(t.join(","));n=n.not("object object"),n=n.not(a),n.each(function(){var t=e(this);if(!(t.parents(a).length>0||"embed"===this.tagName.toLowerCase()&&t.parent("object").length||t.parent(".fluid-width-video-wrapper").length)){t.css("height")||t.css("width")||!isNaN(t.attr("height"))&&!isNaN(t.attr("width"))||(t.attr("height",9),t.attr("width",16));var i="object"===this.tagName.toLowerCase()||t.attr("height")&&!isNaN(parseInt(t.attr("height"),10))?parseInt(t.attr("height"),10):t.height(),n=isNaN(parseInt(t.attr("width"),10))?t.width():parseInt(t.attr("width"),10),o=i/n;if(!t.attr("name")){var r="fitvid"+e.fn.fitVids._count;t.attr("name",r),e.fn.fitVids._count++}t.wrap('<div class="fluid-width-video-wrapper"></div>').parent(".fluid-width-video-wrapper").css("padding-top",100*o+"%"),t.removeAttr("height").removeAttr("width")}})})},e.fn.fitVids._count=0}(window.jQuery||window.Zepto),$(document).ready(function(){function e(e){$(e).length&&$("html,body").scrollTop($(e).offset().top)}function t(e,t){var i=($(this),$(e).clone());$(i).css({position:"absolute",top:$(e).offset().top+80+"px",left:$(e).offset().left+100+"px",opacity:1,"z-index":1e3}),$("body").append($(i)),$(i).width("350");var a=$(t).offset().left+$(t).width()/2-$(e).width()/5/2,n=$(t).offset().top+$(t).height()/2-$(e).height()/5/2;$(i).animate({opacity:.4,left:a,top:n,width:$(e).width()/5,height:$(e).height()/5},700,function(){$(t).fadeOut("fast",function(){$(t).fadeIn("fast",function(){$(i).fadeOut("fast",function(){$(i).remove()})})})})}function i(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,a=$("#header .cart.item"),n=parseFloat(a.find("price number").text()),o=$(".content.cart").data("cartid"),r=$("#cart_popup");data={},data.qty=t,null!=i&&(data.size=i),$.ajax({method:"POST",url:"/cart/"+o+"/"+e,data:data,global:!1,success:function(e){console.log(e),a.find(".label").text(e.count),a.find("price number").text(parseFloat(n+parseFloat(e.price)).toFixed(2)),r.find(".button").before(e.row),r.find(".noitems").hide()}})}function a(){return $filters={},$filters.parameters={},$("#active_filters span").each(function(e,t){var i=$(t).data("group"),a=$(t).data("filter");$(t).data("group")?$filters[i][a]=[]:$filters[$(t).data("filter")]={}}),console.log($filters),$("#active_filters span").each(function(e,t){var i=$(t).data("group"),a=$(t).data("filter");null!=i?$filters[i][a].push($(t).data("value")):$filters[a]=$(t).data("value")}),$filters}function n(){return $("#category_path_wrapper").data("categoryid")}function o(){return $(".sort.active").data("sortby")}function r(){return $(".sort.active").data("sortorder")}function s(e){$(".banner_preview .cover").width(e+"%"),$("#cover_dimensions_settings").find("width").text($(".banner_preview .cover").width()),$coverRatio=($(".banner_preview .cover").width()/$(".banner_preview .cover").height()).toFixed(2),$("#cover_dimensions_settings").find("ratio").text($coverRatio),$bannerRatio=($(".banner_preview .banner").width()/$(".banner_preview .banner").height()).toFixed(2),$("#banner_dimensions_settings").find("ratio").text($bannerRatio),$("#banner_dimensions_settings").find("width").text($(".banner_preview .banner").width()),$('input[name="cover_ratio"]').val($coverRatio),$('input[name="banner_ratio"]').val($bannerRatio)}function c(e){$(".banner_preview .cover").height(e-2),$(".banner_preview .banners").height(e),$("#cover_dimensions_settings").find("height").text($(".banner_preview .cover").height()),$coverRatio=($(".banner_preview .cover").width()/$(".banner_preview .cover").height()).toFixed(2),$("#cover_dimensions_settings").find("ratio").text($coverRatio),$bannerRatio=($(".banner_preview .banner").width()/$(".banner_preview .banner").height()).toFixed(2),$("#banner_dimensions_settings").find("ratio").text($bannerRatio),$("#banner_dimensions_settings").find("height").text($(".banner_preview .banner").height()),$('input[name="cover_ratio"]').val($coverRatio),$('input[name="banner_ratio"]').val($bannerRatio)}function d(){$grid=$("#grid_wrapper").find("grid"),$filtersDiv=$("#filterbar").find(".params"),$sortBy=o(),$sortOrder=r(),$filters=a(),$categoryid=n(),$page=k("page"),$.get("/product/list",{category:$categoryid,sortBy:$sortBy,sortOrder:$sortOrder,filters:$filters,page:$page},function(e){$grid.html(e.products),$filtersDiv.html(e.filters),p(),$("#grid_wrapper").find(".dimmer").removeClass("active"),$("#grid_wrapper").show(),$(".sorts").show(),$("#price_slider").show(),$(".sort").removeClass("loading"),$grid.on("click",".view_more_button",function(){$(".view_more_button").addClass("loading"),$.get($("#next_page").attr("href"),{category:$categoryid,sortBy:$sortBy,sortOrder:$sortOrder,filters:$filters},function(e){$("#grid_div").remove(),$grid.find(".item").last().after($(e.products)),$("#grid_wrapper").find(".dimmer").removeClass("active"),$(".view_more_button").removeClass("loading")})})})}function l(e,t,i){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;$("#active_filters").append('<span data-value="'+t+'" data-filter="'+e+'" data-group="'+a+'" class="'+e+' ui large teal label">'+i+'<i class="delete icon"></i></span>')}function u(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";""==t?$("#active_filters").find('span[data-filter="'+e+'"]').remove():$("#active_filters").find('span[data-value="'+t+'"][data-filter="'+e+'"]').remove()}function p(){$("#filterbar  .ui.checkbox").checkbox({onChecked:function(){$value=$(this).closest(".checkbox").data("value"),$text=$(this).closest(".checkbox").find("label").text(),$filter=$(this).closest(".checkbox").data("filter"),$display=$(this).closest(".checkbox").data("display"),l($filter,$value,$display+": "+$text,"parameters"),d()},onUnchecked:function(){$value=$(this).closest(".checkbox").data("value"),$text=$(this).closest(".checkbox").find("label").text(),$filter=$(this).closest(".checkbox").data("filter"),$display=$(this).closest(".checkbox").data("display"),u($filter,$value),d()}})}function h(e){return/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(e)}
function f(e,t,i){$charts[e].data.labels=[],$charts[e].data.datasets.forEach(function(e){e.data=[]}),$(i).each(function(a,n){m($charts[e],t[a],i[a])})}function m(e,t,i){e.data.labels.push(t),e.data.datasets.forEach(function(e){e.data.push(i)}),e.update()}function v(e){for(var t=new Date,i=[],a=0;a<e;a++){var n=new Date(t.setDate(t.getDate()-1));i.push(n.getFullYear()+"-"+parseInt(n.getMonth()+1)+"-"+n.getDate())}return i}function g(e,t){var i=[],a=v(t);return assocData={},$(e).each(function(e,t){assocData[t.date]=t.count}),$(a).each(function(e,t){assocData[t]?i.push(assocData[t]):i.push(0)}),i}function b(){var e=Math.floor(256*Math.random()),t=Math.floor(256*Math.random()),i=Math.floor(256*Math.random());return rand="rgb("+e+","+t+","+i+")",rand}function _(e,t){for(var i=0;e[++i]<=t;);return e[--i]}function y(e){$related_carousel=$(".related_products_carousel").flickity({cellAlign:"left",contain:!0,pageDots:!1,prevNextButtons:!1,imagesLoaded:!0,autoPlay:e}),$related_carousel.on("staticClick.flickity",function(e,t,i,a){$link=$(i).find(".p_anch").attr("href"),0==$($(t)[0].target).hasClass("to_cart")&&0==$($(t)[0].target).hasClass("icon")&&(window.location.href=$link)})}function w(e,t){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments[3];$data={},$data.changes=e,$data.view=t,$.ajax({type:"PUT",url:"/admin/page/setting/",data:$data,success:function(e){i&&$("#page_preview").find("#"+a).html(e)}})}$(document).on("click",".to_cart",function(){$product=$(this).closest(".product").data("productid"),$product_code=$(this).closest(".product").data("productcode"),$product_name=$(this).closest(".product").find(".title").text();var e=$("#header .cart.item"),a=$(this).closest(".product").find(".image_div");$qty=$(this).closest(".product").data("minqty"),$(this).hasClass("sizes")?$("#sizes_modal").modal("setting",{duration:200,onShow:function(){$("#sizes_modal").find(".image img").attr("src",a.find("img").attr("src")),$("#sizes_modal > .header").html($product_name),$.get("/api/product/"+$product+"/sizes",{},function(e){$("#sizes_modal").find("#sizes").html(""),$(e).each(function(e,t){"PRODEJ UKONČEN"==t.stock?$class="inactive":$class="active",t.size_code==$product_code?$selected=" selected":$selected="",$("#sizes_modal").find("#sizes").append('<div class="size '+$class+$selected+'" data-code="'+t.size_code+'">'+t.text+"</div>"),$("#sizes_modal .size.active").click(function(){$("#sizes_modal .size").removeClass("selected"),$(this).addClass("selected")})})})},onApprove:function(){$size=$("#sizes_modal").find(".selected.size").data("code"),i($product,$qty,$size),t(a,e)}}).modal("show"):(t(a,e),i($product,$qty))}),$.ajaxSetup({headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")}});var x=window.location.href.split("/");console.log(x),""!=x[3]&&"admin"!=x[3]&&$(window).width()>680&&e("#grid.main"),window.onpopstate=function(e){e&&e.state&&location.reload()},$(".ui.checkbox").checkbox(),$("#header .account.item").popup({popup:$("#auth_popup"),on:"click"}),$("#header .catalogues.item").popup({popup:$("#catalogues_popup"),on:"hover",hoverable:!0}),$("#header .cart.item").popup({popup:$("#cart_popup"),on:"hover",hoverable:!0}),$("#header .cart.item").click(function(){window.location.href=$(this).attr("href")}),$(".ui.accordion").accordion({exclusive:!1}),$("#filterbar .ui.accordion").accordion({exclusive:!1,selector:{accordion:".accordion",title:".title",trigger:".title i",content:".content"}}),$(".admin_categories_list .ui.accordion").accordion({exclusive:!1,selector:{accordion:".accordion",title:".title",trigger:".name",content:".content"}}),$(".register_form").click(function(){$popup=$("#auth_popup"),$email=$("#register_div").find('input[name="email"]').val(),$password=$("#register_div").find('input[name="password"]').val()}),$(".login_form").submit(function(){return $validation=1,$popup=$("#auth_popup"),$email=$("#login_div").find('input[name="email"]').val(),$password=$("#login_div").find('input[name="password"]').val(),1==$validation}),$(".add_category_btn").click(function(){$("#add_category_modal").modal("setting",{autofocus:!1,onShow:function(){$(".dropdown").dropdown()},onApprove:function(){$name=$("#add_category_input").val(),$parent_id=$('input[name="parent_id"]').val(),$.ajax({type:"POST",url:"/category",data:{name:$name,parent_id:$parent_id},success:function(){location.reload()}})}}).modal("show")}),$("#create_product_add_param_row").click(function(){$html=$("#create_product_params .row:first-child").html(),$("#create_product_params").append('<div class="row">'+$html+"</div>"),$(".ui.dropdown").dropdown()}),$("#edit_product_add_param_row").click(function(){$html=$("#param_template .row").html(),$("#edit_product_params").append('<div class="row">'+$html+"</div>"),$(".ui.dropdown").dropdown()}),$("#create_product_categories_input").dropdown({maxSelections:1,onAdd:function(e,t,i){console.log(e)}}),$("#create_product_form").submit(function(e){return $validation=1,$name=$('#product_main_wrapper input[name="name"]').val(),$code=$('#product_main_wrapper input[name="code"]').val(),$maker=$('#product_main_wrapper input[name="maker"]').val(),$threshold=$('#product_main_wrapper input[name^="thresholds"]').val(),$moc=$('#product_main_wrapper input[name^="mocs"]').val(),$mocs=$('#product_main_wrapper input[name^="moc_sales"]').val(),$voc=$('#product_main_wrapper input[name^="vocs"]').val(),$vocs=$('#product_main_wrapper input[name^="voc_sales"]').val(),""==$name&&($validation=0,$('#product_main_wrapper input[name="name"]').parent().addClass("error")),""==$code&&($validation=0,$('#product_main_wrapper input[name="code"]').parent().addClass("error")),""==$maker&&($validation=0,$('#product_main_wrapper input[name="maker"]').parent().addClass("error")),""==$threshold&&($validation=0,$('#product_main_wrapper input[name^="thresholds"]').parent().addClass("error")),""==$moc&&($validation=0,$('#product_main_wrapper input[name^="moc"]').parent().addClass("error")),""==$mocs&&($validation=0,$('#product_main_wrapper input[name^="mocs"]').parent().addClass("error")),""==$voc&&($validation=0,$('#product_main_wrapper input[name^="voc"]').parent().addClass("error")),""==$vocs&&($validation=0,$('#product_main_wrapper input[name^="vocs"]').parent().addClass("error")),1==$validation}),$(".other_img .img").click(function(e){e.preventDefault(),$("#product_main_wrapper .img.main img").attr("src","/img/loader.gif"),$index=$(this).find("img").data("index"),$("#product_main_wrapper").data("index",$index);var t=new Image,i=$(this).find("img").data("full");t.src=i,t.onload=function(){$("#product_main_wrapper .img.main img").attr("src",i),$("#product_main_wrapper .img.main").attr("href",i)}}),$(".message .close").on("click",function(){$(this).closest(".message").transition("fade")}),$("#product_detail_tocart_btn").click(function(){$product=$("#product_main_wrapper").data("id"),$qty=$(this).data("qty"),$size=$("#product_main_wrapper .sizes .size.selected").data("code");var e=$("#header .cart.item");t($("#product_main_wrapper").find(".img"),e),i($product,$qty,$size)}),$(document).on("click",".delete_cart",function(){console.log(1),$("#delete_cart_modal").modal("setting",{onApprove:function(){$.ajax({type:"DELETE",url:"/cart/all",data:{},success:function(){location.replace("/cart/products")}})}}).modal("show")}),$(document).on("click",".catalogue_delete_btn",function(){$catalogueid=$(this).closest(".catalogue").data("id"),$("#delete_catalogue_modal").modal("setting",{onApprove:function(){$.ajax({type:"DELETE",url:"/file/"+$catalogueid,data:{},success:function(){location.reload()}})}}).modal("show")}),$(".catalogue_primary_btn").click(function(){$catalogueid=$(this).closest(".catalogue").data("id"),$.ajax({type:"PUT",url:"/file/"+$catalogueid,data:{primary:1},success:function(){location.reload()}})}),$(".catalogue_save_btn").click(function(){$catalogueid=$(this).closest(".catalogue").data("id"),$path=$(this).closest(".catalogue").find("input").val(),$(this).addClass("loading"),$.ajax({type:"PUT",url:"/file/"+$catalogueid,data:{path:$path},success:function(){location.reload()}})}),$(".cart_delete_product").click(function(){$productid=$(this).closest(".product").data("productid"),$cartid=$(".cart.content").data("cartid"),$.ajax({type:"DELETE",url:"/cart/"+$cartid+"/"+$productid,data:{},success:function(){location.reload()}})}),$(".cart_plus_product").click(function(){$productid=$(this).closest(".product").data("productid"),$.ajax({type:"POST",url:"/cart/"+$productid,data:{},success:function(){location.reload()}})}),$(".cart_minus_product").click(function(){$productid=$(this).closest(".product").data("productid"),$.ajax({type:"PUT",url:"/cart/"+$productid,data:{},success:function(){location.reload()}})}),p(),$("#banners_visible_checkbox").checkbox({onChecked:function(){$(".banner_preview").find(".banners").show(),$(".banner_preview .cover").width($('input[name="cover_width"').val()+"%"),$("#cover_width_setting").show()},onUnchecked:function(){$(".banner_preview").find(".banners").hide(),$(".banner_preview .cover").width("100%"),$("#cover_width_setting").hide()}}),function(){if($("#cover_height_slider").length){$("#cover_height_slider")[0].noUiSlider&&$("#cover_height_slider")[0].noUiSlider.destroy();var e=document.getElementById("cover_height_slider");noUiSlider.create(e,{start:$('input[name="cover_height"]').val(),connect:[!0,!1],range:{min:0,max:1e3},format:wNumb({decimals:0}),step:1}),e.noUiSlider.on("slide",function(){$('input[name="cover_height"').val(e.noUiSlider.get()),c(e.noUiSlider.get())})}}(),function(){if($("#cover_width_slider").length){$("#cover_width_slider")[0].noUiSlider&&$("#cover_width_slider")[0].noUiSlider.destroy();var e=document.getElementById("cover_width_slider");noUiSlider.create(e,{start:$('input[name="cover_width"]').val(),connect:[!0,!1],range:{min:50,max:90},format:wNumb({decimals:0}),step:1}),e.noUiSlider.on("slide",function(){$('input[name="cover_width"').val(e.noUiSlider.get()),s(e.noUiSlider.get())})}}();var k=function(e){var t,i,a=window.location.search.substring(1),n=a.split("&");for(i=0;i<n.length;i++)if(t=n[i].split("="),t[0]===e)return void 0===t[1]||decodeURIComponent(t[1])};"category_products_body"!=$("body").attr("id")&&"search_body"!=$("body").attr("id")||d(),$(".sort").click(function(){$(this).addClass("loading"),$(this).hasClass("active")?"asc"==$(this).data("sortorder")?("created_at"!=$(this).data("sortby")&&$(this).data("sortorder","desc"),$(this).find("i").removeClass("ascending").addClass("descending")):("created_at"!=$(this).data("sortby")&&$(this).data("sortorder","asc"),$(this).find("i").removeClass("descending").addClass("ascending")):($(".sort").removeClass("active"),$(this).addClass("active")),d()}),$(".categories .item .icon.plus").click(function(e){$(this).toggleClass("minus plus")}),$(".categories .item .icon.minus").click(function(e){$(this).toggleClass("minus plus")}),$(".cart_delivery.eshop").click(function(){$this=$(this),$deliveryNote=$this.data("note"),$this.hasClass("completed")||($delivery=$(this).data("delivery_method"),$(".cart_payment").each(function(e,t){$(t).removeClass("disabled completed active"),-1==$.inArray($delivery,$(t).data("delivery_methods"))&&$(t).addClass("disabled")}),$shipping_price=parseFloat($(this).data("price")),$data={delivery_method:$delivery},$(".cart_payment.completed.active").length&&$(".cart_delivery.completed.active").length&&($shipping_price=parseFloat($(this).data("price")),$data.payment_method="",$data.shipping_price=$shipping_price,$("#cart_shipping_price").find("price").text(parseFloat($data.shipping_price)),$("#cart_total_price").find("price").text(parseFloat($("#cart_total_price").data("price"))+$shipping_price),$(".cart_next").addClass("disabled")),$(".cart_payment.completed.active").length&&!$(".cart_delivery.completed.active").length&&($data.shipping_price=$shipping_price+parseFloat($(".cart_delivery.completed.active").data("price")),$("#cart_shipping_price").find("price").text(parseFloat($data.shipping_price)),$("#cart_total_price").find("price").text(parseFloat($("#cart_total_price").data("price"))+$shipping_price),$(".cart_next").removeClass("disabled")),!$(".cart_payment.completed.active").length&&$(".cart_delivery.completed.active").length&&($shipping_price=parseFloat($(this).data("price")),$data.payment_method="",$(".cart_payment").removeClass("completed active"),$data.shipping_price=$shipping_price,$("#cart_shipping_price").find("price").text(parseFloat($data.shipping_price)),$("#cart_total_price").find("price").text(parseFloat($("#cart_total_price").data("price"))+$shipping_price),$(".cart_next").addClass("disabled")),$(".cart_payment.completed.active").length||$(".cart_delivery.completed.active").length||($shipping_price=parseFloat($(this).data("price")),$data.payment_method="",$(".cart_payment").removeClass("completed active"),$data.shipping_price=$shipping_price,$("#cart_shipping_price").find("price").text(parseFloat($data.shipping_price)),$("#cart_total_price").find("price").text(parseFloat($("#cart_total_price").data("price"))+$shipping_price)),$(".cart_delivery").removeClass("completed active"),$.ajax({method:"POST",url:"/cart",data:$data,success:function(e){$this.hasClass("completed")||($this.addClass("completed active"),$("#cart_info_wrapper").find(".delivery_note").html($deliveryNote),$deliveryNote&&$("#cart_info_wrapper").show())}}))}),$(".cart_payment.eshop").click(function(){$this=$(this),$paymentNote=$this.data("note"),$this.hasClass("completed")||($payment=$(this).data("payment_method"),$shipping_price=parseFloat($(this).data("price")),$data={payment_method:$payment},$(".cart_payment.completed.active").length&&$(".cart_delivery.completed.active").length&&($shipping_price+=parseFloat($(".cart_delivery.completed.active").data("price")),$data.shipping_price=$shipping_price,$("#cart_total_price").find("price").text(parseFloat($("#cart_total_price").data("price"))+$shipping_price),$("#cart_shipping_price").find("price").text($shipping_price)),$(".cart_payment.completed.active").length&&!$(".cart_delivery.completed.active").length&&($shipping_price=parseFloat($(this).data("price")),$data.shipping_price=$shipping_price,$("#cart_total_price").find("price").text(parseFloat($("#cart_total_price").data("price"))+$shipping_price),$("#cart_shipping_price").find("price").text($shipping_price)),!$(".cart_payment.completed.active").length&&$(".cart_delivery.completed.active").length&&($shipping_price+=parseFloat($(".cart_delivery.completed.active").data("price")),$data.shipping_price=$shipping_price,$("#cart_total_price").find("price").text(parseFloat($("#cart_total_price").data("price"))+$shipping_price),$(".cart_next").removeClass("disabled"),$("#cart_shipping_price").find("price").text($shipping_price)),$(".cart_payment.completed.active").length||$(".cart_delivery.completed.active").length||($shipping_price=parseFloat($(this).data("price")),$data.shipping_price=$shipping_price,$("#cart_total_price").find("price").text(parseFloat($("#cart_total_price").data("price"))+$shipping_price),$("#cart_shipping_price").find("price").text($shipping_price)),$(".cart_payment").removeClass("completed active"),$.ajax({method:"POST",url:"/cart",data:$data,success:function(){$this.hasClass("completed")||($this.addClass("completed active"),$("#cart_info_wrapper").find(".payment_note").html($paymentNote),$paymentNote&&$("#cart_info_wrapper").show())}}))}),"body_cart_delivery"==$("body").attr("id")&&($deliveryprice=parseFloat($(".cart_delivery.active").data("price"))||0,$paymentprice=parseFloat($(".cart_payment.active").data("price"))||0,$("#cart_shipping_price").find("price").html($deliveryprice+$paymentprice),$("#cart_total_price").find("price").html(parseFloat($deliveryprice+$paymentprice+parseFloat($("#cart_without_vat_price").find("price").text()||0)+parseFloat($("#cart_vat").find("price").text()||0)+parseFloat($("#cart_price").find("price").text()||0)).toFixed(2)),$.ajax({method:"POST",url:"/cart",data:{shipping_price:$deliveryprice+$paymentprice}})),$("#view_goods_btn").click(function(){e("#home_content")}),$("#login_password_input").keypress(function(e){13==e.which&&$("#login_form").submit()}),$("#register_password_input").keypress(function(e){13==e.which&&$("#register_btn").click()}),$("#product_detail_delete_btn").click(function(){$productid=$("#product_main_wrapper").data("id"),$("#delete_product_modal").modal("setting",{onApprove:function(){$.ajax({type:"DELETE",url:"/product/"+$productid,data:{},success:function(){location.replace("/admin/products")}})}}).modal("show")}),$(".admin_delete_category_btn").click(function(){$categoryid=$(this).closest(".category").data("id"),$("#delete_category_modal").modal("setting",{onApprove:function(){$.ajax({type:"DELETE",url:"/category/"+$categoryid,data:{},success:function(){location.replace("/admin/products")}})}}).modal("show")}),$(".product_row_delete_btn").click(function(){$productid=$(this).closest(".product").data("productid"),$("#delete_product_modal").modal("setting",{onApprove:function(){$.ajax({type:"DELETE",url:"/product/"+$productid,data:{},success:function(){location.reload()}})}}).modal("show")});$(".product_search_input input").keyup(function(e){$query=$(this).val(),u("search"),""!=$query&&(l("search",$query,"hľadaj: "+$query),d())}),$("#settings_submit_btn").click(function(){$validation=1,$userid=$("#settings_user").data("userid"),$container=$("#right"),$data={},$rawdata={first_name:$container.find('input[name="first_name"]').val(),last_name:$container.find('input[name="last_name"]').val(),phone:$container.find('input[name="phone"]').val(),invoice_address:{street:$container.find('input[name="invoice_address_street"]').val(),zip:$container.find('input[name="invoice_address_zip"]').val(),city:$container.find('input[name="invoice_address_city"]').val(),company:$container.find('input[name="invoice_address_company"]').val(),ico:$container.find('input[name="invoice_address_ico"]').val(),dic:$container.find('input[name="invoice_address_dic"]').val(),icdph:$container.find('input[name="invoice_address_icdph"]').val()},delivery_address:{name:$container.find('input[name="delivery_address_name"]').val(),street:$container.find('input[name="delivery_address_street"]').val(),city:$container.find('input[name="delivery_address_city"]').val(),zip:$container.find('input[name="delivery_address_zip"]').val(),additional:$container.find('input[name="delivery_address_additional"]').val(),phone:$container.find('input[name="delivery_address_phone"]').val()}},$data.invoice_address=JSON.stringify($rawdata.invoice_address),$data.delivery_address=JSON.stringify($rawdata.delivery_address),$data.first_name=$rawdata.first_name,$data.last_name=$rawdata.last_name,$data.phone=$rawdata.phone,$data.redirect=$(this).data("redirect"),$validation&&$.ajax({method:"PUT",url:"/user/"+$userid,data:$data,success:function(e){location.reload()}})}),$("#use_delivery_address_input").checkbox({onChecked:function(){$(".cart_address .delivery").fadeIn(),$.ajax({method:"POST",url:"/cart",data:{delivery_address_flag:1}})},onUnchecked:function(){$(".cart_address .delivery").fadeOut(),$.ajax({method:"POST",url:"/cart",data:{delivery_address_flag:0}})}}),$("#use_ico_input").checkbox({onChecked:function(){$(".cart_address .ico").fadeIn(),$.ajax({method:"POST",url:"/cart",data:{ico_flag:1}})},onUnchecked:function(){$(".cart_address .ico").fadeOut(),$.ajax({method:"POST",url:"/cart",data:{ico_flag:0}})}}),$("#cart_shipping_next_btn").click(function(e){$validation=1,$invoiceAddress={},$deliveryAddress={},$ico={},$button=$(this),$button.addClass("loading"),$invoiceAddressInputs=$(".cart_address").find(".invoice").find(".input"),$invoiceAddressInputs.each(function(e,t){$type=$(t).data("column"),$invoiceAddress[$type]=$(t).find("input").val(),""==$(t).find("input").val()&&($validation=0,$(t).addClass("error"))}),$deliveryAdressFlag=$("#use_delivery_address_input").checkbox("is checked"),$icoFlag=$("#use_ico_input").checkbox("is checked"),$email=$('input[type="email"]').val(),h($email)||($validation=0,$('input[type="email"]').parent().addClass("error")),$phone=$('.input[data-column="phone"] input').val(),$.isNumeric($phone)||($validation=0,$('.input[data-column="phone"]').addClass("error")),$deliveryAdressFlag&&($deliveryAddressInputs=$(".cart_address").find(".delivery").find(".input"),$deliveryAddressInputs.each(function(e,t){$type=$(t).data("column"),$deliveryAddress[$type]=$(t).find("input").val(),""==$(t).filter(".mandatory").find("input").val()&&($validation=0,$(t).addClass("error"))})),$icoFlag&&($icoInputs=$(".cart_address").find(".ico").find(".input"),$icoInputs.each(function(e,t){$type=$(t).data("column"),$ico[$type]=$(t).find("input").val(),""==$(t).filter(".mandatory").find("input").val()&&($validation=0,$(t).addClass("error"))})),console.log($validation),$validation?($.extend($invoiceAddress,$ico),$.ajax({method:"POST",url:"/cart",data:{invoice_address:JSON.stringify($invoiceAddress),delivery_address:JSON.stringify($deliveryAddress)}}),e.preventDefault(),setTimeout(function(){$.get($(this).attr("href"),{},function(){location.replace($button.attr("href"))})},1e3)):(e.preventDefault(),$button.removeClass("loading"))}),$("#submit_order_btn").click(function(){$button=$(this),$button.addClass("loading"),$.ajax({method:"POST",url:"/order",success:function(){location.replace("/order/success")}})}),$("#admin #grid .product.item").draggable({opacity:.6,helper:"clone"}),$(".categories .item").droppable({tolerance:"pointer",accept:".product",over:function(e,t){$(this).addClass("active")},out:function(e,t){$(this).removeClass("active")},deactivate:function(e,t){$(this).removeClass("active")},drop:function(e,t){$categoryId=$(this).data("categoryid"),$product=$(t.draggable),$.post("/product/"+$product.data("productid")+"/change/category/"+$categoryId,{},function(){$product.remove()}),$(this).removeClass("active")}}),$(document).on("click",".admin_delete_user_btn",function(){$userid=$(this).closest(".user").data("userid"),$.ajax({method:"DELETE",url:"/user/"+$userid,success:function(){location.reload()}})}),$(".admin_admin_checkbox").checkbox({onChecked:function(){$userid=$(this).closest(".user").data("userid"),$.ajax({method:"PUT",url:"/user/"+$userid,data:{admin:1}})},onUnchecked:function(){$userid=$(this).closest(".user").data("userid"),$.ajax({method:"PUT",url:"/user/"+$userid,data:{admin:0}})}}),$(".delete_img").click(function(){$image=$(this).closest(".image_div"),$imageid=$image.data("fileid"),$.ajax({method:"DELETE",url:"/file/"+$imageid,data:{},success:function(){$image.remove()}})}),$(".make_primary_img").click(function(){$image=$(this).closest(".image_div"),$imageid=$image.data("fileid"),$.ajax({method:"PUT",url:"/file/"+$imageid,data:{primary:1},success:function(){$(".image_div").removeClass("primary"),$image.addClass("primary")}})}),$("#active_filters").on("click","span .delete",function(){$filter=$(this).parent().data("filter"),$value=$(this).parent().data("value"),$(this).parent().remove(),$('.filter[data-filter="'+$filter+'"][data-value="'+$value+'"]').removeClass("active"),d()}),$("#sidebar_handle").click(function(){$("#sidebar").sidebar("toggle")}),$("#catbar_handle").click(function(){$("#catbar").sidebar("setting","transition","overlay").sidebar("toggle")}),$("#parambarbar_handle").click(function(){$("#parambar").sidebar("toggle")}),$(".close_btn").click(function(){$(".ui.sidebar").sidebar("hide")}),$sales_carousel=$("#home_sales_div .items").flickity({cellAlign:"left",contain:!1,pageDots:!1,prevNextButtons:!1,imagesLoaded:!0,wrapAround:!0}),$news_carousel=$("#home_news_div .items").flickity({cellAlign:"left",contain:!1,pageDots:!1,prevNextButtons:!1,imagesLoaded:!1,wrapAround:!0}),$bestsellers_carousel=$("#home_bestsellers_div .items").flickity({cellAlign:"left",contain:!1,pageDots:!1,prevNextButtons:!1,imagesLoaded:!0,wrapAround:!0}),$sales_carousel.on("staticClick.flickity",function(e,t,i,a){$link=$(i).find(".p_anch").attr("href"),0==$($(t)[0].target).hasClass("to_cart")&&0==$($(t)[0].target).hasClass("icon")&&(window.location.href=$link)}),$news_carousel.on("staticClick.flickity",function(e,t,i,a){$link=$(i).find(".p_anch").attr("href"),0==$($(t)[0].target).hasClass("to_cart")&&0==$($(t)[0].target).hasClass("icon")&&(window.location.href=$link)}),$bestsellers_carousel.on("staticClick.flickity",function(e,t,i,a){$link=$(i).find(".p_anch").attr("href"),0==$($(t)[0].target).hasClass("to_cart")&&0==$($(t)[0].target).hasClass("icon")&&(window.location.href=$link)}),$("#admin_add_category_param_btn").click(function(){$html=$("#admin_filters_div .row:first-child").clone(),$("#admin_filters_div").append($html)}),$("#filterbar .tabs .category.tab").click(function(){$("#cat_div").show(),$("#filterbar .tabs .tab").removeClass("active"),$(this).addClass("active")}),$('#filterbar .tabs .param.tab:not(".disabled")').click(function(){$("#cat_div").hide(),$("#filterbar .tabs .tab").removeClass("active"),$(this).addClass("active")}),$carousel=$(".covers").flickity({autoPlay:4e3,setGallerySize:!1}),$carousel_mobile=$(".top_banner_row_mobile").flickity({autoPlay:4e3,pageDots:!1}),$carousel.on("pointerUp.flickity",function(){$("#search_results").hide()}),$(".expand_all_toggle").click(function(){$target=$(this).data("target"),$(this).hasClass("expanded")?($('[data-target="'+$target+'"]').find(".title").removeClass("active"),$('[data-target="'+$target+'"]').find(".content").removeClass("active"),$(this).removeClass("expanded").text("Rozbal všetko")):($('[data-target="'+$target+'"]').find(".title").addClass("active"),$('[data-target="'+$target+'"]').find(".content").addClass("active"),$(this).addClass("expanded").text("Zbal všetko"))}),$(".tabs .tab").click(function(){$(".tabs .tab").removeClass("brown").addClass("basic"),$(this).addClass("brown").removeClass("basic"),$(".tabs .content").removeClass("active"),$('.tabs .content[data-tab="'+$(this).data("tab")+'"]').addClass("active")}),$("#new_page_btn").click(function(){$("#add_page_modal").modal("setting",{autofocus:!0,onApprove:function(){$name=$("#add_page_name_input").val(),$url=$("#add_page_url_input").val(),$.ajax({type:"POST",url:"/page",data:{name:$name,url:$url},success:function(){location.reload()}})}}).modal("show")}),$("#new_text_btn").click(function(){$("#add_text_modal").modal("setting",{autofocus:!0,onApprove:function(){$name=$("#add_text_name_input").val(),$.ajax({type:"POST",url:"/text",data:{name:$name},success:function(){location.reload()}})}}).modal("show")}),$(".disabled.rating").each(function(e,t){$(t).rateYo("rating",$(t).data("rating"))}),$(".dashboard_tabs .new.tab").click(function(){$(".dashboard_tabs .overall.tab").removeClass("blue").addClass("basic"),$(this).addClass("blue").removeClass("basic"),$(".admin_dashboard .new.boxes").removeClass("hidden"),$(".admin_dashboard .overall.boxes").addClass("hidden")}),$(".dashboard_tabs .overall.tab").click(function(){$(".dashboard_tabs .new.tab").removeClass("blue").addClass("basic"),$(this).addClass("blue").removeClass("basic"),$(".admin_dashboard .new.boxes").addClass("hidden"),$(".admin_dashboard .overall.boxes").removeClass("hidden")}),$(".add_delivery_method_btn").click(function(){$("#add_delivery_method_modal").modal("setting",{onVisible:function(){$(".ui.dropdown").dropdown()},onApprove:function(){$name=$("#add_delivery_method_name_input").val(),$desc=$("#add_delivery_method_desc_input").val(),$price=$("#add_delivery_method_price_input").val(),$icon=$("#add_delivery_method_modal").find(".ui.dropdown.add").dropdown("get value"),$note=$("add_delivery_method_note_input").val(),$.ajax({type:"POST",url:"/admin/delivery",data:{name:$name,desc:$desc,icon:$icon,note:$note,price:$price},success:function(){location.reload()}})}}).modal("show")}),$(".add_payment_method_btn").click(function(){$("#add_payment_method_modal").modal("setting",{onApprove:function(){$name=$("#add_payment_method_name_input").val(),$desc=$("#add_payment_method_desc_input").val(),$price=$("#add_payment_method_price_input").val(),$icon=$("#add_payment_method_modal").find(".ui.dropdown.add").dropdown("get value"),$note=$("add_payment_method_note_input").val(),$.ajax({type:"POST",url:"/admin/payment",data:{name:$name,desc:$desc,icon:$icon,note:$note,price:$price},success:function(){location.reload()}})}}).modal("show")}),$(".admin_method_list i.delete").click(function(){$item=$(this).closest(".step"),$id=$(this).closest(".step").data("id"),$type=$(this).closest(".step").data("type"),$("#delete_method_modal").modal("setting",{autofocus:!1,onApprove:function(){$.ajax({type:"DELETE",url:"/admin/"+$type+"/"+$id,success:function(){$item.remove()}})}}).modal("show")}),$(".page_delete_btn").click(function(){$id=$(this).closest(".item").data("id"),$("#delete_page_modal").modal("setting",{onApprove:function(){$.ajax({type:"DELETE",url:"/page/"+$id,success:function(){location.reload()}})}}).modal("show")}),$(".text_delete_btn").click(function(){$id=$(this).closest(".item").data("id"),$("#delete_text_modal").modal("setting",{onApprove:function(){$.ajax({type:"DELETE",url:"/text/"+$id,success:function(){location.reload()}})}}).modal("show")}),$(".sticker_delete_btn").click(function(){$id=$(this).closest(".item").data("id"),$("#delete_sticker_modal").modal("setting",{onApprove:function(){$.ajax({type:"DELETE",url:"/sticker/"+$id,success:function(){location.reload()}})}}).modal("show")});var C,A,S,T;$(".sticker_preview_div .sticker").draggable({containment:"parent",create:function(){stikcer_left=0,sticker_right=0},stop:function(){C=$(this).position().left,A=$(this).position().top}}),$(".sticker_preview_div .sticker").resizable({containment:"parent",create:function(){S=$(this).width(),T=$(this).height()},stop:function(){S=$(this).width(),T=$(this).height()}}),$("#edit_sticker_submit").click(function(){$id=$(this).data("id"),$sticker_product_row=$("#sticker_product_row").checkbox("is checked"),$sticker_product_detail=$("#sticker_product_detail").checkbox("is checked"),$.ajax({url:"/sticker/"+$id,method:"PUT",data:{left:C,top:A,width:S,height:T,product_row:$sticker_product_row,product_detail:$sticker_product_detail},success:function(){location.reload()}})}),$(".admin_method_list i.edit").click(function(){$item=$(this).closest(".step"),$id=$item.data("id"),$type=$item.data("type"),$("#edit_method_modal").modal("setting",{autofocus:!1,onShow:function(){$("#edit_method_name_input").val($item.data("name")),$("#edit_method_desc_input").val($item.data("desc")),$("#edit_method_price_input").val($item.data("price")),$("#edit_method_modal").find(".ui.dropdown.edit").dropdown("set value",$item.data("icon")),$("#edit_method_modal").find(".ui.dropdown.edit").dropdown("set text","<i class='big icon "+$item.data("icon")+"'></i>"),$("#edit_method_note_input").val($item.data("note"))},onApprove:function(){$name=$("#edit_method_name_input").val(),$desc=$("#edit_method_desc_input").val(),$price=$("#edit_method_price_input").val(),$icon=$("#edit_method_modal").find(".ui.dropdown.edit").dropdown("get value"),$note=$("#edit_method_note_input").val(),console.log($note),$.ajax({type:"PUT",url:"/admin/"+$type+"/"+$id,data:{name:$name,desc:$desc,icon:$icon,note:$note,price:$price},success:function(){location.reload()}})}}).modal("show")}),$(".tabbs .tabb").click(function(){$(".tabbs .tabb").removeClass("blue selected").addClass("basic"),$(this).addClass("blue selected").removeClass("basic"),$(".tabbs .contents .content").removeClass("active"),$('.tabbs .contents .content[data-tab="'+$(this).data("tab")+'"]').addClass("active")}),$(".delivery_payment_checkbox").checkbox({onChecked:function(){$delivery_method_id=$(this).closest("tr").data("delivery_method_id"),$payment_method_id=$(this).closest("tr").data("payment_method_id"),$.ajax({method:"POST",url:"/admin/deliverypayment",data:{delivery_method_id:$delivery_method_id,payment_method_id:$payment_method_id}})},onUnchecked:function(){$delivery_method_id=$(this).closest("tr").data("delivery_method_id"),
$payment_method_id=$(this).closest("tr").data("payment_method_id"),$.ajax({method:"DELETE",url:"/admin/deliverypayment",data:{delivery_method_id:$delivery_method_id,payment_method_id:$payment_method_id}})}}),$("input.delivery_price").keyup(function(){$delivery_method_id=$(this).closest("tr").data("delivery_method_id"),$payment_method_id=$(this).closest("tr").data("payment_method_id"),$price=$(this).val(),$.ajax({method:"PUT",url:"/admin/deliverypayment",data:{delivery_method_id:$delivery_method_id,payment_method_id:$payment_method_id,price:$price}})});var j=document.getElementById("admin_add_cover_h1_size_slider"),E=document.getElementById("admin_add_cover_h2_size_slider");$("#admin_add_cover_h1_size_slider").length&&(noUiSlider.create(j,{start:$('#admin_add_cover_form input[name="h1_size"]').val(),connect:!0,range:{min:0,max:6}}),noUiSlider.create(E,{start:$('#admin_add_cover_form input[name="h2_size"]').val(),connect:!0,range:{min:0,max:6}}),j.noUiSlider.on("update",function(e){$(".cover_div h1").css("font-size",e[0]+"vw"),$('#admin_add_cover_form input[name="h1_size"]').val(e[0])}),E.noUiSlider.on("update",function(e){$(".cover_div h2").css("font-size",e[0]+"vw"),$('#admin_add_cover_form input[name="h2_size"]').val(e[0])})),$("#admin_add_cover_h1").on("keyup",function(e,t){$(".cover_div h1").html($(this).val()),$('#admin_add_cover_form input[name="h1_text"]').val($(this).val())}),$("#admin_add_cover_h2").on("keyup",function(e,t){$(".cover_div h2").html($(this).val()),$('#admin_add_cover_form input[name="h2_text"]').val($(this).val())}),$(".delete_banner_btn").click(function(){$btn=$(this),$("#delete_banner_modal").modal("setting",{autofocus:!1,onApprove:function(){$id=$btn.closest(".banner").data("id"),$.ajax({type:"DELETE",url:"/admin/banner/"+$id,success:function(){location.reload()}})}}).modal("show")}),$(".admin_cover_list").sortable({stop:function(){$data={},$(".admin_cover_list .banner").each(function(e,t){$data[$(t).data("id")]=e}),$.ajax({method:"PUT",url:"/admin/covers/setorder",data:$data})}}),$(".admin_banner_list").sortable({stop:function(){$data={},$(".admin_banner_list .banner").each(function(e,t){$data[$(t).data("id")]=e}),$.ajax({method:"PUT",url:"/admin/banners/setorder",data:$data})}});var D=function(e,t){return t.children().each(function(){console.log(e),$(this).width($(this).width())}),t};if($("#admin_new_wrapper table tbody").sortable({helper:D,stop:function(){$data={},$("#admin_new_wrapper table tbody tr").each(function(e,t){$data[$(t).data("id")]=e}),$.ajax({method:"PUT",url:"/products/new/setorder",data:$data})}}),$("#admin_new_wrapper table tbody .checkbox").checkbox({onChecked:function(){$id=$(this).closest("tr").data("id"),$.ajax({method:"PUT",url:"/api/product/"+$id,data:{new_carousel:1}})},onUnchecked:function(){$id=$(this).closest("tr").data("id"),$.ajax({method:"PUT",url:"/api/product/"+$id,data:{new_carousel:0}})}}),$("#admin_sale_wrapper table tbody").sortable({helper:D,stop:function(){$data={},$("#admin_sale_wrapper table tbody tr").each(function(e,t){$data[$(t).data("id")]=e}),$.ajax({method:"PUT",url:"/products/sale/setorder",data:$data})}}),$("#admin_sale_wrapper table tbody .checkbox").checkbox({onChecked:function(){$id=$(this).closest("tr").data("id"),$.ajax({method:"PUT",url:"/api/product/"+$id,data:{sale_carousel:1}})},onUnchecked:function(){$id=$(this).closest("tr").data("id"),$.ajax({method:"PUT",url:"/api/product/"+$id,data:{sale_carousel:0}})}}),"dashboard"==$("body").attr("id")&&(function(){$charts={},$("canvas").each(function(e,t){var i=t,a=i.getContext("2d"),n=b();i.height=$(i).parent().height(),$charts[$(t).closest(".box").data("resource")+$(t).closest(".box").data("type")]=new Chart(a,{type:"line",data:{labels:[],datasets:[{label:"Počet",backgroundColor:n,borderColor:n,data:[],fill:!1,lineTension:0}]},options:{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!1,legend:{display:!1},scales:{yAxes:[{ticks:{stepSize:1}}]}}})})}(),function(){$("canvas").each(function(e,t){var i=$(t).closest(".box").data("days"),a=$(t).closest(".box").data("resource"),n=$(t).closest(".box").data("type"),o=$(t).closest(".box").data("resource")+$(t).closest(".box").data("type");$.get("/api/"+a+"/"+n+"/"+i,{},function(e){var t=v(i).reverse(),a=g(e,i).reverse();f(o,t,a)})})}()),$(".chart_days_btn").click(function(){var e=($(this).closest(".box"),$(this).data("days")),t=$(this).closest(".box").data("resource"),i=$(this).closest(".box").data("type"),a=t+i;$.get("/api/"+t+"/"+i+"/"+e,{},function(t){var i=v(e).reverse(),n=g(t,e).reverse();f(a,i,n)}),$(this).closest(".fr").find(".chart_days_btn").removeClass("selected"),$(this).addClass("selected")}),$(".layout_div").click(function(){$layout=$(this).data("layout"),$.post("/admin/layout/set",{layout:$layout},function(){location.reload()})}),$(".ui.new.product.search").search({apiSettings:{url:"/api/products/search?query={query}"},fields:{results:"results",title:"name",url:""},onSelect:function(e,t){$.ajax({method:"PUT",url:"/api/product/"+e.id,data:{new:1},success:function(t){$row=$("#new_product_table tbody tr:first-child").clone(),$row.find("td:first-child").text(e.id),$row.find("td:nth-child(2)").text(e.name),$row.data("id",e.id),$("#new_product_table tbody tr:last-child").before($row),$(".ui.new.product.search input").val("")}})}}).unbind("ajaxStart"),$("#new_product_table").on("click",".red.button",function(){$row=$(this).closest("tr"),$id=$row.data("id"),$.ajax({method:"PUT",url:"/api/product/"+$id,data:{new:0},success:function(e){$row.remove()}})}),$(".ui.sale.product.search").search({apiSettings:{url:"/api/products/search?query={query}"},fields:{results:"results",title:"name",url:""},onSelect:function(e,t){$.ajax({method:"PUT",url:"/api/product/"+e.id,data:{sale:1},success:function(t){$row=$("#sale_product_table tbody tr:first-child").clone(),$row.find("td:first-child").text(e.id),$row.find("td:nth-child(2)").text(e.name),$row.data("id",e.id),$("#sale_product_table tbody tr:last-child").before($row),$(".ui.sale.product.search input").val("")}})}}),$("#sale_product_table").on("click",".red.button",function(){$row=$(this).closest("tr"),$id=$row.data("id"),$.ajax({method:"PUT",url:"/api/product/"+$id,data:{sale:0},success:function(e){$row.remove()}})}),$(".ui.inactive.product.search").search({apiSettings:{url:"/api/products/search?query={query}"},fields:{results:"results",title:"name",url:""},onSelect:function(e,t){$.ajax({method:"PUT",url:"/api/product/"+e.id,data:{active:0},success:function(t){$row=$("#inactive_product_table tbody tr:first-child").clone(),$row.find("td:first-child").text(e.id),$row.find("td:nth-child(2)").text(e.name),$row.data("id",e.id),$("#inactive_product_table tbody tr:last-child").before($row)}})}}),$("#inactive_product_table").on("click",".red.button",function(){$row=$(this).closest("tr"),$id=$row.data("id"),$.ajax({method:"PUT",url:"/api/product/"+$id,data:{active:1},success:function(e){$row.remove()}})}),$(".ui.bestseller.product.search").search({apiSettings:{url:"/api/products/search?query={query}"},fields:{results:"results",title:"name",url:""},onSelect:function(e,t){$.ajax({method:"PUT",url:"/api/product/"+e.id,data:{bestseller:1},success:function(t){$row=$("#bestseller_product_table tbody tr:first-child").clone(),$row.find("td:first-child").text(e.id),$row.find("td:nth-child(2)").text(e.name),$row.data("id",e.id),$("#bestseller_product_table tbody tr:last-child").before($row),$(".ui.bestseller.product.search input").val("")}})}}).unbind("ajaxStart"),$("#bestseller_product_table").on("click",".red.button",function(){$row=$(this).closest("tr"),$id=$row.data("id"),$.ajax({method:"PUT",url:"/api/product/"+$id,data:{bestseller:0},success:function(e){$row.remove()}})}),$(".ui.bestseller.category.search").search({apiSettings:{url:"/api/categories/search?query={query}"},fields:{results:"results",title:"full_url",image:"",action:"",actionText:"",actionURL:"",url:""},onSelect:function(e,t){$.ajax({method:"PUT",url:"/api/category/"+e.id,data:{bestseller:1},success:function(t){$row=$("#bestseller_category_table tbody tr:first-child").clone(),$row.find("td:first-child").text(e.id),$row.find("td:nth-child(2)").text(e.name),$row.data("id",e.id),$("#bestseller_category_table tbody tr:last-child").before($row),$(".ui.bestseller.category.search input").val("")}})}}).unbind("ajaxStart"),$("#bestseller_category_table").on("click",".red.button",function(){$row=$(this).closest("tr"),$id=$row.data("id"),$.ajax({method:"PUT",url:"/api/category/"+$id,data:{bestseller:0},success:function(e){$row.remove()}})}),$(".ui.cart.product.search").search({apiSettings:{url:"/api/products/search?query={query}"},fields:{results:"results",title:"name",url:""},onSelect:function(e,t){$cartid=$(".cart.content").data("cartid"),$.ajax({method:"POST",url:"/cart/"+$cartid+"/"+e.id,data:{qty:1},success:function(e){location.reload()}})}}),$("#import_json_btn").click(function(){$json=$.parseJSON($("#import_json").find("textarea").val()),$table=$("#import_json_table"),$tbody=$table.find("tbody"),$table.show(),$($json).each(function(e,t){$tbody.find("tr:last-child td:nth-child(2)").html('<img src="'+t.img+'" width="100" />'),$tbody.find("tr:last-child td:nth-child(3)").text(t.id),$tbody.find("tr:last-child td:nth-child(4)").text(t.nome),$tbody.find("tr:last-child td:nth-child(5)").text(t.descr),$tbody.find("tr:last-child").clone().appendTo($tbody)}),$(".ui.checkbox").checkbox()}),$("#import_json_accept").click(function(){var e=$("#import_json_table").tableToJSON();console.log(e),$.post("/admin/import/json",{json:$("#import_json").find("textarea").val()},function(e){console.log(e)})}),$(".add_color_btn").click(function(){$("#add_color_modal").modal("setting",{onApprove:function(){$key=$("#add_color_key_input").val(),$value=$("#add_color_value_input").val(),$.ajax({type:"POST",url:"/admin/color/",data:{key:$key,value:$value},success:function(){location.reload()}})}}).modal("show")}),function(){var e=document.getElementsByClassName("cart_length_slider");$min=[],$old=[];for(var t=0;t<e.length;t++)$ii=t,$qty=$(e[t]).data("qty"),$step=$(e[t]).data("step"),$thresholds=$(e[t]).data("thresholds"),$prices=JSON.parse($(e[t]).data("prices")),$min[t]=$(e[t]).data("min"),noUiSlider.create(e[t],{start:$qty,step:$step,connect:"lower",orientation:"horizontal",tooltips:!0,range:{min:0,max:500},format:wNumb({decimals:0})}),e[t].noUiSlider.on("slide",function(e,t){$level=_($thresholds,e[t]),$index=$thresholds.indexOf($level),$newprice=$prices[$index],$($(this)[0].target).closest(".item.product").find(".final_price").html($newprice+" &euro;")}),$cartid=$(".cart.content").data("cartid"),$old[t]=e[t].noUiSlider.get(),e[t].noUiSlider.on("change",function(t,i){t[i]<$($(this)[0].target).data("min")?e[$ii].noUiSlider.set($old[$ii]):($("#grid_wrapper .dimmer").addClass("active"),$.ajax({type:"PUT",url:"/cart/"+$cartid+"/"+$($(this)[0].target).data("productid"),data:{qty:t[i]},success:function(){location.reload()}}))})}(),$("#add_price_level_btn").click(function(){$.get("/api/view/pricelevel",{},function(e){$("#product_price_levels_list").append(e)})}),$(".admin_checkbox_onthefly").checkbox({onChecked:function(){$resource=$(this).parent().data("resource"),$name=$(this).attr("name"),$id=$(this).parent().data("id"),$data={},$data[$name]=1,$.ajax({method:"PUT",url:"/"+$resource+"/"+$id,data:$data})},onUnchecked:function(){$resource=$(this).parent().data("resource"),$name=$(this).attr("name"),$id=$(this).parent().data("id"),$data={},$data[$name]=0,$.ajax({method:"PUT",url:"/"+$resource+"/"+$id,data:$data})}}),"body_bulk"==$("body").attr("id")){var I=function(e,t,i,a,n,o,r){return $(t).html('<a class="blue icon mini button" href="/p/'+o+'"><i class="search icon"><i></a>'),$(t).append('<a class="teal icon mini button" href="/admin/eshop/product/'+o+'"><i class="edit icon"><i></a>'),t},P=function(e,t,i,a,n,o,r){var i=[];return $(o).each(function(e,t){i[e]=t.path+"<br/>"}),$(t).html(i),t},O=function(e,t,i,a,n,o,r){return $(function(){$(".lazy").Lazy()}),o&&(o.path&&-1!==o.path.toString().indexOf("http")?$(t).html('<div class="image"><img class="lazy" data-src="'+o.path+'" /></div>'):$(t).html('<div class="image"><img class="lazy" data-src="/'+o.path+'" /></div>')),t};container=document.getElementById("bulk_products_table");var F=[],L=[],U=[],z=[];$data={},$data.changes=[],$data.categoryChanges={},$data.categoryChanges.categories=[],$data.categoryChanges.products=[],$data.categoryAdds={},$data.categoryAdds.categories=[],$data.categoryAdds.products=[],$data.categoryRemoved={},$data.categoryRemoved.categories=[],$data.categoryRemoved.products=[],$data.addEcoImages={},$data.removeEcoImages={},hot=new Handsontable(container,{columns:[{data:"url",renderer:I},{data:"active",type:"checkbox",checkedTemplate:1,uncheckedTemplate:0},{data:"image",renderer:O},{data:"code"},{data:"name"},{data:"price_levels.0.moc_regular"},{data:"price_levels.0.moc_sale"},{data:"sale",type:"checkbox",checkedTemplate:1,uncheckedTemplate:0},{data:"categories",renderer:P}],colHeaders:["","Aktívny","Obrázok","Kód","Názov","Cena","Cena v zlave","Zlava","Kategórie"],colWidths:[5,7,7,10,"",10,10,5,""],rowHeaders:!0,minSpareRows:1,stretchH:"all",columnSorting:!0,rowHeights:60,outsideClickDeselects:!1,afterChange:function(e,t){"edit"!=t&&"CopyPaste.paste"!=t||(e[0][2]!=e[0][3]&&(F.push({rowid:e[0][0],colid:this.propToCol(e[0][1])}),$data.changes.push(this.getSourceDataAtRow(e[0][0]))),$.each(F,function(e,t){$this.getCell(t.rowid,t.colid,!1).className="changed"}),console.log($data.changes))},afterRender:function(){$this=this,$.each(F,function(e,t){$this.getCell(t.rowid,t.colid,!1).className="changed"})},afterSelection:function(e,t,i,a,n,o){U=[],L=[],$ins=this,$("#bulk_products_wrapper .actions >.right").show();var r;$(this.getSelected()).each(function(e,t){for(r=t[0];r<=t[2];r++)L.push($ins.getSourceDataAtRow(r)),U.push($ins.getSourceDataAtRow(r).id)});var s;for(s=e;s<=i;s++)L.push(this.getSourceDataAtRow(s)),U.push(this.getSourceDataAtRow(s).id)},afterDeselect:function(){$("#bulk_products_wrapper .actions .right").hide(),L=[],U=[]}});var R=document.getElementById("bulk_load_btn");Handsontable.dom.addEvent(R,"click",function(){$(R).addClass("loading"),$filters={categories:$(".filter_item.category").dropdown("get value"),name:$(".filter_item.name").find("input").val(),without_category:$(".filter_item.without_category").checkbox("is checked"),inactive_only:$(".filter_item.inactive").checkbox("is checked")},$.ajax({url:"/api/products/filter",method:"GET",data:$filters,success:function(e){$("#bulk_products_table").show(),$("#bulk_save_btn").css("display","inline-block"),$(R).removeClass("loading"),hot.getInstance().loadData(e),hot.getInstance().render()}})}),$("#bulk_change_category_dropdown").dropdown({maxSelections:10,fullTextSearch:!0,onAdd:function(e,t,i){z.push(e)}}),$("#bulk_change_category_btn").click(function(){$("#bulk_change_category_modal").modal("setting",{autofocus:!1,onShow:function(){$.ajax({method:"GET",url:"/api/products/simplelist",data:{id:U},success:function(e){$("#bulk_change_category_modal").find(".product_list").html(e)}})},onApprove:function(){$data.categoryChanges.products=U,$data.categoryChanges.categories.push($("#bulk_change_category_dropdown").dropdown("get value"))}}).modal("show")}),$("#bulk_add_category_btn").click(function(){$("#bulk_add_category_modal").modal("setting",{autofocus:!1,onShow:function(){$.ajax({method:"GET",url:"/api/products/simplelist",data:{id:U},success:function(e){$("#bulk_add_category_modal").find(".product_list").html(e)}})},onApprove:function(){$data.categoryAdds.products=U,$data.categoryAdds.categories.push($("#bulk_add_category_dropdown").dropdown("get value"))}}).modal("show")}),$("#bulk_add_eco_images_btn").click(function(){$data.addEcoImages=U}),$("#bulk_remove_eco_images_btn").click(function(){$data.removeEcoImages=U});var q=document.getElementById("bulk_save_btn");Handsontable.dom.addEvent(q,"click",function(){$(q).addClass("loading"),console.log(JSON.stringify($data)),$.ajax({url:"/api/bulk",method:"POST",data:JSON.stringify($data),success:function(e){$(q).removeClass("loading"),$("#bulk_products_table").find("td").removeClass("changed")}})})}$("#bulk_filter_category").dropdown({maxSelections:10,fullTextSearch:!0,onAdd:function(e,t,i){}}),$("#cookies_consent_btn").click(function(){$(document).unbind("ajaxStart"),$("#cookies_msg").hide(),$.ajax({method:"POST",url:"/cookies",data:{name:"cookies_consent",value:1,expiry:9999999},success:function(){$(document).bind("ajaxStart")}})}),$("#product_sticker_load_btn").click(function(){$filters={categories:$(".filter_item.category").dropdown("get value"),name:$(".filter_item.name input").val()},$("#filters_stickers_active_checkbox").checkbox("is checked")&&($filters.with_stickers_only=1),$button=$(this),$button.addClass("loading"),$.ajax({url:"/api/products/filter",method:"GET",data:$filters,success:function(e){$(".product_list .list").html(""),$(e).each(function(e,t){$stickers=[],0!=t.stickers.length&&$(t.stickers).each(function(e,t){-1!==t.path.toString().indexOf("http")?$stickers.push("<img src="+t.path+" data-productid="+t.pivot.product_id+" data-stickerid="+t.pivot.sticker_id+">"):$stickers.push("<img src=/"+t.path+" data-productid="+t.pivot.product_id+" data-stickerid="+t.pivot.sticker_id+">")}),$html="<div class='item' data-id='"+t.id+"'>",$html+="<div class='ui checkbox'><input type='checkbox'><label></label></div>",$html+="<div class='name'>"+t.name+"</div>",$html+="<div class='active_stickers'>"+$stickers.toString()+"</div>",$html+="</div>",$(".product_list .list").append($html),$(".product_list .list .checkbox").checkbox({onChecked:function(){$item=$(this).closest(".item"),$item.addClass("selected")},onUnchecked:function(){$item=$(this).closest(".item"),$item.removeClass("selected")}})}),$button.removeClass("loading"),$("#product_sticker_save_btn").css("display","inline-block"),$(".active_stickers img").click(function(){$image=$(this),$productid=$(this).data("productid"),$stickerid=$(this).data("stickerid"),$.ajax({url:"/product/"+$productid+"/sticker/"+$stickerid,method:"DELETE",success:function(e){$image.remove()}})})}})}),$(".sticker_list .sticker").click(function(){$(this).toggleClass("selected")}),$("#product_sticker_save_btn").click(function(){$data={},$data.products=[],$data.stickers=[],$data.sticker_paths=[],$(".sticker_list .sticker.selected").each(function(e,t){$data.stickers[e]=$(t).data("id"),$data.sticker_paths[e]=$(t).find("img").attr("src")}),$(".product_list .list .item.selected").each(function(e,t){$data.products[e]=$(t).data("id")}),$.ajax({url:"/stickers/attach",method:"POST",data:$data,success:function(e){$(".product_list .list .item.selected").each(function(e,t){$(t).find(".active_stickers").append("<img src="+$data.sticker_paths+">")})}})}),$("body").attr("id"),$(".filterbar_handle").mouseover(function(){$(".absolute").show()}),$(".absolute #filterbar").mouseleave(function(){setTimeout(function(){$(".absolute").hide()},600)}),$(".admin_delete_category_param_btn").click(function(){$.ajax({method:"DELETE",url:"/category/parameter/"+$(this).data("paramid"),success:function(){location.reload()}})}),$(".category i.setting").click(function(e){e.preventDefault(),location.replace($(this).data("href"))}),$("#change_grid_view_btn").click(function(){$("#grid_wrapper").find(".item").addClass("grid").removeClass("list"),$(this).addClass("active"),$("#change_list_view_btn").removeClass("active")}),$("#change_list_view_btn").click(function(){$("#grid_wrapper").find(".item").addClass("list").removeClass("grid"),$(this).addClass("active"),$("#change_grid_view_btn").removeClass("active")}),$("#cart_continue_btn").click(function(){$price=$("#cart_total_price price").text(),$.ajax({type:"POST",url:"/cart/",data:{price:$price},success:function(){}})}).unbind("ajaxStart"),$().prettyEmbed({useFitVids:!0}),$(document).on("click",".pretty-embed",function(){lity("//www.youtube.com/watch?v="+$(this).data("pe-videoid"))}),$("#add_param_btn").click(function(){$("#add_param_modal").modal("setting",{autofocus:!1,onApprove:function(){$key=$('#add_param_modal input[name="key"]').val(),$display_key=$('#add_param_modal input[name="display_key"]').val(),$.ajax({type:"POST",url:"/param/",data:{key:$key,display_key:$display_key},success:function(){location.reload()}})}}).modal("show")}),$(".edit_param_btn").click(function(){$id=$(this).closest(".param.item").data("paramid"),$val=$(this).closest(".param.item").data("val"),$("#edit_param_modal").modal("setting",{autofocus:!1,onShow:function(){$('#edit_param_modal input[name="display_key"]').val($val)},onApprove:function(){$display_key=$('#edit_param_modal input[name="display_key"]').val(),$.ajax({type:"PUT",url:"/param/"+$id,data:{display_key:$display_key},success:function(){location.reload()}})}}).modal("show")}),$(".delete_param_btn").click(function(){$id=$(this).closest(".param.item").data("paramid"),$("#delete_param_modal").modal("setting",{autofocus:!1,onApprove:function(){$.ajax({type:"DELETE",url:"/param/"+$id,success:function(){location.reload()}})}}).modal("show")}),$(document).on("click","#params_list .param.item:not(.manage)",function(e){(e.target==this||$(e.target).hasClass("name")||$(e.target).hasClass("eye"))&&($paramid=$(this).data("paramid"),$catid=$(this).data("categoryid"),$this=$(this),$this.find(".dimmer").addClass("active"),$this.hasClass("active")?$.ajax({type:"DELETE",url:"/category/parameter/"+$paramid,data:{category_id:$catid},success:function(){$this.removeClass("active"),$this.find(".dimmer").removeClass("active")}}):$.ajax({type:"POST",url:"/category/parameter/add",data:{parameter_id:$paramid,category_id:$catid},success:function(){$this.addClass("active"),$this.find(".dimmer").removeClass("active")}}))}),$("#admin_category_params_selection").length>0&&$(".dropdown").dropdown({onAdd:function(e,t,i){$catid=$("#category_image_div").data("categoryid"),$.ajax({type:"POST",url:"/category/parameter/add",data:{parameter_id:e,category_id:$catid},success:function(){}})},onRemove:function(e,t,i){$catid=$("#category_image_div").data("categoryid"),$.ajax({type:"DELETE",url:"/category/parameter/"+e,data:{category_id:$catid},success:function(){}})}}),$("#admin_order_params_save").click(function(){$data={},$data.min_order_price=$('input[name="min_order_price"]').val(),$data.min_free_shipping_price=$('input[name="min_free_shipping_price"]').val(),$.post("/set/config",$data,function(){})}),$(document).on("click",".delete_product_param",function(){$(this).closest(".row").remove()}),$("#send_remider_btn").click(function(){$(this).addClass("loading")}),$(document).on("click",".delete_price_level_btn",function(){$(this).closest(".product_price_level").remove()}),$(".delete_order_btn").click(function(){$orderid=$(this).closest("tr").data("order_id"),$("#delete_order_modal").modal("setting",{onApprove:function(){$.ajax({type:"DELETE",url:"/order/"+$orderid,success:function(){location.reload()}})}}).modal("show")}),$(".close_order_btn").click(function(){$orderid=$(this).closest("tr").data("order_id"),$("#change_order_modal").modal("setting",{onApprove:function(){$.ajax({type:"PUT",url:"/order/"+$orderid,data:{status_id:5},success:function(){location.reload()}})}}).modal("show")}),$(".delete_user_btn").click(function(){$userid=$(this).closest("tr").data("user_id"),$("#delete_user_modal").modal("setting",{onApprove:function(){$.ajax({type:"DELETE",url:"/user/"+$userid,success:function(){location.reload()}})}}).modal("show")}),$(".order_change_status_btn").click(function(){$orderid=$(".order_detail").data("orderid"),$status_id=$(this).data("statusid"),0==$status_id&&$("#change_order_modal").modal("setting",{onApprove:function(){$.ajax({type:"PUT",url:"/order/"+$orderid,data:{status_id:$status_id},success:function(){location.reload()}})}}).modal("show"),1==$status_id&&$("#change_order_modal_sent").modal("setting",{onApprove:function(){$.ajax({type:"PUT",url:"/order/"+$orderid,data:{status_id:$status_id,package_number:$('input[name="package_number"]').val()},success:function(){location.reload()}})}}).modal("show"),4==$status_id&&$("#change_order_modal_cancelled").modal("setting",{onApprove:function(){$.ajax({type:"PUT",url:"/order/"+$orderid,data:{status_id:$status_id,cancel_text:$('input[name="cancel_text"]').val()},success:function(){location.reload()}})}}).modal("show")}),$("#main_search input").keyup(function(e){13==e.which?location.replace("/search/"+$query):($(document).unbind("ajaxStart"),$query=$(this).val(),$(".search_view_all_btn").attr("href","/search/"+$query),$.ajax({type:"GET",url:"/api/search/"+$query,success:function(e){$("#search_results.desktop").show(),$("#search_results.desktop").find(".products").html(e.products),$("#search_results.desktop").find(".users").html(e.users),$(document).bind("ajaxStart")}}))}),$("body").mouseup(function(e){var t=$("#search_results.desktop");t.is(e.target)||0!==t.has(e.target).length||t.hide()});var N,B;"body_contact"==$("body").attr("id")&&(function(){N=new google.maps.Geocoder;var e=new google.maps.LatLng(-34.397,150.644),t={zoom:18,center:e};B=new google.maps.Map(document.getElementById("map"),t)}(),function(){var e=$("#address_map").text();N.geocode({address:e},function(e,t){"OK"==t?(B.setCenter(e[0].geometry.location),new google.maps.Marker({map:B,position:e[0].geometry.location})):alert("Geocode was not successful for the following reason: "+t)})}()),tinymce.init({selector:".richtext.editable",auto_focus:"mce_0",menubar:!1,plugins:["advlist autolink lists link image charmap print preview anchor textcolor","searchreplace visualblocks code fullscreen","insertdatetime media table contextmenu paste code help wordcount"],toolbar:"fontselect | code | insert | undo redo |  formatselect | bold italic backcolor  | alignleft aligncenter alignright alignjustify | bullist numlist outdent indent | removeformat | help",init_instance_callback:function(e){$(".text_files_list .item").click(function(){$path=$(this).data("content"),$extension=$path.split(".").pop(),$filename=$path.split("/").pop(),"jpg"==$extension?$content="<img src='/"+$path+"' width='100'>":$content="<a href='"+$path+"'>"+$filename+"</a>",e.insertContent($content)})}}),$(".text_save_btn").click(function(){$(".text_form").submit()}),$(".page_texts_list .item").click(function(){$button=$(this),$pageid=$(this).data("pageid"),$textid=$(this).data("textid"),$button.hasClass("active")?$.ajax({type:"POST",url:"/page/"+$pageid+"/detach/"+$textid,success:function(e){$button.removeClass("active"),$('.text_form[data-textid="'+$textid+'"]').remove()}}):$.ajax({type:"POST",url:"/page/"+$pageid+"/attach/"+$textid,success:function(e){$button.addClass("active"),$.ajax({method:"GET",url:"/text/"+$textid,success:function(e){$(".page_preview").append(e)}})}})}),$(".copy_to_clipboard_btn").click(function(){$(this).closest(".input").find("input").select(),document.execCommand("copy"),$(this).closest(".button").toggleClass("teal green"),$(this).toggleClass("copy checkmark")}),y(parseInt($("#suggested_wrapper_speed").find("value").html())),$("#grid_wrapper").on("click",".product.item",function(e){$link=$(this).find(".p_anch").attr("href"),0==$(e.target).hasClass("to_cart")&&0==$(e.target).hasClass("icon")&&(window.location.href=$link)});var M=$.ModuloBox({mediaSelector:".mobx",history:!0,controls:["zoom","play","fullScreen","download","share","close"],loop:1});M.init(),$("#product_main_wrapper .main").click(function(e){e.preventDefault(),$gallery=$("#product_main_wrapper").data("gallery"),$index=$("#product_main_wrapper").data("index"),M.open($gallery,$index),M.play()}),$(".active_flag").click(function(){$item=$(this).closest(".item"),$icon=$(this).find("i"),$type=$(this).closest(".item").data("type"),$id=$(this).closest(".item").data("id"),$state=$(this).closest(".item").data("active"),1==$state?$.ajax({type:"PUT",url:"/"+$type+"/set/"+$id,data:{active:0},success:function(e){$icon.toggleClass("red green"),$item.data("active",0)}}):$.ajax({type:"PUT",url:"/"+$type+"/set/"+$id,data:{active:1},success:function(e){$icon.toggleClass("red green"),$item.data("active",1)}})}),$("#filterbar.horizontal .item").each(function(){var e=$(this);e.popup({popup:"#cat_popup_"+e.data("cat"),on:"hover",hoverable:!0,exclusive:!0,position:"bottom left",duration:0,lastResort:"bottom left"})}),$("#suggested_wrapper_speed i").click(function(){$div=$(this).closest("#suggested_wrapper_speed"),$this=$(this),$speed=parseInt($div.find("value").html()),$this.hasClass("plus")?($newSpeed=$speed+100,y($newSpeed),$div.find("value").html($newSpeed)):($newSpeed=$speed-100,y($newSpeed),$div.find("value").html($newSpeed)),$.ajax({type:"PUT",url:"/admin/setting/",data:{suggested_wrapper_speed:$newSpeed}})}),$(".admin_page_settings").checkbox({onChecked:function(){$item=$(this).data("item"),$target=$(this).data("target"),$view=$(this).data("view"),$changes={},$changes[$item]=1,w($changes,$view,!0,$target)},onUnchecked:function(){$item=$(this).data("item"),$target=$(this).data("target"),$view=$(this).data("view"),$changes={},$changes[$item]=0,w($changes,$view,!0,$target)}}),$("#cover_product_url").search({apiSettings:{url:"/api/products/search?query={query}"},fields:{results:"results",title:"url",image:"",action:"",actionText:"",actionURL:"",url:""},onSelect:function(e,t){$("#admin_add_cover_form").find('input[name="url"]').val(e.full_url)}}).unbind("ajaxStart"),$("#cover_category_url").search({apiSettings:{url:"/api/categories/search?query={query}"},fields:{results:"results",title:"full_url",image:"",action:"",actionText:"",actionURL:"",url:""},onSelect:function(e,t){$("#admin_add_cover_form").find('input[name="url"]').val(e.full_url)}}).unbind("ajaxStart"),$("#cover_other_url input").change(function(){$("#admin_add_cover_form").find('input[name="url"]').val($(this).val())}),$(".catalogue_path_btn").click(function(){$("#catalogue_url_input").css("display","flex"),$(".catalogue_ok_btn").css("display","inline-block"),$(".catalogue_upload_btn").hide(),$(".catalogue_path_btn").hide()}),$(".sticker_path_btn").click(function(){$("#sticker_url_input").css("display","flex"),$(".sticker_ok_btn").css("display","inline-block"),$(".sticker_upload_btn").hide(),$(".sticker_path_btn").hide()}),$(".catalogue_ok_btn").click(function(){$path=$("#catalogue_url_input input").val(),$.ajax({type:"POST",url:"/file",data:{type:"catalogue",path:$path,do_not_upload:!0},success:function(e){location.reload()}})}),$(".sticker_ok_btn").click(function(){$path=$("#sticker_url_input input").val(),$.ajax({type:"POST",url:"/sticker",data:{path:$path,do_not_upload:!0},success:function(e){location.reload()}})}),$("#xml_update_check_btn").click(function(){$url=$("#xml_url_input").val(),$external=$("#xml_url_input").data("external"),$(this).addClass("loading"),$.ajax({type:"PUT",url:"/admin/eshop/postXmlUpdate/",data:{external:$external,url:$url},success:function(e){$("#xml_results").show(),$("#xml_results").find(".new_categories_count value").text(e.changes.new_categories.length),$("#xml_results").find(".new_products_count value").text(e.changes.new_products.length),$("#xml_results").find(".removed_categories_count value").text(e.changes.removed_categories.length),$("#xml_results").find(".removed_products_count value").text(e.changes.removed_products),$("#xml_results").find(".new_categories_list .list").html(e.newCategories),$("#xml_results").find(".new_products_list .list").html(e.newProducts),$("#xml_results").find(".removed_categories_list .list").html(e.removedCategories),$("#xml_results").find(".removed_products_list .list").html(e.removedProducts),$("#xml_update_check_btn").removeClass("loading"),$("#xml_update_confirm_btn").css("display","inline-block")}})}),$("#edit_product_categories_input").dropdown({maxSelections:10,fullTextSearch:!0,onAdd:function(e,t,i){console.log(e)}}),$("#add_banner_radioboxes").find(".checkbox:eq(0)").checkbox({onChecked:function(){$("#cover_category_url").show(),$("#cover_product_url").hide(),
$("#cover_other_url").hide()}}),$("#add_banner_radioboxes").find(".checkbox:eq(1)").checkbox({onChecked:function(){$("#cover_category_url").hide(),$("#cover_product_url").show(),$("#cover_other_url").hide()}}),$("#add_banner_radioboxes").find(".checkbox:eq(2)").checkbox({onChecked:function(){$("#cover_category_url").hide(),$("#cover_product_url").hide(),$("#cover_other_url").show()}}),$(".scroll_to_top").click(function(){$("html, body").animate({scrollTop:0},"fast")}),$("#home_sales_div").on("click",".right.icon",function(){$sales_carousel.flickity("next")}).on("click",".left.icon",function(){$sales_carousel.flickity("previous")}),$("#home_news_div").on("click",".right.icon",function(){$news_carousel.flickity("next")}).on("click",".left.icon",function(){$news_carousel.flickity("previous")}),$("#cartproducts").on("click","i.qty",function(){$productid=$(this).closest(".product").data("productid"),$cartid=$(".cart.content").data("cartid"),$qty=$(this).closest(".actions").find(".cart_qty_input").val(),$(this).hasClass("plus")?$newqty=parseFloat($qty)+1:$newqty=parseFloat($qty)-1,$.ajax({type:"PUT",url:"/cart/"+$cartid+"/"+$productid,data:{qty:$newqty},success:function(){location.reload()}})}),$("#cartproducts").on("blur",".cart_qty_input",function(){$productid=$(this).closest(".product").data("productid"),$cartid=$(".cart.content").data("cartid"),$qty=$(this).val(),$.ajax({type:"PUT",url:"/cart/"+$cartid+"/"+$productid,data:{qty:$qty},success:function(){location.reload()}})}),$("#product_detail_translate_btn").click(function(){$productid=$("#product_main_wrapper").data("id"),$.ajax({type:"PUT",url:"/product/"+$productid+"/translate",success:function(){location.reload()}})}),$(".pages_list .checkbox").checkbox({onChecked:function(){$pageid=$(this).closest(".item").data("id"),$.ajax({type:"PUT",url:"/api/page/"+$pageid,data:{footer:1},success:function(){location.reload()}})},onUnchecked:function(){$pageid=$(this).closest(".item").data("id"),$.ajax({type:"PUT",url:"/api/page/"+$pageid,data:{footer:0},success:function(){location.reload()}})}}),$("#product_main_wrapper .sizes .size.active").click(function(){$code=$(this).data("code"),$("#product_main_wrapper #code scode").text($code),$("#product_main_wrapper .sizes .size").removeClass("selected"),$(this).addClass("selected")}),$("#seo_wrapper .checkbox").checkbox({onChecked:function(){$id=$(this).closest(".item").data("id"),$.ajax({type:"PUT",url:"/api/seo/tool/"+$id,data:{active:1},success:function(){location.reload()}})},onUnchecked:function(){$id=$(this).closest(".item").data("id"),$.ajax({type:"PUT",url:"/api/seo/tool/"+$id,data:{active:0},success:function(){location.reload()}})}}),$("#new_xml_field_btn").click(function(){$html=$("#seo_tool_profile_wrapper").find(".xml_field").html(),$("#seo_tool_profile_wrapper .field_list").append($html)}),$("#product_update_btn").click(function(){$id=$(this).data("id"),$(this).addClass("loading disabled"),$.ajax({type:"POST",url:"/api/product/"+$id+"/xmlupdate",success:function(e){location.reload(),console.log(e)}})})}),$(document).scroll(function(){$(this).scrollTop()>800?$(".scroll_to_top").fadeIn():$(".scroll_to_top").fadeOut()});var sticky,div;$(document).on("scroll",function(){$(document).scrollTop()>100?$("#header.shrinkable").addClass("shrink"):$("#header.shrinkable").removeClass("shrink")}),$(window).on("load",function(){function e(){div=$(".sticky_div"),window.pageYOffset>=sticky?(div.addClass("stickyy"),$("#product_content #filterbar").css("position","fixed")):(div.removeClass("stickyy"),$("#product_content #filterbar").css("position","absolute"))}$(".sticky_div").length&&(sticky=$(".sticky_div").offset().top-20,window.onscroll=function(){e()})}),function(e,t,i,a){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.checkbox=function(a){var n,o=e(this),r=o.selector||"",s=(new Date).getTime(),c=[],d=arguments[0],l="string"==typeof d,u=[].slice.call(arguments,1);return o.each(function(){var o,p,h=e.extend(!0,{},e.fn.checkbox.settings,a),f=h.className,m=h.namespace,v=h.selector,g=h.error,$="."+m,b="module-"+m,_=e(this),y=e(this).children(v.label),w=e(this).children(v.input),x=w[0],k=!1,C=!1,A=_.data(b),S=this;p={initialize:function(){p.verbose("Initializing checkbox",h),p.create.label(),p.bind.events(),p.set.tabbable(),p.hide.input(),p.observeChanges(),p.instantiate(),p.setup()},instantiate:function(){p.verbose("Storing instance of module",p),A=p,_.data(b,p)},destroy:function(){p.verbose("Destroying module"),p.unbind.events(),p.show.input(),_.removeData(b)},fix:{reference:function(){_.is(v.input)&&(p.debug("Behavior called on <input> adjusting invoked element"),_=_.closest(v.checkbox),p.refresh())}},setup:function(){p.set.initialLoad(),p.is.indeterminate()?(p.debug("Initial value is indeterminate"),p.indeterminate()):p.is.checked()?(p.debug("Initial value is checked"),p.check()):(p.debug("Initial value is unchecked"),p.uncheck()),p.remove.initialLoad()},refresh:function(){y=_.children(v.label),w=_.children(v.input),x=w[0]},hide:{input:function(){p.verbose("Modifying <input> z-index to be unselectable"),w.addClass(f.hidden)}},show:{input:function(){p.verbose("Modifying <input> z-index to be selectable"),w.removeClass(f.hidden)}},observeChanges:function(){"MutationObserver"in t&&(o=new MutationObserver(function(e){p.debug("DOM tree modified, updating selector cache"),p.refresh()}),o.observe(S,{childList:!0,subtree:!0}),p.debug("Setting up mutation observer",o))},attachEvents:function(t,i){var a=e(t);i=e.isFunction(p[i])?p[i]:p.toggle,a.length>0?(p.debug("Attaching checkbox events to element",t,i),a.on("click"+$,i)):p.error(g.notFound)},event:{click:function(t){var i=e(t.target);return i.is(v.input)?void p.verbose("Using default check action on initialized checkbox"):i.is(v.link)?void p.debug("Clicking link inside checkbox, skipping toggle"):(p.toggle(),w.focus(),void t.preventDefault())},keydown:function(e){var t=e.which,i={enter:13,space:32,escape:27};t==i.escape?(p.verbose("Escape key pressed blurring field"),w.blur(),C=!0):e.ctrlKey||t!=i.space&&t!=i.enter?C=!1:(p.verbose("Enter/space key pressed, toggling checkbox"),p.toggle(),C=!0)},keyup:function(e){C&&e.preventDefault()}},check:function(){p.should.allowCheck()&&(p.debug("Checking checkbox",w),p.set.checked(),p.should.ignoreCallbacks()||(h.onChecked.call(x),h.onChange.call(x)))},uncheck:function(){p.should.allowUncheck()&&(p.debug("Unchecking checkbox"),p.set.unchecked(),p.should.ignoreCallbacks()||(h.onUnchecked.call(x),h.onChange.call(x)))},indeterminate:function(){if(p.should.allowIndeterminate())return void p.debug("Checkbox is already indeterminate");p.debug("Making checkbox indeterminate"),p.set.indeterminate(),p.should.ignoreCallbacks()||(h.onIndeterminate.call(x),h.onChange.call(x))},determinate:function(){if(p.should.allowDeterminate())return void p.debug("Checkbox is already determinate");p.debug("Making checkbox determinate"),p.set.determinate(),p.should.ignoreCallbacks()||(h.onDeterminate.call(x),h.onChange.call(x))},enable:function(){if(p.is.enabled())return void p.debug("Checkbox is already enabled");p.debug("Enabling checkbox"),p.set.enabled(),h.onEnable.call(x),h.onEnabled.call(x)},disable:function(){if(p.is.disabled())return void p.debug("Checkbox is already disabled");p.debug("Disabling checkbox"),p.set.disabled(),h.onDisable.call(x),h.onDisabled.call(x)},get:{radios:function(){var t=p.get.name();return e('input[name="'+t+'"]').closest(v.checkbox)},otherRadios:function(){return p.get.radios().not(_)},name:function(){return w.attr("name")}},is:{initialLoad:function(){return k},radio:function(){return w.hasClass(f.radio)||"radio"==w.attr("type")},indeterminate:function(){return void 0!==w.prop("indeterminate")&&w.prop("indeterminate")},checked:function(){return void 0!==w.prop("checked")&&w.prop("checked")},disabled:function(){return void 0!==w.prop("disabled")&&w.prop("disabled")},enabled:function(){return!p.is.disabled()},determinate:function(){return!p.is.indeterminate()},unchecked:function(){return!p.is.checked()}},should:{allowCheck:function(){return p.is.determinate()&&p.is.checked()&&!p.should.forceCallbacks()?(p.debug("Should not allow check, checkbox is already checked"),!1):!1!==h.beforeChecked.apply(x)||(p.debug("Should not allow check, beforeChecked cancelled"),!1)},allowUncheck:function(){return p.is.determinate()&&p.is.unchecked()&&!p.should.forceCallbacks()?(p.debug("Should not allow uncheck, checkbox is already unchecked"),!1):!1!==h.beforeUnchecked.apply(x)||(p.debug("Should not allow uncheck, beforeUnchecked cancelled"),!1)},allowIndeterminate:function(){return p.is.indeterminate()&&!p.should.forceCallbacks()?(p.debug("Should not allow indeterminate, checkbox is already indeterminate"),!1):!1!==h.beforeIndeterminate.apply(x)||(p.debug("Should not allow indeterminate, beforeIndeterminate cancelled"),!1)},allowDeterminate:function(){return p.is.determinate()&&!p.should.forceCallbacks()?(p.debug("Should not allow determinate, checkbox is already determinate"),!1):!1!==h.beforeDeterminate.apply(x)||(p.debug("Should not allow determinate, beforeDeterminate cancelled"),!1)},forceCallbacks:function(){return p.is.initialLoad()&&h.fireOnInit},ignoreCallbacks:function(){return k&&!h.fireOnInit}},can:{change:function(){return!(_.hasClass(f.disabled)||_.hasClass(f.readOnly)||w.prop("disabled")||w.prop("readonly"))},uncheck:function(){return"boolean"==typeof h.uncheckable?h.uncheckable:!p.is.radio()}},set:{initialLoad:function(){k=!0},checked:function(){if(p.verbose("Setting class to checked"),_.removeClass(f.indeterminate).addClass(f.checked),p.is.radio()&&p.uncheckOthers(),!p.is.indeterminate()&&p.is.checked())return void p.debug("Input is already checked, skipping input property change");p.verbose("Setting state to checked",x),w.prop("indeterminate",!1).prop("checked",!0),p.trigger.change()},unchecked:function(){if(p.verbose("Removing checked class"),_.removeClass(f.indeterminate).removeClass(f.checked),!p.is.indeterminate()&&p.is.unchecked())return void p.debug("Input is already unchecked");p.debug("Setting state to unchecked"),w.prop("indeterminate",!1).prop("checked",!1),p.trigger.change()},indeterminate:function(){if(p.verbose("Setting class to indeterminate"),_.addClass(f.indeterminate),p.is.indeterminate())return void p.debug("Input is already indeterminate, skipping input property change");p.debug("Setting state to indeterminate"),w.prop("indeterminate",!0),p.trigger.change()},determinate:function(){if(p.verbose("Removing indeterminate class"),_.removeClass(f.indeterminate),p.is.determinate())return void p.debug("Input is already determinate, skipping input property change");p.debug("Setting state to determinate"),w.prop("indeterminate",!1)},disabled:function(){if(p.verbose("Setting class to disabled"),_.addClass(f.disabled),p.is.disabled())return void p.debug("Input is already disabled, skipping input property change");p.debug("Setting state to disabled"),w.prop("disabled","disabled"),p.trigger.change()},enabled:function(){if(p.verbose("Removing disabled class"),_.removeClass(f.disabled),p.is.enabled())return void p.debug("Input is already enabled, skipping input property change");p.debug("Setting state to enabled"),w.prop("disabled",!1),p.trigger.change()},tabbable:function(){p.verbose("Adding tabindex to checkbox"),void 0===w.attr("tabindex")&&w.attr("tabindex",0)}},remove:{initialLoad:function(){k=!1}},trigger:{change:function(){var e=i.createEvent("HTMLEvents"),t=w[0];t&&(p.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},create:{label:function(){w.prevAll(v.label).length>0?(w.prev(v.label).detach().insertAfter(w),p.debug("Moving existing label",y)):p.has.label()||(y=e("<label>").insertAfter(w),p.debug("Creating label",y))}},has:{label:function(){return y.length>0}},bind:{events:function(){p.verbose("Attaching checkbox events"),_.on("click"+$,p.event.click).on("keydown"+$,v.input,p.event.keydown).on("keyup"+$,v.input,p.event.keyup)}},unbind:{events:function(){p.debug("Removing events"),_.off($)}},uncheckOthers:function(){var e=p.get.otherRadios();p.debug("Unchecking other radios",e),e.removeClass(f.checked)},toggle:function(){if(!p.can.change())return void(p.is.radio()||p.debug("Checkbox is read-only or disabled, ignoring toggle"));p.is.indeterminate()||p.is.unchecked()?(p.debug("Currently unchecked"),p.check()):p.is.checked()&&p.can.uncheck()&&(p.debug("Currently checked"),p.uncheck())},setting:function(t,i){if(p.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,h,t);else{if(void 0===i)return h[t];e.isPlainObject(h[t])?e.extend(!0,h[t],i):h[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,p,t);else{if(void 0===i)return p[t];p[t]=i}},debug:function(){!h.silent&&h.debug&&(h.performance?p.performance.log(arguments):(p.debug=Function.prototype.bind.call(console.info,console,h.name+":"),p.debug.apply(console,arguments)))},verbose:function(){!h.silent&&h.verbose&&h.debug&&(h.performance?p.performance.log(arguments):(p.verbose=Function.prototype.bind.call(console.info,console,h.name+":"),p.verbose.apply(console,arguments)))},error:function(){h.silent||(p.error=Function.prototype.bind.call(console.error,console,h.name+":"),p.error.apply(console,arguments))},performance:{log:function(e){var t,i,a;h.performance&&(t=(new Date).getTime(),a=s||t,i=t-a,s=t,c.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:S,"Execution Time":i})),clearTimeout(p.performance.timer),p.performance.timer=setTimeout(p.performance.display,500)},display:function(){var t=h.name+":",i=0;s=!1,clearTimeout(p.performance.timer),e.each(c,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",r&&(t+=" '"+r+"'"),(void 0!==console.group||void 0!==console.table)&&c.length>0&&(console.groupCollapsed(t),console.table?console.table(c):e.each(c,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),c=[]}},invoke:function(t,i,a){var o,r,s,c=A;return i=i||u,a=S||a,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,a){var n=i!=o?a+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[n])&&i!=o)c=c[n];else{if(void 0!==c[n])return r=c[n],!1;if(!e.isPlainObject(c[a])||i==o)return void 0!==c[a]?(r=c[a],!1):(p.error(g.method,t),!1);c=c[a]}})),e.isFunction(r)?s=r.apply(a,i):void 0!==r&&(s=r),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),r}},l?(void 0===A&&p.initialize(),p.invoke(d)):(void 0!==A&&A.invoke("destroy"),p.initialize())}),void 0!==n?n:this},e.fn.checkbox.settings={name:"Checkbox",namespace:"checkbox",silent:!1,debug:!1,verbose:!0,performance:!0,uncheckable:"auto",fireOnInit:!1,onChange:function(){},beforeChecked:function(){},beforeUnchecked:function(){},beforeDeterminate:function(){},beforeIndeterminate:function(){},onChecked:function(){},onUnchecked:function(){},onDeterminate:function(){},onIndeterminate:function(){},onEnable:function(){},onDisable:function(){},onEnabled:function(){},onDisabled:function(){},className:{checked:"checked",indeterminate:"indeterminate",disabled:"disabled",hidden:"hidden",radio:"radio",readOnly:"read-only"},error:{method:"The method you called is not defined"},selector:{checkbox:".ui.checkbox",label:"label, .box",input:'input[type="checkbox"], input[type="radio"]',link:"a[href]"}}}(jQuery,window,document),function(e,t,i,a){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.popup=function(a){var n,o=e(this),r=e(i),s=e(t),c=e("body"),d=o.selector||"",l=(new Date).getTime(),u=[],p=arguments[0],h="string"==typeof p,f=[].slice.call(arguments,1);return o.each(function(){var o,m,v,g,$,b,_=e.isPlainObject(a)?e.extend(!0,{},e.fn.popup.settings,a):e.extend({},e.fn.popup.settings),y=_.selector,w=_.className,x=_.error,k=_.metadata,C=_.namespace,A="."+_.namespace,S="module-"+C,T=e(this),j=e(_.context),E=e(_.scrollContext),D=e(_.boundary),I=_.target?e(_.target):T,P=0,O=!1,F=!1,L=this,U=T.data(S);b={initialize:function(){b.debug("Initializing",T),b.createID(),b.bind.events(),!b.exists()&&_.preserve&&b.create(),_.observeChanges&&b.observeChanges(),b.instantiate()},instantiate:function(){b.verbose("Storing instance",b),U=b,T.data(S,U)},observeChanges:function(){"MutationObserver"in t&&(v=new MutationObserver(b.event.documentChanged),v.observe(i,{childList:!0,subtree:!0}),b.debug("Setting up mutation observer",v))},refresh:function(){_.popup?o=e(_.popup).eq(0):_.inline&&(o=I.nextAll(y.popup).eq(0),_.popup=o),_.popup?(o.addClass(w.loading),m=b.get.offsetParent(),o.removeClass(w.loading),_.movePopup&&b.has.popup()&&b.get.offsetParent(o)[0]!==m[0]&&(b.debug("Moving popup to the same offset parent as target"),o.detach().appendTo(m))):m=_.inline?b.get.offsetParent(I):b.has.popup()?b.get.offsetParent(o):c,m.is("html")&&m[0]!==c[0]&&(b.debug("Setting page as offset parent"),m=c),b.get.variation()&&b.set.variation()},reposition:function(){b.refresh(),b.set.position()},destroy:function(){b.debug("Destroying previous module"),v&&v.disconnect(),o&&!_.preserve&&b.removePopup(),clearTimeout(b.hideTimer),clearTimeout(b.showTimer),b.unbind.close(),b.unbind.events(),T.removeData(S)},event:{start:function(t){var i=e.isPlainObject(_.delay)?_.delay.show:_.delay;clearTimeout(b.hideTimer),F||(b.showTimer=setTimeout(b.show,i))},end:function(){var t=e.isPlainObject(_.delay)?_.delay.hide:_.delay;clearTimeout(b.showTimer),b.hideTimer=setTimeout(b.hide,t)},touchstart:function(e){F=!0,b.show()},resize:function(){b.is.visible()&&b.set.position()},documentChanged:function(t){[].forEach.call(t,function(t){t.removedNodes&&[].forEach.call(t.removedNodes,function(t){(t==L||e(t).find(L).length>0)&&(b.debug("Element removed from DOM, tearing down events"),b.destroy())})})},hideGracefully:function(t){var a=e(t.target),n=e.contains(i.documentElement,t.target),o=a.closest(y.popup).length>0;t&&!o&&n?(b.debug("Click occurred outside popup hiding popup"),b.hide()):b.debug("Click was inside popup, keeping popup open")}},create:function(){var t=b.get.html(),i=b.get.title(),a=b.get.content();t||a||i?(b.debug("Creating pop-up html"),t||(t=_.templates.popup({title:i,content:a})),o=e("<div/>").addClass(w.popup).data(k.activator,T).html(t),_.inline?(b.verbose("Inserting popup element inline",o),o.insertAfter(T)):(b.verbose("Appending popup element to body",o),o.appendTo(j)),b.refresh(),b.set.variation(),_.hoverable&&b.bind.popup(),_.onCreate.call(o,L)):0!==I.next(y.popup).length?(b.verbose("Pre-existing popup found"),_.inline=!0,_.popup=I.next(y.popup).data(k.activator,T),b.refresh(),_.hoverable&&b.bind.popup()):_.popup?(e(_.popup).data(k.activator,T),b.verbose("Used popup specified in settings"),b.refresh(),_.hoverable&&b.bind.popup()):b.debug("No content specified skipping display",L)},createID:function(){$=(Math.random().toString(16)+"000000000").substr(2,8),g="."+$,b.verbose("Creating unique id for element",$)},toggle:function(){b.debug("Toggling pop-up"),b.is.hidden()?(b.debug("Popup is hidden, showing pop-up"),b.unbind.close(),b.show()):(b.debug("Popup is visible, hiding pop-up"),b.hide())},show:function(e){if(e=e||function(){},b.debug("Showing pop-up",_.transition),b.is.hidden()&&(!b.is.active()||!b.is.dropdown())){if(b.exists()||b.create(),!1===_.onShow.call(o,L))return void b.debug("onShow callback returned false, cancelling popup animation");_.preserve||_.popup||b.refresh(),o&&b.set.position()&&(b.save.conditions(),_.exclusive&&b.hideAll(),b.animate.show(e))}},hide:function(e){if(e=e||function(){},b.is.visible()||b.is.animating()){if(!1===_.onHide.call(o,L))return void b.debug("onHide callback returned false, cancelling popup animation");b.remove.visible(),b.unbind.close(),b.restore.conditions(),b.animate.hide(e)}},hideAll:function(){e(y.popup).filter("."+w.popupVisible).each(function(){e(this).data(k.activator).popup("hide")})},exists:function(){return!!o&&(_.inline||_.popup?b.has.popup():o.closest(j).length>=1)},removePopup:function(){b.has.popup()&&!_.popup&&(b.debug("Removing popup",o),o.remove(),o=void 0,_.onRemove.call(o,L))},save:{conditions:function(){b.cache={title:T.attr("title")},b.cache.title&&T.removeAttr("title"),b.verbose("Saving original attributes",b.cache.title)}},restore:{conditions:function(){return b.cache&&b.cache.title&&(T.attr("title",b.cache.title),b.verbose("Restoring original attributes",b.cache.title)),!0}},supports:{svg:function(){return"undefined"==typeof SVGGraphicsElement}},animate:{show:function(t){t=e.isFunction(t)?t:function(){},_.transition&&void 0!==e.fn.transition&&T.transition("is supported")?(b.set.visible(),o.transition({animation:_.transition+" in",queue:!1,debug:_.debug,verbose:_.verbose,duration:_.duration,onComplete:function(){b.bind.close(),t.call(o,L),_.onVisible.call(o,L)}})):b.error(x.noTransition)},hide:function(t){if(t=e.isFunction(t)?t:function(){},b.debug("Hiding pop-up"),!1===_.onHide.call(o,L))return void b.debug("onHide callback returned false, cancelling popup animation");_.transition&&void 0!==e.fn.transition&&T.transition("is supported")?o.transition({animation:_.transition+" out",queue:!1,duration:_.duration,debug:_.debug,verbose:_.verbose,onComplete:function(){b.reset(),t.call(o,L),_.onHidden.call(o,L)}}):b.error(x.noTransition)}},change:{content:function(e){o.html(e)}},get:{html:function(){return T.removeData(k.html),T.data(k.html)||_.html},title:function(){return T.removeData(k.title),T.data(k.title)||_.title},content:function(){return T.removeData(k.content),T.data(k.content)||_.content||T.attr("title")},variation:function(){return T.removeData(k.variation),T.data(k.variation)||_.variation},popup:function(){return o},popupOffset:function(){return o.offset()},calculations:function(){var e,i=b.get.offsetParent(o),a=I[0],n=D[0]==t,r=_.inline||_.popup&&_.movePopup?I.position():I.offset(),c=n?{top:0,left:0}:D.offset(),d={},l=n?{top:s.scrollTop(),left:s.scrollLeft()}:{top:0,left:0};if(d={target:{element:I[0],width:I.outerWidth(),height:I.outerHeight(),top:r.top,left:r.left,margin:{}},popup:{width:o.outerWidth(),height:o.outerHeight()},parent:{width:m.outerWidth(),height:m.outerHeight()},screen:{top:c.top,left:c.left,scroll:{top:l.top,left:l.left},width:D.width(),height:D.height()}},i.get(0)!==m.get(0)){var u=i.offset();d.target.top-=u.top,d.target.left-=u.left,d.parent.width=i.outerWidth(),d.parent.height=i.outerHeight()}return _.setFluidWidth&&b.is.fluid()&&(d.container={width:o.parent().outerWidth()},d.popup.width=d.container.width),d.target.margin.top=_.inline?parseInt(t.getComputedStyle(a).getPropertyValue("margin-top"),10):0,d.target.margin.left=_.inline?b.is.rtl()?parseInt(t.getComputedStyle(a).getPropertyValue("margin-right"),10):parseInt(t.getComputedStyle(a).getPropertyValue("margin-left"),10):0,e=d.screen,d.boundary={top:e.top+e.scroll.top,bottom:e.top+e.scroll.top+e.height,left:e.left+e.scroll.left,right:e.left+e.scroll.left+e.width},d},id:function(){return $},startEvent:function(){return"hover"==_.on?"mouseenter":"focus"==_.on&&"focus"},scrollEvent:function(){return"scroll"},endEvent:function(){return"hover"==_.on?"mouseleave":"focus"==_.on&&"blur"},distanceFromBoundary:function(e,t){var i,a,n={};return t=t||b.get.calculations(),i=t.popup,a=t.boundary,e&&(n={top:e.top-a.top,left:e.left-a.left,right:a.right-(e.left+i.width),bottom:a.bottom-(e.top+i.height)},b.verbose("Distance from boundaries determined",e,n)),n},offsetParent:function(t){var i=void 0!==t?t[0]:I[0],a=i.parentNode,n=e(a);if(a)for(var o="none"===n.css("transform"),r="static"===n.css("position"),s=n.is("body");a&&!s&&r&&o;)a=a.parentNode,n=e(a),o="none"===n.css("transform"),r="static"===n.css("position"),s=n.is("body");return n&&n.length>0?n:e()},positions:function(){return{"top left":!1,"top center":!1,"top right":!1,"bottom left":!1,"bottom center":!1,"bottom right":!1,"left center":!1,"right center":!1}},nextPosition:function(e){var t=e.split(" "),i=t[0],a=t[1],n={top:"bottom",bottom:"top",left:"right",right:"left"},o={left:"center",center:"right",right:"left"},r={"top left":"top center","top center":"top right","top right":"right center","right center":"bottom right","bottom right":"bottom center","bottom center":"bottom left","bottom left":"left center","left center":"top left"},s="top"==i||"bottom"==i,c=!1,d=!1,l=!1;return O||(b.verbose("All available positions available"),O=b.get.positions()),b.debug("Recording last position tried",e),O[e]=!0,"opposite"===_.prefer&&(l=[n[i],a],l=l.join(" "),c=!0===O[l],b.debug("Trying opposite strategy",l)),"adjacent"===_.prefer&&s&&(l=[i,o[a]],l=l.join(" "),d=!0===O[l],b.debug("Trying adjacent strategy",l)),(d||c)&&(b.debug("Using backup position",l),l=r[e]),l}},set:{position:function(e,t){if(0===I.length||0===o.length)return void b.error(x.notFound);var i,a,n,r,s,c,d,l;if(t=t||b.get.calculations(),e=e||T.data(k.position)||_.position,i=T.data(k.offset)||_.offset,a=_.distanceAway,n=t.target,r=t.popup,s=t.parent,b.should.centerArrow(t)&&(b.verbose("Adjusting offset to center arrow on small target element"),"top left"!=e&&"bottom left"!=e||(i+=n.width/2,i-=_.arrowPixelsFromEdge),"top right"!=e&&"bottom right"!=e||(i-=n.width/2,i+=_.arrowPixelsFromEdge)),0===n.width&&0===n.height&&!b.is.svg(n.element))return b.debug("Popup target is hidden, no action taken"),!1;switch(_.inline&&(b.debug("Adding margin to calculation",n.margin),"left center"==e||"right center"==e?(i+=n.margin.top,a+=-n.margin.left):"top left"==e||"top center"==e||"top right"==e?(i+=n.margin.left,a-=n.margin.top):(i+=n.margin.left,a+=n.margin.top)),b.debug("Determining popup position from calculations",e,t),b.is.rtl()&&(e=e.replace(/left|right/g,function(e){return"left"==e?"right":"left"}),b.debug("RTL: Popup position updated",e)),P==_.maxSearchDepth&&"string"==typeof _.lastResort&&(e=_.lastResort),e){case"top left":c={top:"auto",bottom:s.height-n.top+a,left:n.left+i,right:"auto"};break;case"top center":c={bottom:s.height-n.top+a,left:n.left+n.width/2-r.width/2+i,top:"auto",right:"auto"};break;case"top right":c={bottom:s.height-n.top+a,right:s.width-n.left-n.width-i,top:"auto",left:"auto"};break;case"left center":c={top:n.top+n.height/2-r.height/2+i,right:s.width-n.left+a,left:"auto",bottom:"auto"};break;case"right center":c={top:n.top+n.height/2-r.height/2+i,left:n.left+n.width+a,bottom:"auto",right:"auto"};break;case"bottom left":c={top:n.top+n.height+a,left:n.left+i,bottom:"auto",right:"auto"};break;case"bottom center":c={top:n.top+n.height+a,left:n.left+n.width/2-r.width/2+i,bottom:"auto",right:"auto"};break;case"bottom right":c={top:n.top+n.height+a,right:s.width-n.left-n.width-i,left:"auto",bottom:"auto"}}if(void 0===c&&b.error(x.invalidPosition,e),b.debug("Calculated popup positioning values",c),o.css(c).removeClass(w.position).addClass(e).addClass(w.loading),d=b.get.popupOffset(),l=b.get.distanceFromBoundary(d,t),b.is.offstage(l,e)){if(b.debug("Position is outside viewport",e),P<_.maxSearchDepth)return P++,e=b.get.nextPosition(e),b.debug("Trying new position",e),!!o&&b.set.position(e,t);if(!_.lastResort)return b.debug("Popup could not find a position to display",o),b.error(x.cannotPlace,L),b.remove.attempts(),b.remove.loading(),b.reset(),_.onUnplaceable.call(o,L),!1;b.debug("No position found, showing with last position")}return b.debug("Position is on stage",e),b.remove.attempts(),b.remove.loading(),_.setFluidWidth&&b.is.fluid()&&b.set.fluidWidth(t),!0},fluidWidth:function(e){e=e||b.get.calculations(),b.debug("Automatically setting element width to parent width",e.parent.width),o.css("width",e.container.width)},variation:function(e){(e=e||b.get.variation())&&b.has.popup()&&(b.verbose("Adding variation to popup",e),o.addClass(e))},visible:function(){T.addClass(w.visible)}},remove:{loading:function(){o.removeClass(w.loading)},variation:function(e){(e=e||b.get.variation())&&(b.verbose("Removing variation",e),o.removeClass(e))},visible:function(){T.removeClass(w.visible)},attempts:function(){b.verbose("Resetting all searched positions"),P=0,O=!1}},bind:{events:function(){b.debug("Binding popup events to module"),"click"==_.on&&T.on("click"+A,b.toggle),"hover"==_.on&&T.on("touchstart"+A,b.event.touchstart),b.get.startEvent()&&T.on(b.get.startEvent()+A,b.event.start).on(b.get.endEvent()+A,b.event.end),_.target&&b.debug("Target set to element",I),s.on("resize"+g,b.event.resize)},popup:function(){b.verbose("Allowing hover events on popup to prevent closing"),o&&b.has.popup()&&o.on("mouseenter"+A,b.event.start).on("mouseleave"+A,b.event.end)},close:function(){(!0===_.hideOnScroll||"auto"==_.hideOnScroll&&"click"!=_.on)&&b.bind.closeOnScroll(),b.is.closable()?b.bind.clickaway():"hover"==_.on&&F&&b.bind.touchClose()},closeOnScroll:function(){b.verbose("Binding scroll close event to document"),E.one(b.get.scrollEvent()+g,b.event.hideGracefully)},touchClose:function(){b.verbose("Binding popup touchclose event to document"),r.on("touchstart"+g,function(e){b.verbose("Touched away from popup"),b.event.hideGracefully.call(L,e)})},clickaway:function(){b.verbose("Binding popup close event to document"),r.on("click"+g,function(e){b.verbose("Clicked away from popup"),b.event.hideGracefully.call(L,e)})}},unbind:{events:function(){s.off(g),T.off(A)},close:function(){r.off(g),E.off(g)}},has:{popup:function(){return o&&o.length>0}},should:{centerArrow:function(e){return!b.is.basic()&&e.target.width<=2*_.arrowPixelsFromEdge}},is:{closable:function(){return"auto"==_.closable?"hover"!=_.on:_.closable},offstage:function(t,i){var a=[];return e.each(t,function(e,t){t<-_.jitter&&(b.debug("Position exceeds allowable distance from edge",e,t,i),a.push(e))}),a.length>0},svg:function(e){return b.supports.svg()&&e instanceof SVGGraphicsElement},basic:function(){return T.hasClass(w.basic)},active:function(){return T.hasClass(w.active)},animating:function(){return void 0!==o&&o.hasClass(w.animating)},fluid:function(){return void 0!==o&&o.hasClass(w.fluid)},visible:function(){return void 0!==o&&o.hasClass(w.popupVisible)},dropdown:function(){return T.hasClass(w.dropdown)},hidden:function(){return!b.is.visible()},rtl:function(){return"rtl"==T.css("direction")}},reset:function(){b.remove.visible(),_.preserve?void 0!==e.fn.transition&&o.transition("remove transition"):b.removePopup()},setting:function(t,i){if(e.isPlainObject(t))e.extend(!0,_,t);else{if(void 0===i)return _[t];_[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,b,t);else{if(void 0===i)return b[t];b[t]=i}},debug:function(){!_.silent&&_.debug&&(_.performance?b.performance.log(arguments):(b.debug=Function.prototype.bind.call(console.info,console,_.name+":"),b.debug.apply(console,arguments)))},verbose:function(){!_.silent&&_.verbose&&_.debug&&(_.performance?b.performance.log(arguments):(b.verbose=Function.prototype.bind.call(console.info,console,_.name+":"),b.verbose.apply(console,arguments)))},error:function(){_.silent||(b.error=Function.prototype.bind.call(console.error,console,_.name+":"),b.error.apply(console,arguments))},performance:{log:function(e){var t,i,a;_.performance&&(t=(new Date).getTime(),a=l||t,i=t-a,l=t,u.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:L,"Execution Time":i})),clearTimeout(b.performance.timer),b.performance.timer=setTimeout(b.performance.display,500)},display:function(){var t=_.name+":",i=0;l=!1,clearTimeout(b.performance.timer),e.each(u,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",d&&(t+=" '"+d+"'"),(void 0!==console.group||void 0!==console.table)&&u.length>0&&(console.groupCollapsed(t),console.table?console.table(u):e.each(u,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),u=[]}},invoke:function(t,i,a){var o,r,s,c=U;return i=i||f,a=L||a,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,a){var n=i!=o?a+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[n])&&i!=o)c=c[n];else{if(void 0!==c[n])return r=c[n],!1
;if(!e.isPlainObject(c[a])||i==o)return void 0!==c[a]&&(r=c[a],!1);c=c[a]}})),e.isFunction(r)?s=r.apply(a,i):void 0!==r&&(s=r),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),r}},h?(void 0===U&&b.initialize(),b.invoke(p)):(void 0!==U&&U.invoke("destroy"),b.initialize())}),void 0!==n?n:this},e.fn.popup.settings={name:"Popup",silent:!1,debug:!1,verbose:!1,performance:!0,namespace:"popup",observeChanges:!0,onCreate:function(){},onRemove:function(){},onShow:function(){},onVisible:function(){},onHide:function(){},onUnplaceable:function(){},onHidden:function(){},on:"hover",boundary:t,addTouchEvents:!0,position:"top left",variation:"",movePopup:!0,target:!1,popup:!1,inline:!1,preserve:!1,hoverable:!1,content:!1,html:!1,title:!1,closable:!0,hideOnScroll:"auto",exclusive:!1,context:"body",scrollContext:t,prefer:"opposite",lastResort:!1,arrowPixelsFromEdge:20,delay:{show:50,hide:70},setFluidWidth:!0,duration:200,transition:"scale",distanceAway:0,jitter:2,offset:0,maxSearchDepth:15,error:{invalidPosition:"The position you specified is not a valid position",cannotPlace:"Popup does not fit within the boundaries of the viewport",method:"The method you called is not defined.",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>",notFound:"The target or popup you specified does not exist on the page"},metadata:{activator:"activator",content:"content",html:"html",offset:"offset",position:"position",title:"title",variation:"variation"},className:{active:"active",basic:"basic",animating:"animating",dropdown:"dropdown",fluid:"fluid",loading:"loading",popup:"ui popup",position:"top left center bottom right",visible:"visible",popupVisible:"visible"},selector:{popup:".ui.popup"},templates:{escape:function(e){var t=/[&<>"'`]/g,i=/[&<>"'`]/,a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},n=function(e){return a[e]};return i.test(e)?e.replace(t,n):e},popup:function(t){var i="",a=e.fn.popup.settings.templates.escape;return void 0!==(void 0===t?"undefined":_typeof(t))&&(void 0!==_typeof(t.title)&&t.title&&(t.title=a(t.title),i+='<div class="header">'+t.title+"</div>"),void 0!==_typeof(t.content)&&t.content&&(t.content=a(t.content),i+='<div class="content">'+t.content+"</div>")),i}}}}(jQuery,window,document),function(e,t,i,a){"use strict";t=void 0!==t&&t.Math==Math?t:"undefined"!=typeof self&&self.Math==Math?self:Function("return this")(),e.fn.dropdown=function(a){var n,o=e(this),r=e(i),s=o.selector||"",c="ontouchstart"in i.documentElement,d=(new Date).getTime(),l=[],u=arguments[0],p="string"==typeof u,h=[].slice.call(arguments,1);return o.each(function(f){var m,v,g,$,b,_,y,w,x=e.isPlainObject(a)?e.extend(!0,{},e.fn.dropdown.settings,a):e.extend({},e.fn.dropdown.settings),k=x.className,C=x.message,A=x.fields,S=x.keys,T=x.metadata,j=x.namespace,E=x.regExp,D=x.selector,I=x.error,P=x.templates,O="."+j,F="module-"+j,L=e(this),U=e(x.context),z=L.find(D.text),R=L.find(D.search),q=L.find(D.sizer),N=L.find(D.input),B=L.find(D.icon),M=L.prev().find(D.text).length>0?L.prev().find(D.text):L.prev(),V=L.children(D.menu),H=V.find(D.item),W=!1,Y=!1,G=!1,Q=this,Z=L.data(F);w={initialize:function(){w.debug("Initializing dropdown",x),w.is.alreadySetup()?w.setup.reference():(w.setup.layout(),x.values&&w.change.values(x.values),w.refreshData(),w.save.defaults(),w.restore.selected(),w.create.id(),w.bind.events(),w.observeChanges(),w.instantiate())},instantiate:function(){w.verbose("Storing instance of dropdown",w),Z=w,L.data(F,w)},destroy:function(){w.verbose("Destroying previous dropdown",L),w.remove.tabbable(),L.off(O).removeData(F),V.off(O),r.off($),w.disconnect.menuObserver(),w.disconnect.selectObserver()},observeChanges:function(){"MutationObserver"in t&&(_=new MutationObserver(w.event.select.mutation),y=new MutationObserver(w.event.menu.mutation),w.debug("Setting up mutation observer",_,y),w.observe.select(),w.observe.menu())},disconnect:{menuObserver:function(){y&&y.disconnect()},selectObserver:function(){_&&_.disconnect()}},observe:{select:function(){w.has.input()&&_.observe(L[0],{childList:!0,subtree:!0})},menu:function(){w.has.menu()&&y.observe(V[0],{childList:!0,subtree:!0})}},create:{id:function(){b=(Math.random().toString(16)+"000000000").substr(2,8),$="."+b,w.verbose("Creating unique id for element",b)},userChoice:function(t){var i,a,n;return!!(t=t||w.get.userValues())&&(t=e.isArray(t)?t:[t],e.each(t,function(t,o){!1===w.get.item(o)&&(n=x.templates.addition(w.add.variables(C.addResult,o)),a=e("<div />").html(n).attr("data-"+T.value,o).attr("data-"+T.text,o).addClass(k.addition).addClass(k.item),x.hideAdditions&&a.addClass(k.hidden),i=void 0===i?a:i.add(a),w.verbose("Creating user choices for value",o,a))}),i)},userLabels:function(t){var i=w.get.userValues();i&&(w.debug("Adding user labels",i),e.each(i,function(e,t){w.verbose("Adding custom user value"),w.add.label(t,t)}))},menu:function(){V=e("<div />").addClass(k.menu).appendTo(L)},sizer:function(){q=e("<span />").addClass(k.sizer).insertAfter(R)}},search:function(e){e=void 0!==e?e:w.get.query(),w.verbose("Searching for query",e),w.has.minCharacters(e)?w.filter(e):w.hide()},select:{firstUnfiltered:function(){w.verbose("Selecting first non-filtered element"),w.remove.selectedItem(),H.not(D.unselectable).not(D.addition+D.hidden).eq(0).addClass(k.selected)},nextAvailable:function(e){e=e.eq(0);var t=e.nextAll(D.item).not(D.unselectable).eq(0),i=e.prevAll(D.item).not(D.unselectable).eq(0);t.length>0?(w.verbose("Moving selection to",t),t.addClass(k.selected)):(w.verbose("Moving selection to",i),i.addClass(k.selected))}},setup:{api:function(){var e={debug:x.debug,urlData:{value:w.get.value(),query:w.get.query()},on:!1};w.verbose("First request, initializing API"),L.api(e)},layout:function(){L.is("select")&&(w.setup.select(),w.setup.returnedObject()),w.has.menu()||w.create.menu(),w.is.search()&&!w.has.search()&&(w.verbose("Adding search input"),R=e("<input />").addClass(k.search).prop("autocomplete","off").insertBefore(z)),w.is.multiple()&&w.is.searchSelection()&&!w.has.sizer()&&w.create.sizer(),x.allowTab&&w.set.tabbable()},select:function(){var t=w.get.selectValues();w.debug("Dropdown initialized on a select",t),L.is("select")&&(N=L),N.parent(D.dropdown).length>0?(w.debug("UI dropdown already exists. Creating dropdown menu only"),L=N.closest(D.dropdown),w.has.menu()||w.create.menu(),V=L.children(D.menu),w.setup.menu(t)):(w.debug("Creating entire dropdown from select"),L=e("<div />").attr("class",N.attr("class")).addClass(k.selection).addClass(k.dropdown).html(P.dropdown(t)).insertBefore(N),N.hasClass(k.multiple)&&!1===N.prop("multiple")&&(w.error(I.missingMultiple),N.prop("multiple",!0)),N.is("[multiple]")&&w.set.multiple(),N.prop("disabled")&&(w.debug("Disabling dropdown"),L.addClass(k.disabled)),N.removeAttr("class").detach().prependTo(L)),w.refresh()},menu:function(e){V.html(P.menu(e,A)),H=V.find(D.item)},reference:function(){w.debug("Dropdown behavior was called on select, replacing with closest dropdown"),L=L.parent(D.dropdown),Z=L.data(F),Q=L.get(0),w.refresh(),w.setup.returnedObject()},returnedObject:function(){var e=o.slice(0,f),t=o.slice(f+1);o=e.add(L).add(t)}},refresh:function(){w.refreshSelectors(),w.refreshData()},refreshItems:function(){H=V.find(D.item)},refreshSelectors:function(){w.verbose("Refreshing selector cache"),z=L.find(D.text),R=L.find(D.search),N=L.find(D.input),B=L.find(D.icon),M=L.prev().find(D.text).length>0?L.prev().find(D.text):L.prev(),V=L.children(D.menu),H=V.find(D.item)},refreshData:function(){w.verbose("Refreshing cached metadata"),H.removeData(T.text).removeData(T.value)},clearData:function(){w.verbose("Clearing metadata"),H.removeData(T.text).removeData(T.value),L.removeData(T.defaultText).removeData(T.defaultValue).removeData(T.placeholderText)},toggle:function(){w.verbose("Toggling menu visibility"),w.is.active()?w.hide():w.show()},show:function(t){if(t=e.isFunction(t)?t:function(){},!w.can.show()&&w.is.remote()&&(w.debug("No API results retrieved, searching before show"),w.queryRemote(w.get.query(),w.show)),w.can.show()&&!w.is.active()){if(w.debug("Showing dropdown"),!w.has.message()||w.has.maxSelections()||w.has.allResultsFiltered()||w.remove.message(),w.is.allFiltered())return!0;!1!==x.onShow.call(Q)&&w.animate.show(function(){w.can.click()&&w.bind.intent(),w.has.menuSearch()&&w.focusSearch(),w.set.visible(),t.call(Q)})}},hide:function(t){t=e.isFunction(t)?t:function(){},w.is.active()&&!w.is.animatingOutward()&&(w.debug("Hiding dropdown"),!1!==x.onHide.call(Q)&&w.animate.hide(function(){w.remove.visible(),t.call(Q)}))},hideOthers:function(){w.verbose("Finding other dropdowns to hide"),o.not(L).has(D.menu+"."+k.visible).dropdown("hide")},hideMenu:function(){w.verbose("Hiding menu  instantaneously"),w.remove.active(),w.remove.visible(),V.transition("hide")},hideSubMenus:function(){var e=V.children(D.item).find(D.menu);w.verbose("Hiding sub menus",e),e.transition("hide")},bind:{events:function(){c&&w.bind.touchEvents(),w.bind.keyboardEvents(),w.bind.inputEvents(),w.bind.mouseEvents()},touchEvents:function(){w.debug("Touch device detected binding additional touch events"),w.is.searchSelection()||w.is.single()&&L.on("touchstart"+O,w.event.test.toggle),V.on("touchstart"+O,D.item,w.event.item.mouseenter)},keyboardEvents:function(){w.verbose("Binding keyboard events"),L.on("keydown"+O,w.event.keydown),w.has.search()&&L.on(w.get.inputEvent()+O,D.search,w.event.input),w.is.multiple()&&r.on("keydown"+$,w.event.document.keydown)},inputEvents:function(){w.verbose("Binding input change events"),L.on("change"+O,D.input,w.event.change)},mouseEvents:function(){w.verbose("Binding mouse events"),w.is.multiple()&&L.on("click"+O,D.label,w.event.label.click).on("click"+O,D.remove,w.event.remove.click),w.is.searchSelection()?(L.on("mousedown"+O,w.event.mousedown).on("mouseup"+O,w.event.mouseup).on("mousedown"+O,D.menu,w.event.menu.mousedown).on("mouseup"+O,D.menu,w.event.menu.mouseup).on("click"+O,D.icon,w.event.icon.click).on("focus"+O,D.search,w.event.search.focus).on("click"+O,D.search,w.event.search.focus).on("blur"+O,D.search,w.event.search.blur).on("click"+O,D.text,w.event.text.focus),w.is.multiple()&&L.on("click"+O,w.event.click)):("click"==x.on?L.on("click"+O,w.event.test.toggle):"hover"==x.on?L.on("mouseenter"+O,w.delay.show).on("mouseleave"+O,w.delay.hide):L.on(x.on+O,w.toggle),L.on("click"+O,D.icon,w.event.icon.click).on("mousedown"+O,w.event.mousedown).on("mouseup"+O,w.event.mouseup).on("focus"+O,w.event.focus),w.has.menuSearch()?L.on("blur"+O,D.search,w.event.search.blur):L.on("blur"+O,w.event.blur)),V.on("mouseenter"+O,D.item,w.event.item.mouseenter).on("mouseleave"+O,D.item,w.event.item.mouseleave).on("click"+O,D.item,w.event.item.click)},intent:function(){w.verbose("Binding hide intent event to document"),c&&r.on("touchstart"+$,w.event.test.touch).on("touchmove"+$,w.event.test.touch),r.on("click"+$,w.event.test.hide)}},unbind:{intent:function(){w.verbose("Removing hide intent event from document"),c&&r.off("touchstart"+$).off("touchmove"+$),r.off("click"+$)}},filter:function(e){var t=void 0!==e?e:w.get.query(),i=function(){w.is.multiple()&&w.filterActive(),(e||!e&&0==w.get.activeItem().length)&&w.select.firstUnfiltered(),w.has.allResultsFiltered()?x.onNoResults.call(Q,t)?x.allowAdditions?x.hideAdditions&&(w.verbose("User addition with no menu, setting empty style"),w.set.empty(),w.hideMenu()):(w.verbose("All items filtered, showing message",t),w.add.message(C.noResults)):(w.verbose("All items filtered, hiding dropdown",t),w.hideMenu()):(w.remove.empty(),w.remove.message()),x.allowAdditions&&w.add.userSuggestion(e),w.is.searchSelection()&&w.can.show()&&w.is.focusedOnSearch()&&w.show()};x.useLabels&&w.has.maxSelections()||(x.apiSettings?w.can.useAPI()?w.queryRemote(t,function(){x.filterRemoteData&&w.filterItems(t),i()}):w.error(I.noAPI):(w.filterItems(t),i()))},queryRemote:function(t,i){var a={errorDuration:!1,cache:"local",throttle:x.throttle,urlData:{query:t},onError:function(){w.add.message(C.serverError),i()},onFailure:function(){w.add.message(C.serverError),i()},onSuccess:function(t){var a=t[A.remoteValues];e.isArray(a)&&a.length>0?(w.remove.message(),w.setup.menu({values:t[A.remoteValues]})):w.add.message(C.noResults),i()}};L.api("get request")||w.setup.api(),a=e.extend(!0,{},a,x.apiSettings),L.api("setting",a).api("query")},filterItems:function(t){var i=void 0!==t?t:w.get.query(),a=null,n=w.escape.string(i),o=new RegExp("^"+n,"igm");w.has.query()&&(a=[],w.verbose("Searching for matching values",i),H.each(function(){var t,n,r=e(this);if("both"==x.match||"text"==x.match){if(t=String(w.get.choiceText(r,!1)),-1!==t.search(o))return a.push(this),!0;if("exact"===x.fullTextSearch&&w.exactSearch(i,t))return a.push(this),!0;if(!0===x.fullTextSearch&&w.fuzzySearch(i,t))return a.push(this),!0}if("both"==x.match||"value"==x.match){if(n=String(w.get.choiceValue(r,t)),-1!==n.search(o))return a.push(this),!0;if("exact"===x.fullTextSearch&&w.exactSearch(i,n))return a.push(this),!0;if(!0===x.fullTextSearch&&w.fuzzySearch(i,n))return a.push(this),!0}})),w.debug("Showing only matched items",i),w.remove.filteredItem(),a&&H.not(a).addClass(k.filtered)},fuzzySearch:function(e,t){var i=t.length,a=e.length;if(e=e.toLowerCase(),t=t.toLowerCase(),a>i)return!1;if(a===i)return e===t;e:for(var n=0,o=0;n<a;n++){for(var r=e.charCodeAt(n);o<i;)if(t.charCodeAt(o++)===r)continue e;return!1}return!0},exactSearch:function(e,t){return e=e.toLowerCase(),t=t.toLowerCase(),t.indexOf(e)>-1},filterActive:function(){x.useLabels&&H.filter("."+k.active).addClass(k.filtered)},focusSearch:function(e){w.has.search()&&!w.is.focusedOnSearch()&&(e?(L.off("focus"+O,D.search),R.focus(),L.on("focus"+O,D.search,w.event.search.focus)):R.focus())},forceSelection:function(){var e=H.not(k.filtered).filter("."+k.selected).eq(0),t=H.not(k.filtered).filter("."+k.active).eq(0),i=e.length>0?e:t;if(i.length>0&&!w.is.multiple())return w.debug("Forcing partial selection to selected item",i),void w.event.item.click.call(i,{},!0);x.allowAdditions?(w.set.selected(w.get.query()),w.remove.searchTerm()):w.remove.searchTerm()},change:{values:function(t){x.allowAdditions||w.clear(),w.debug("Creating dropdown with specified values",t),w.setup.menu({values:t}),e.each(t,function(e,t){if(1==t.selected)return w.debug("Setting initial selection to",t.value),w.set.selected(t.value),!0})}},event:{change:function(){G||(w.debug("Input changed, updating selection"),w.set.selected())},focus:function(){x.showOnFocus&&!W&&w.is.hidden()&&!v&&w.show()},blur:function(e){v=i.activeElement===this,W||v||(w.remove.activeLabel(),w.hide())},mousedown:function(){w.is.searchSelection()?g=!0:W=!0},mouseup:function(){w.is.searchSelection()?g=!1:W=!1},click:function(t){e(t.target).is(L)&&(w.is.focusedOnSearch()?w.show():w.focusSearch())},search:{focus:function(){W=!0,w.is.multiple()&&w.remove.activeLabel(),x.showOnFocus&&w.search()},blur:function(e){v=i.activeElement===this,w.is.searchSelection()&&!g&&(Y||v||(x.forceSelection&&w.forceSelection(),w.hide())),g=!1}},icon:{click:function(e){B.hasClass(k.clear)?w.clear():w.can.click()&&w.toggle()}},text:{focus:function(e){W=!0,w.focusSearch()}},input:function(e){(w.is.multiple()||w.is.searchSelection())&&w.set.filtered(),clearTimeout(w.timer),w.timer=setTimeout(w.search,x.delay.search)},label:{click:function(t){var i=e(this),a=L.find(D.label),n=a.filter("."+k.active),o=i.nextAll("."+k.active),r=i.prevAll("."+k.active),s=o.length>0?i.nextUntil(o).add(n).add(i):i.prevUntil(r).add(n).add(i);t.shiftKey?(n.removeClass(k.active),s.addClass(k.active)):t.ctrlKey?i.toggleClass(k.active):(n.removeClass(k.active),i.addClass(k.active)),x.onLabelSelect.apply(this,a.filter("."+k.active))}},remove:{click:function(){var t=e(this).parent();t.hasClass(k.active)?w.remove.activeLabels():w.remove.activeLabels(t)}},test:{toggle:function(e){var t=w.is.multiple()?w.show:w.toggle;w.is.bubbledLabelClick(e)||w.is.bubbledIconClick(e)||w.determine.eventOnElement(e,t)&&e.preventDefault()},touch:function(e){w.determine.eventOnElement(e,function(){"touchstart"==e.type?w.timer=setTimeout(function(){w.hide()},x.delay.touch):"touchmove"==e.type&&clearTimeout(w.timer)}),e.stopPropagation()},hide:function(e){w.determine.eventInModule(e,w.hide)}},select:{mutation:function(t){w.debug("<select> modified, recreating menu");var i=!1;e.each(t,function(t,a){if(e(a.target).is("select")||e(a.addedNodes).is("select"))return i=!0,!0}),i&&(w.disconnect.selectObserver(),w.refresh(),w.setup.select(),w.set.selected(),w.observe.select())}},menu:{mutation:function(t){var i=t[0],a=e(i.addedNodes?i.addedNodes[0]:!1),n=e(i.removedNodes?i.removedNodes[0]:!1),o=a.add(n),r=o.is(D.addition)||o.closest(D.addition).length>0,s=o.is(D.message)||o.closest(D.message).length>0;r||s?(w.debug("Updating item selector cache"),w.refreshItems()):(w.debug("Menu modified, updating selector cache"),w.refresh())},mousedown:function(){Y=!0},mouseup:function(){Y=!1}},item:{mouseenter:function(t){var i=e(t.target),a=e(this),n=a.children(D.menu),o=a.siblings(D.item).children(D.menu),r=n.length>0;!(n.find(i).length>0)&&r&&(clearTimeout(w.itemTimer),w.itemTimer=setTimeout(function(){w.verbose("Showing sub-menu",n),e.each(o,function(){w.animate.hide(!1,e(this))}),w.animate.show(!1,n)},x.delay.show),t.preventDefault())},mouseleave:function(t){var i=e(this).children(D.menu);i.length>0&&(clearTimeout(w.itemTimer),w.itemTimer=setTimeout(function(){w.verbose("Hiding sub-menu",i),w.animate.hide(!1,i)},x.delay.hide))},click:function(t,a){var n=e(this),o=e(t?t.target:""),r=n.find(D.menu),s=w.get.choiceText(n),c=w.get.choiceValue(n,s),d=r.length>0,l=r.find(o).length>0;w.has.menuSearch()&&e(i.activeElement).blur(),l||d&&!x.allowCategorySelection||(w.is.searchSelection()&&(x.allowAdditions&&w.remove.userAddition(),w.remove.searchTerm(),w.is.focusedOnSearch()||1==a||w.focusSearch(!0)),x.useLabels||(w.remove.filteredItem(),w.set.scrollPosition(n)),w.determine.selectAction.call(this,s,c))}},document:{keydown:function(e){var t=e.which;if(w.is.inObject(t,S)){var i=L.find(D.label),a=i.filter("."+k.active),n=(a.data(T.value),i.index(a)),o=i.length,r=a.length>0,s=a.length>1,c=0===n,d=n+1==o,l=w.is.searchSelection(),u=w.is.focusedOnSearch(),p=w.is.focused(),h=u&&0===w.get.caretPosition();if(l&&!r&&!u)return;t==S.leftArrow?!p&&!h||r?r&&(e.shiftKey?w.verbose("Adding previous label to selection"):(w.verbose("Selecting previous label"),i.removeClass(k.active)),c&&!s?a.addClass(k.active):a.prev(D.siblingLabel).addClass(k.active).end(),e.preventDefault()):(w.verbose("Selecting previous label"),i.last().addClass(k.active)):t==S.rightArrow?(p&&!r&&i.first().addClass(k.active),r&&(e.shiftKey?w.verbose("Adding next label to selection"):(w.verbose("Selecting next label"),i.removeClass(k.active)),d?l?u?i.removeClass(k.active):w.focusSearch():s?a.next(D.siblingLabel).addClass(k.active):a.addClass(k.active):a.next(D.siblingLabel).addClass(k.active),e.preventDefault())):t==S.deleteKey||t==S.backspace?r?(w.verbose("Removing active labels"),d&&l&&!u&&w.focusSearch(),a.last().next(D.siblingLabel).addClass(k.active),w.remove.activeLabels(a),e.preventDefault()):h&&!r&&t==S.backspace&&(w.verbose("Removing last label on input backspace"),a=i.last().addClass(k.active),w.remove.activeLabels(a)):a.removeClass(k.active)}}},keydown:function(e){var t=e.which;if(w.is.inObject(t,S)){var i,a=H.not(D.unselectable).filter("."+k.selected).eq(0),n=V.children("."+k.active).eq(0),o=a.length>0?a:n,r=o.length>0?o.siblings(":not(."+k.filtered+")").addBack():V.children(":not(."+k.filtered+")"),s=o.children(D.menu),c=o.closest(D.menu),d=c.hasClass(k.visible)||c.hasClass(k.animating)||c.parent(D.menu).length>0,l=s.length>0,u=o.length>0,p=o.not(D.unselectable).length>0,h=t==S.delimiter&&x.allowAdditions&&w.is.multiple(),f=x.allowAdditions&&x.hideAdditions&&(t==S.enter||h)&&p;if(f&&(w.verbose("Selecting item from keyboard shortcut",o),w.event.item.click.call(o,e),w.is.searchSelection()&&w.remove.searchTerm()),w.is.visible()){if((t==S.enter||h)&&(t==S.enter&&u&&l&&!x.allowCategorySelection?(w.verbose("Pressed enter on unselectable category, opening sub menu"),t=S.rightArrow):p&&(w.verbose("Selecting item from keyboard shortcut",o),w.event.item.click.call(o,e),w.is.searchSelection()&&w.remove.searchTerm()),e.preventDefault()),u&&(t==S.leftArrow&&c[0]!==V[0]&&(w.verbose("Left key pressed, closing sub-menu"),w.animate.hide(!1,c),o.removeClass(k.selected),c.closest(D.item).addClass(k.selected),e.preventDefault()),t==S.rightArrow&&l&&(w.verbose("Right key pressed, opening sub-menu"),w.animate.show(!1,s),o.removeClass(k.selected),s.find(D.item).eq(0).addClass(k.selected),e.preventDefault())),t==S.upArrow){if(i=u&&d?o.prevAll(D.item+":not("+D.unselectable+")").eq(0):H.eq(0),r.index(i)<0)return w.verbose("Up key pressed but reached top of current menu"),void e.preventDefault();w.verbose("Up key pressed, changing active item"),o.removeClass(k.selected),i.addClass(k.selected),w.set.scrollPosition(i),x.selectOnKeydown&&w.is.single()&&w.set.selectedItem(i),e.preventDefault()}if(t==S.downArrow){if(i=u&&d?i=o.nextAll(D.item+":not("+D.unselectable+")").eq(0):H.eq(0),0===i.length)return w.verbose("Down key pressed but reached bottom of current menu"),void e.preventDefault();w.verbose("Down key pressed, changing active item"),H.removeClass(k.selected),i.addClass(k.selected),w.set.scrollPosition(i),x.selectOnKeydown&&w.is.single()&&w.set.selectedItem(i),e.preventDefault()}t==S.pageUp&&(w.scrollPage("up"),e.preventDefault()),t==S.pageDown&&(w.scrollPage("down"),e.preventDefault()),t==S.escape&&(w.verbose("Escape key pressed, closing dropdown"),w.hide())}else h&&e.preventDefault(),t!=S.downArrow||w.is.visible()||(w.verbose("Down key pressed, showing dropdown"),w.show(),e.preventDefault())}else w.has.search()||w.set.selectedLetter(String.fromCharCode(t))}},trigger:{change:function(){var e=i.createEvent("HTMLEvents"),t=N[0];t&&(w.verbose("Triggering native change event"),e.initEvent("change",!0,!1),t.dispatchEvent(e))}},determine:{selectAction:function(t,i){w.verbose("Determining action",x.action),e.isFunction(w.action[x.action])?(w.verbose("Triggering preset action",x.action,t,i),w.action[x.action].call(Q,t,i,this)):e.isFunction(x.action)?(w.verbose("Triggering user action",x.action,t,i),x.action.call(Q,t,i,this)):w.error(I.action,x.action)},eventInModule:function(t,a){var n=e(t.target),o=n.closest(i.documentElement).length>0,r=n.closest(L).length>0;return a=e.isFunction(a)?a:function(){},o&&!r?(w.verbose("Triggering event",a),a(),!0):(w.verbose("Event occurred in dropdown, canceling callback"),!1)},eventOnElement:function(t,a){var n=e(t.target),o=n.closest(D.siblingLabel),r=i.body.contains(t.target),s=0===L.find(o).length,c=0===n.closest(V).length;return a=e.isFunction(a)?a:function(){},r&&s&&c?(w.verbose("Triggering event",a),a(),!0):(w.verbose("Event occurred in dropdown menu, canceling callback"),!1)}},action:{nothing:function(){},activate:function(t,i,a){if(i=void 0!==i?i:t,w.can.activate(e(a))){if(w.set.selected(i,e(a)),w.is.multiple()&&!w.is.allFiltered())return;w.hideAndClear()}},select:function(t,i,a){if(i=void 0!==i?i:t,w.can.activate(e(a))){if(w.set.value(i,t,e(a)),w.is.multiple()&&!w.is.allFiltered())return;w.hideAndClear()}},combo:function(t,i,a){i=void 0!==i?i:t,w.set.selected(i,e(a)),w.hideAndClear()},hide:function(t,i,a){w.set.value(i,t,e(a)),w.hideAndClear()}},get:{id:function(){return b},defaultText:function(){return L.data(T.defaultText)},defaultValue:function(){return L.data(T.defaultValue)},placeholderText:function(){return"auto"!=x.placeholder&&"string"==typeof x.placeholder?x.placeholder:L.data(T.placeholderText)||""},text:function(){return z.text()},query:function(){return e.trim(R.val())},searchWidth:function(e){return e=void 0!==e?e:R.val(),q.text(e),Math.ceil(q.width()+1)},selectionCount:function(){var t=w.get.values();return w.is.multiple()?e.isArray(t)?t.length:0:""!==w.get.value()?1:0},transition:function(e){return"auto"==x.transition?w.is.upward(e)?"slide up":"slide down":x.transition},userValues:function(){var t=w.get.values();return!!t&&(t=e.isArray(t)?t:[t],e.grep(t,function(e){return!1===w.get.item(e)}))},uniqueArray:function(t){return e.grep(t,function(i,a){return e.inArray(i,t)===a})},caretPosition:function(){var e,t,a=R.get(0);return"selectionStart"in a?a.selectionStart:i.selection?(a.focus(),e=i.selection.createRange(),t=e.text.length,e.moveStart("character",-a.value.length),e.text.length-t):void 0},value:function(){var t=N.length>0?N.val():L.data(T.value),i=e.isArray(t)&&1===t.length&&""===t[0];return void 0===t||i?"":t},values:function(){var e=w.get.value();return""===e?"":!w.has.selectInput()&&w.is.multiple()?"string"==typeof e?e.split(x.delimiter):"":e},remoteValues:function(){var t=w.get.values(),i=!1;return t&&("string"==typeof t&&(t=[t]),e.each(t,function(e,t){var a=w.read.remoteData(t);w.verbose("Restoring value from session data",a,t),a&&(i||(i={}),i[t]=a)})),i},choiceText:function(t,i){if(i=void 0!==i?i:x.preserveHTML,t)return t.find(D.menu).length>0&&(w.verbose("Retrieving text of element with sub-menu"),t=t.clone(),t.find(D.menu).remove(),t.find(D.menuIcon).remove()),void 0!==t.data(T.text)?t.data(T.text):i?e.trim(t.html()):e.trim(t.text())},choiceValue:function(t,i){return i=i||w.get.choiceText(t),!!t&&(void 0!==t.data(T.value)?String(t.data(T.value)):"string"==typeof i?e.trim(i.toLowerCase()):String(i))},inputEvent:function(){var e=R[0];return!!e&&(void 0!==e.oninput?"input":void 0!==e.onpropertychange?"propertychange":"keyup")},selectValues:function(){var t={};return t.values=[],L.find("option").each(function(){var i=e(this),a=i.html(),n=i.attr("disabled"),o=void 0!==i.attr("value")?i.attr("value"):a;"auto"===x.placeholder&&""===o?t.placeholder=a:t.values.push({name:a,value:o,disabled:n})}),x.placeholder&&"auto"!==x.placeholder&&(w.debug("Setting placeholder value to",x.placeholder),t.placeholder=x.placeholder),x.sortSelect?(t.values.sort(function(e,t){return e.name>t.name?1:-1}),w.debug("Retrieved and sorted values from select",t)):w.debug("Retrieved values from select",t),t},activeItem:function(){return H.filter("."+k.active)},selectedItem:function(){var e=H.not(D.unselectable).filter("."+k.selected);return e.length>0?e:H.eq(0)},itemWithAdditions:function(e){var t=w.get.item(e),i=w.create.userChoice(e);return i&&i.length>0&&(t=t.length>0?t.add(i):i),t},item:function(t,i){var a,n,o=!1;return t=void 0!==t?t:void 0!==w.get.values()?w.get.values():w.get.text(),a=n?t.length>0:void 0!==t&&null!==t,n=w.is.multiple()&&e.isArray(t),i=""===t||0===t||(i||!1),a&&H.each(function(){var a=e(this),r=w.get.choiceText(a),s=w.get.choiceValue(a,r);if(null!==s&&void 0!==s)if(n)-1===e.inArray(String(s),t)&&-1===e.inArray(r,t)||(o=o?o.add(a):a);else if(i){if(w.verbose("Ambiguous dropdown value using strict type check",a,t),s===t||r===t)return o=a,!0}else if(String(s)==String(t)||r==t)return w.verbose("Found select item by value",s,t),o=a,!0}),o}},check:{maxSelections:function(e){return!x.maxSelections||(e=void 0!==e?e:w.get.selectionCount(),e>=x.maxSelections?(w.debug("Maximum selection count reached"),x.useLabels&&(H.addClass(k.filtered),w.add.message(C.maxSelections)),!0):(w.verbose("No longer at maximum selection count"),w.remove.message(),w.remove.filteredItem(),w.is.searchSelection()&&w.filterItems(),!1))}},restore:{defaults:function(){w.clear(),w.restore.defaultText(),w.restore.defaultValue()},defaultText:function(){var e=w.get.defaultText();e===w.get.placeholderText?(w.debug("Restoring default placeholder text",e),w.set.placeholderText(e)):(w.debug("Restoring default text",e),w.set.text(e))},placeholderText:function(){w.set.placeholderText()},defaultValue:function(){var e=w.get.defaultValue();void 0!==e&&(w.debug("Restoring default value",e),""!==e?(w.set.value(e),w.set.selected()):(w.remove.activeItem(),w.remove.selectedItem()))},labels:function(){x.allowAdditions&&(x.useLabels||(w.error(I.labels),x.useLabels=!0),w.debug("Restoring selected values"),w.create.userLabels()),w.check.maxSelections()},selected:function(){w.restore.values(),w.is.multiple()?(w.debug("Restoring previously selected values and labels"),w.restore.labels()):w.debug("Restoring previously selected values")},values:function(){w.set.initialLoad(),x.apiSettings&&x.saveRemoteData&&w.get.remoteValues()?w.restore.remoteValues():w.set.selected(),w.remove.initialLoad()},remoteValues:function(){var t=w.get.remoteValues();w.debug("Recreating selected from session data",t),t&&(w.is.single()?e.each(t,function(e,t){w.set.text(t)}):e.each(t,function(e,t){w.add.label(e,t)}))}},read:{remoteData:function(e){var i;return void 0===t.Storage?void w.error(I.noStorage):void 0!==(i=sessionStorage.getItem(e))&&i}},save:{defaults:function(){w.save.defaultText(),w.save.placeholderText(),w.save.defaultValue()},defaultValue:function(){var e=w.get.value();w.verbose("Saving default value as",e),L.data(T.defaultValue,e)},defaultText:function(){var e=w.get.text();w.verbose("Saving default text as",e),L.data(T.defaultText,e)},placeholderText:function(){var e;!1!==x.placeholder&&z.hasClass(k.placeholder)&&(e=w.get.text(),w.verbose("Saving placeholder text as",e),L.data(T.placeholderText,e))},remoteData:function(e,i){if(void 0===t.Storage)return void w.error(I.noStorage);w.verbose("Saving remote data to session storage",i,e),sessionStorage.setItem(i,e)}},clear:function(){w.is.multiple()&&x.useLabels?w.remove.labels():(w.remove.activeItem(),w.remove.selectedItem()),w.set.placeholderText(),w.clearValue()},clearValue:function(){w.set.value("")},scrollPage:function(e,t){var i,a,n,o=t||w.get.selectedItem(),r=o.closest(D.menu),s=r.outerHeight(),c=r.scrollTop(),d=H.eq(0).outerHeight(),l=Math.floor(s/d),u=(r.prop("scrollHeight"),"up"==e?c-d*l:c+d*l),p=H.not(D.unselectable);n="up"==e?p.index(o)-l:p.index(o)+l,i="up"==e?n>=0:n<p.length,a=i?p.eq(n):"up"==e?p.first():p.last(),a.length>0&&(w.debug("Scrolling page",e,a),o.removeClass(k.selected),a.addClass(k.selected),x.selectOnKeydown&&w.is.single()&&w.set.selectedItem(a),r.scrollTop(u))},set:{filtered:function(){var e=w.is.multiple(),t=w.is.searchSelection(),i=e&&t,a=t?w.get.query():"",n="string"==typeof a&&a.length>0,o=w.get.searchWidth(),r=""!==a;e&&n&&(w.verbose("Adjusting input width",o,x.glyphWidth),R.css("width",o)),n||i&&r?(w.verbose("Hiding placeholder text"),z.addClass(k.filtered)):(!e||i&&!r)&&(w.verbose("Showing placeholder text"),z.removeClass(k.filtered))},empty:function(){L.addClass(k.empty)},loading:function(){L.addClass(k.loading)},placeholderText:function(e){e=e||w.get.placeholderText(),w.debug("Setting placeholder text",e),w.set.text(e),z.addClass(k.placeholder)},tabbable:function(){w.is.searchSelection()?(w.debug("Added tabindex to searchable dropdown"),R.val("").attr("tabindex",0),V.attr("tabindex",-1)):(w.debug("Added tabindex to dropdown"),void 0===L.attr("tabindex")&&(L.attr("tabindex",0),V.attr("tabindex",-1)))},initialLoad:function(){w.verbose("Setting initial load"),m=!0},activeItem:function(e){x.allowAdditions&&e.filter(D.addition).length>0?e.addClass(k.filtered):e.addClass(k.active)},partialSearch:function(e){var t=w.get.query().length;R.val(e.substr(0,t))},scrollPosition:function(e,t){var i,a,n,o,r,s,c,d,l;e=e||w.get.selectedItem(),i=e.closest(D.menu),a=e&&e.length>0,t=void 0!==t&&t,e&&i.length>0&&a&&(o=e.position().top,i.addClass(k.loading),s=i.scrollTop(),r=i.offset().top,o=e.offset().top,n=s-r+o,t||(c=i.height(),l=s+c<n+5,d=n-5<s),w.debug("Scrolling to active item",n),(t||d||l)&&i.scrollTop(n),i.removeClass(k.loading))},text:function(e){"select"!==x.action&&("combo"==x.action?(w.debug("Changing combo button text",e,M),x.preserveHTML?M.html(e):M.text(e)):(e!==w.get.placeholderText()&&z.removeClass(k.placeholder),w.debug("Changing text",e,z),z.removeClass(k.filtered),x.preserveHTML?z.html(e):z.text(e)))},selectedItem:function(e){var t=w.get.choiceValue(e),i=w.get.choiceText(e,!1),a=w.get.choiceText(e,!0)
;w.debug("Setting user selection to item",e),w.remove.activeItem(),w.set.partialSearch(i),w.set.activeItem(e),w.set.selected(t,e),w.set.text(a)},selectedLetter:function(t){var i,a=H.filter("."+k.selected),n=a.length>0&&w.has.firstLetter(a,t),o=!1;n&&(i=a.nextAll(H).eq(0),w.has.firstLetter(i,t)&&(o=i)),o||H.each(function(){if(w.has.firstLetter(e(this),t))return o=e(this),!1}),o&&(w.verbose("Scrolling to next value with letter",t),w.set.scrollPosition(o),a.removeClass(k.selected),o.addClass(k.selected),x.selectOnKeydown&&w.is.single()&&w.set.selectedItem(o))},direction:function(e){"auto"==x.direction?(w.remove.upward(),w.can.openDownward(e)?w.remove.upward(e):w.set.upward(e),w.is.leftward(e)||w.can.openRightward(e)||w.set.leftward(e)):"upward"==x.direction&&w.set.upward(e)},upward:function(e){(e||L).addClass(k.upward)},leftward:function(e){(e||V).addClass(k.leftward)},value:function(e,t,i){var a=w.escape.value(e),n=N.length>0,o=w.get.values(),r=void 0!==e?String(e):e;if(n){if(!x.allowReselection&&r==o&&(w.verbose("Skipping value update already same value",e,o),!w.is.initialLoad()))return;w.is.single()&&w.has.selectInput()&&w.can.extendSelect()&&(w.debug("Adding user option",e),w.add.optionValue(e)),w.debug("Updating input value",a,o),G=!0,N.val(a),!1===x.fireOnInit&&w.is.initialLoad()?w.debug("Input native change event ignored on initial load"):w.trigger.change(),G=!1}else w.verbose("Storing value in metadata",a,N),a!==o&&L.data(T.value,r);w.is.single()&&x.clearable&&(a?w.set.clearable():w.remove.clearable()),!1===x.fireOnInit&&w.is.initialLoad()?w.verbose("No callback on initial load",x.onChange):x.onChange.call(Q,e,t,i)},active:function(){L.addClass(k.active)},multiple:function(){L.addClass(k.multiple)},visible:function(){L.addClass(k.visible)},exactly:function(e,t){w.debug("Setting selected to exact values"),w.clear(),w.set.selected(e,t)},selected:function(t,i){var a=w.is.multiple();(i=x.allowAdditions?i||w.get.itemWithAdditions(t):i||w.get.item(t))&&(w.debug("Setting selected menu item to",i),w.is.multiple()&&w.remove.searchWidth(),w.is.single()?(w.remove.activeItem(),w.remove.selectedItem()):x.useLabels&&w.remove.selectedItem(),i.each(function(){var t=e(this),n=w.get.choiceText(t),o=w.get.choiceValue(t,n),r=t.hasClass(k.filtered),s=t.hasClass(k.active),c=t.hasClass(k.addition),d=a&&1==i.length;a?!s||c?(x.apiSettings&&x.saveRemoteData&&w.save.remoteData(n,o),x.useLabels?(w.add.label(o,n,d),w.add.value(o,n,t),w.set.activeItem(t),w.filterActive(),w.select.nextAvailable(i)):(w.add.value(o,n,t),w.set.text(w.add.variables(C.count)),w.set.activeItem(t))):r||(w.debug("Selected active value, removing label"),w.remove.selected(o)):(x.apiSettings&&x.saveRemoteData&&w.save.remoteData(n,o),w.set.text(n),w.set.value(o,n,t),t.addClass(k.active).addClass(k.selected))}))},clearable:function(){B.addClass(k.clear)}},add:{label:function(t,i,a){var n,o=w.is.searchSelection()?R:z,r=w.escape.value(t);if(x.ignoreCase&&(r=r.toLowerCase()),n=e("<a />").addClass(k.label).attr("data-"+T.value,r).html(P.label(r,i)),n=x.onLabelCreate.call(n,r,i),w.has.label(t))return void w.debug("User selection already exists, skipping",r);x.label.variation&&n.addClass(x.label.variation),!0===a?(w.debug("Animating in label",n),n.addClass(k.hidden).insertBefore(o).transition(x.label.transition,x.label.duration)):(w.debug("Adding selection label",n),n.insertBefore(o))},message:function(t){var i=V.children(D.message),a=x.templates.message(w.add.variables(t));i.length>0?i.html(a):i=e("<div/>").html(a).addClass(k.message).appendTo(V)},optionValue:function(t){var i=w.escape.value(t);N.find('option[value="'+w.escape.string(i)+'"]').length>0||(w.disconnect.selectObserver(),w.is.single()&&(w.verbose("Removing previous user addition"),N.find("option."+k.addition).remove()),e("<option/>").prop("value",i).addClass(k.addition).html(t).appendTo(N),w.verbose("Adding user addition as an <option>",t),w.observe.select())},userSuggestion:function(e){var t,i=V.children(D.addition),a=w.get.item(e),n=a&&a.not(D.addition).length,o=i.length>0;if(!x.useLabels||!w.has.maxSelections()){if(""===e||n)return void i.remove();o?(i.data(T.value,e).data(T.text,e).attr("data-"+T.value,e).attr("data-"+T.text,e).removeClass(k.filtered),x.hideAdditions||(t=x.templates.addition(w.add.variables(C.addResult,e)),i.html(t)),w.verbose("Replacing user suggestion with new value",i)):(i=w.create.userChoice(e),i.prependTo(V),w.verbose("Adding item choice to menu corresponding with user choice addition",i)),x.hideAdditions&&!w.is.allFiltered()||i.addClass(k.selected).siblings().removeClass(k.selected),w.refreshItems()}},variables:function(e,t){var i,a,n=-1!==e.search("{count}"),o=-1!==e.search("{maxCount}"),r=-1!==e.search("{term}");return w.verbose("Adding templated variables to message",e),n&&(i=w.get.selectionCount(),e=e.replace("{count}",i)),o&&(i=w.get.selectionCount(),e=e.replace("{maxCount}",x.maxSelections)),r&&(a=t||w.get.query(),e=e.replace("{term}",a)),e},value:function(t,i,a){var n,o=w.get.values();return w.has.value(t)?void w.debug("Value already selected"):""===t?void w.debug("Cannot select blank values from multiselect"):(e.isArray(o)?(n=o.concat([t]),n=w.get.uniqueArray(n)):n=[t],w.has.selectInput()?w.can.extendSelect()&&(w.debug("Adding value to select",t,n,N),w.add.optionValue(t)):(n=n.join(x.delimiter),w.debug("Setting hidden input to delimited value",n,N)),!1===x.fireOnInit&&w.is.initialLoad()?w.verbose("Skipping onadd callback on initial load",x.onAdd):x.onAdd.call(Q,t,i,a),w.set.value(n,t,i,a),void w.check.maxSelections())}},remove:{active:function(){L.removeClass(k.active)},activeLabel:function(){L.find(D.label).removeClass(k.active)},empty:function(){L.removeClass(k.empty)},loading:function(){L.removeClass(k.loading)},initialLoad:function(){m=!1},upward:function(e){(e||L).removeClass(k.upward)},leftward:function(e){(e||V).removeClass(k.leftward)},visible:function(){L.removeClass(k.visible)},activeItem:function(){H.removeClass(k.active)},filteredItem:function(){x.useLabels&&w.has.maxSelections()||(x.useLabels&&w.is.multiple()?H.not("."+k.active).removeClass(k.filtered):H.removeClass(k.filtered),w.remove.empty())},optionValue:function(e){var t=w.escape.value(e),i=N.find('option[value="'+w.escape.string(t)+'"]');i.length>0&&i.hasClass(k.addition)&&(_&&(_.disconnect(),w.verbose("Temporarily disconnecting mutation observer")),i.remove(),w.verbose("Removing user addition as an <option>",t),_&&_.observe(N[0],{childList:!0,subtree:!0}))},message:function(){V.children(D.message).remove()},searchWidth:function(){R.css("width","")},searchTerm:function(){w.verbose("Cleared search term"),R.val(""),w.set.filtered()},userAddition:function(){H.filter(D.addition).remove()},selected:function(t,i){if(!(i=x.allowAdditions?i||w.get.itemWithAdditions(t):i||w.get.item(t)))return!1;i.each(function(){var t=e(this),i=w.get.choiceText(t),a=w.get.choiceValue(t,i);w.is.multiple()?x.useLabels?(w.remove.value(a,i,t),w.remove.label(a)):(w.remove.value(a,i,t),0===w.get.selectionCount()?w.set.placeholderText():w.set.text(w.add.variables(C.count))):w.remove.value(a,i,t),t.removeClass(k.filtered).removeClass(k.active),x.useLabels&&t.removeClass(k.selected)})},selectedItem:function(){H.removeClass(k.selected)},value:function(e,t,i){var a,n=w.get.values();w.has.selectInput()?(w.verbose("Input is <select> removing selected option",e),a=w.remove.arrayValue(e,n),w.remove.optionValue(e)):(w.verbose("Removing from delimited values",e),a=w.remove.arrayValue(e,n),a=a.join(x.delimiter)),!1===x.fireOnInit&&w.is.initialLoad()?w.verbose("No callback on initial load",x.onRemove):x.onRemove.call(Q,e,t,i),w.set.value(a,t,i),w.check.maxSelections()},arrayValue:function(t,i){return e.isArray(i)||(i=[i]),i=e.grep(i,function(e){return t!=e}),w.verbose("Removed value from delimited string",t,i),i},label:function(e,t){var i=L.find(D.label),a=i.filter("[data-"+T.value+'="'+w.escape.string(e)+'"]');w.verbose("Removing label",a),a.remove()},activeLabels:function(e){e=e||L.find(D.label).filter("."+k.active),w.verbose("Removing active label selections",e),w.remove.labels(e)},labels:function(t){t=t||L.find(D.label),w.verbose("Removing labels",t),t.each(function(){var t=e(this),i=t.data(T.value),a=void 0!==i?String(i):i,n=w.is.userValue(a);if(!1===x.onLabelRemove.call(t,i))return void w.debug("Label remove callback cancelled removal");w.remove.message(),n?(w.remove.value(a),w.remove.label(a)):w.remove.selected(a)})},tabbable:function(){w.is.searchSelection()?(w.debug("Searchable dropdown initialized"),R.removeAttr("tabindex"),V.removeAttr("tabindex")):(w.debug("Simple selection dropdown initialized"),L.removeAttr("tabindex"),V.removeAttr("tabindex"))},clearable:function(){B.removeClass(k.clear)}},has:{menuSearch:function(){return w.has.search()&&R.closest(V).length>0},search:function(){return R.length>0},sizer:function(){return q.length>0},selectInput:function(){return N.is("select")},minCharacters:function(e){return!x.minCharacters||(e=void 0!==e?String(e):String(w.get.query()),e.length>=x.minCharacters)},firstLetter:function(e,t){var i,a;return!(!e||0===e.length||"string"!=typeof t)&&(i=w.get.choiceText(e,!1),t=t.toLowerCase(),a=String(i).charAt(0).toLowerCase(),t==a)},input:function(){return N.length>0},items:function(){return H.length>0},menu:function(){return V.length>0},message:function(){return 0!==V.children(D.message).length},label:function(e){var t=w.escape.value(e),i=L.find(D.label);return x.ignoreCase&&(t=t.toLowerCase()),i.filter("[data-"+T.value+'="'+w.escape.string(t)+'"]').length>0},maxSelections:function(){return x.maxSelections&&w.get.selectionCount()>=x.maxSelections},allResultsFiltered:function(){var e=H.not(D.addition);return e.filter(D.unselectable).length===e.length},userSuggestion:function(){return V.children(D.addition).length>0},query:function(){return""!==w.get.query()},value:function(e){return x.ignoreCase?w.has.valueIgnoringCase(e):w.has.valueMatchingCase(e)},valueMatchingCase:function(t){var i=w.get.values();return!!(e.isArray(i)?i&&-1!==e.inArray(t,i):i==t)},valueIgnoringCase:function(t){var i=w.get.values(),a=!1;return e.isArray(i)||(i=[i]),e.each(i,function(e,i){if(String(t).toLowerCase()==String(i).toLowerCase())return a=!0,!1}),a}},is:{active:function(){return L.hasClass(k.active)},animatingInward:function(){return V.transition("is inward")},animatingOutward:function(){return V.transition("is outward")},bubbledLabelClick:function(t){return e(t.target).is("select, input")&&L.closest("label").length>0},bubbledIconClick:function(t){return e(t.target).closest(B).length>0},alreadySetup:function(){return L.is("select")&&void 0!==L.parent(D.dropdown).data(F)&&0===L.prev().length},animating:function(e){return e?e.transition&&e.transition("is animating"):V.transition&&V.transition("is animating")},leftward:function(e){return(e||V).hasClass(k.leftward)},disabled:function(){return L.hasClass(k.disabled)},focused:function(){return i.activeElement===L[0]},focusedOnSearch:function(){return i.activeElement===R[0]},allFiltered:function(){return(w.is.multiple()||w.has.search())&&!(0==x.hideAdditions&&w.has.userSuggestion())&&!w.has.message()&&w.has.allResultsFiltered()},hidden:function(e){return!w.is.visible(e)},initialLoad:function(){return m},inObject:function(t,i){var a=!1;return e.each(i,function(e,i){if(i==t)return a=!0,!0}),a},multiple:function(){return L.hasClass(k.multiple)},remote:function(){return x.apiSettings&&w.can.useAPI()},single:function(){return!w.is.multiple()},selectMutation:function(t){var i=!1;return e.each(t,function(t,a){if(a.target&&e(a.target).is("select"))return i=!0,!0}),i},search:function(){return L.hasClass(k.search)},searchSelection:function(){return w.has.search()&&1===R.parent(D.dropdown).length},selection:function(){return L.hasClass(k.selection)},userValue:function(t){return-1!==e.inArray(t,w.get.userValues())},upward:function(e){return(e||L).hasClass(k.upward)},visible:function(e){return e?e.hasClass(k.visible):V.hasClass(k.visible)},verticallyScrollableContext:function(){var e=U.get(0)!==t&&U.css("overflow-y");return"auto"==e||"scroll"==e},horizontallyScrollableContext:function(){var e=U.get(0)!==t&&U.css("overflow-X");return"auto"==e||"scroll"==e}},can:{activate:function(e){return!!x.useLabels||(!w.has.maxSelections()||!(!w.has.maxSelections()||!e.hasClass(k.active)))},openDownward:function(e){var i,a=e||V,n=!0,o={};return a.addClass(k.loading),i={context:{offset:U.get(0)===t?{top:0,left:0}:U.offset(),scrollTop:U.scrollTop(),height:U.outerHeight()},menu:{offset:a.offset(),height:a.outerHeight()}},w.is.verticallyScrollableContext()&&(i.menu.offset.top+=i.context.scrollTop),o={above:i.context.scrollTop<=i.menu.offset.top-i.context.offset.top-i.menu.height,below:i.context.scrollTop+i.context.height>=i.menu.offset.top-i.context.offset.top+i.menu.height},o.below?(w.verbose("Dropdown can fit in context downward",o),n=!0):o.below||o.above?(w.verbose("Dropdown cannot fit below, opening upward",o),n=!1):(w.verbose("Dropdown cannot fit in either direction, favoring downward",o),n=!0),a.removeClass(k.loading),n},openRightward:function(e){var i,a=e||V,n=!0,o=!1;return a.addClass(k.loading),i={context:{offset:U.get(0)===t?{top:0,left:0}:U.offset(),scrollLeft:U.scrollLeft(),width:U.outerWidth()},menu:{offset:a.offset(),width:a.outerWidth()}},w.is.horizontallyScrollableContext()&&(i.menu.offset.left+=i.context.scrollLeft),o=i.menu.offset.left-i.context.offset.left+i.menu.width>=i.context.scrollLeft+i.context.width,o&&(w.verbose("Dropdown cannot fit in context rightward",o),n=!1),a.removeClass(k.loading),n},click:function(){return c||"click"==x.on},extendSelect:function(){return x.allowAdditions||x.apiSettings},show:function(){return!w.is.disabled()&&(w.has.items()||w.has.message())},useAPI:function(){return void 0!==e.fn.api}},animate:{show:function(t,i){var a,n=i||V,o=i?function(){}:function(){w.hideSubMenus(),w.hideOthers(),w.set.active()};t=e.isFunction(t)?t:function(){},w.verbose("Doing menu show animation",n),w.set.direction(i),a=w.get.transition(i),w.is.selection()&&w.set.scrollPosition(w.get.selectedItem(),!0),(w.is.hidden(n)||w.is.animating(n))&&("none"==a?(o(),n.transition("show"),t.call(Q)):void 0!==e.fn.transition&&L.transition("is supported")?n.transition({animation:a+" in",debug:x.debug,verbose:x.verbose,duration:x.duration,queue:!0,onStart:o,onComplete:function(){t.call(Q)}}):w.error(I.noTransition,a))},hide:function(t,i){var a=i||V,n=(i?x.duration:x.duration,i?function(){}:function(){w.can.click()&&w.unbind.intent(),w.remove.active()}),o=w.get.transition(i);t=e.isFunction(t)?t:function(){},(w.is.visible(a)||w.is.animating(a))&&(w.verbose("Doing menu hide animation",a),"none"==o?(n(),a.transition("hide"),t.call(Q)):void 0!==e.fn.transition&&L.transition("is supported")?a.transition({animation:o+" out",duration:x.duration,debug:x.debug,verbose:x.verbose,queue:!1,onStart:n,onComplete:function(){t.call(Q)}}):w.error(I.transition))}},hideAndClear:function(){w.remove.searchTerm(),w.has.maxSelections()||(w.has.search()?w.hide(function(){w.remove.filteredItem()}):w.hide())},delay:{show:function(){w.verbose("Delaying show event to ensure user intent"),clearTimeout(w.timer),w.timer=setTimeout(w.show,x.delay.show)},hide:function(){w.verbose("Delaying hide event to ensure user intent"),clearTimeout(w.timer),w.timer=setTimeout(w.hide,x.delay.hide)}},escape:{value:function(t){var i=e.isArray(t),a="string"==typeof t,n=!a&&!i,o=a&&-1!==t.search(E.quote),r=[];return n||!o?t:(w.debug("Encoding quote values for use in select",t),i?(e.each(t,function(e,t){r.push(t.replace(E.quote,"&quot;"))}),r):t.replace(E.quote,"&quot;"))},string:function(e){return e=String(e),e.replace(E.escape,"\\$&")}},setting:function(t,i){if(w.debug("Changing setting",t,i),e.isPlainObject(t))e.extend(!0,x,t);else{if(void 0===i)return x[t];e.isPlainObject(x[t])?e.extend(!0,x[t],i):x[t]=i}},internal:function(t,i){if(e.isPlainObject(t))e.extend(!0,w,t);else{if(void 0===i)return w[t];w[t]=i}},debug:function(){!x.silent&&x.debug&&(x.performance?w.performance.log(arguments):(w.debug=Function.prototype.bind.call(console.info,console,x.name+":"),w.debug.apply(console,arguments)))},verbose:function(){!x.silent&&x.verbose&&x.debug&&(x.performance?w.performance.log(arguments):(w.verbose=Function.prototype.bind.call(console.info,console,x.name+":"),w.verbose.apply(console,arguments)))},error:function(){x.silent||(w.error=Function.prototype.bind.call(console.error,console,x.name+":"),w.error.apply(console,arguments))},performance:{log:function(e){var t,i,a;x.performance&&(t=(new Date).getTime(),a=d||t,i=t-a,d=t,l.push({Name:e[0],Arguments:[].slice.call(e,1)||"",Element:Q,"Execution Time":i})),clearTimeout(w.performance.timer),w.performance.timer=setTimeout(w.performance.display,500)},display:function(){var t=x.name+":",i=0;d=!1,clearTimeout(w.performance.timer),e.each(l,function(e,t){i+=t["Execution Time"]}),t+=" "+i+"ms",s&&(t+=" '"+s+"'"),(void 0!==console.group||void 0!==console.table)&&l.length>0&&(console.groupCollapsed(t),console.table?console.table(l):e.each(l,function(e,t){console.log(t.Name+": "+t["Execution Time"]+"ms")}),console.groupEnd()),l=[]}},invoke:function(t,i,a){var o,r,s,c=Z;return i=i||h,a=Q||a,"string"==typeof t&&void 0!==c&&(t=t.split(/[\. ]/),o=t.length-1,e.each(t,function(i,a){var n=i!=o?a+t[i+1].charAt(0).toUpperCase()+t[i+1].slice(1):t;if(e.isPlainObject(c[n])&&i!=o)c=c[n];else{if(void 0!==c[n])return r=c[n],!1;if(!e.isPlainObject(c[a])||i==o)return void 0!==c[a]?(r=c[a],!1):(w.error(I.method,t),!1);c=c[a]}})),e.isFunction(r)?s=r.apply(a,i):void 0!==r&&(s=r),e.isArray(n)?n.push(s):void 0!==n?n=[n,s]:void 0!==s&&(n=s),r}},p?(void 0===Z&&w.initialize(),w.invoke(u)):(void 0!==Z&&Z.invoke("destroy"),w.initialize())}),void 0!==n?n:o},e.fn.dropdown.settings={silent:!1,debug:!1,verbose:!1,performance:!0,on:"click",action:"activate",values:!1,clearable:!1,apiSettings:!1,selectOnKeydown:!0,minCharacters:0,filterRemoteData:!1,saveRemoteData:!0,throttle:200,context:t,direction:"auto",keepOnScreen:!0,match:"both",fullTextSearch:!1,placeholder:"auto",preserveHTML:!0,sortSelect:!1,forceSelection:!0,allowAdditions:!1,ignoreCase:!1,hideAdditions:!0,maxSelections:!1,useLabels:!0,delimiter:",",showOnFocus:!0,allowReselection:!1,allowTab:!0,allowCategorySelection:!1,fireOnInit:!1,transition:"auto",duration:200,glyphWidth:1.037,label:{transition:"scale",duration:200,variation:!1},delay:{hide:300,show:200,search:20,touch:50},onChange:function(e,t,i){},onAdd:function(e,t,i){},onRemove:function(e,t,i){},onLabelSelect:function(e){},onLabelCreate:function(t,i){return e(this)},onLabelRemove:function(e){return!0},onNoResults:function(e){return!0},onShow:function(){},onHide:function(){},name:"Dropdown",namespace:"dropdown",message:{addResult:"Add <b>{term}</b>",count:"{count} selected",maxSelections:"Max {maxCount} selections",noResults:"No results found.",serverError:"There was an error contacting the server"},error:{action:"You called a dropdown action that was not defined",alreadySetup:"Once a select has been initialized behaviors must be called on the created ui dropdown",labels:"Allowing user additions currently requires the use of labels.",missingMultiple:"<select> requires multiple property to be set to correctly preserve multiple values",method:"The method you called is not defined.",noAPI:"The API module is required to load resources remotely",noStorage:"Saving remote data requires session storage",noTransition:"This module requires ui transitions <https://github.com/Semantic-Org/UI-Transition>"},regExp:{escape:/[-[\]{}()*+?.,\\^$|#\s]/g,quote:/"/g},metadata:{defaultText:"defaultText",defaultValue:"defaultValue",placeholderText:"placeholder",text:"text",value:"value"},fields:{remoteValues:"results",values:"values",disabled:"disabled",name:"name",value:"value",text:"text"},keys:{backspace:8,delimiter:188,deleteKey:46,enter:13,escape:27,pageUp:33,pageDown:34,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40},selector:{addition:".addition",dropdown:".ui.dropdown",hidden:".hidden",icon:"> .dropdown.icon",input:'> input[type="hidden"], > select',item:".item",label:"> .label",remove:"> .label > .delete.icon",siblingLabel:".label",menu:".menu",message:".message",menuIcon:".dropdown.icon",search:"input.search, .menu > .search > input, .menu input.search",sizer:"> input.sizer",text:"> .text:not(.icon)",unselectable:".disabled, .filtered"},className:{active:"active",addition:"addition",animating:"animating",clear:"clear",disabled:"disabled",empty:"empty",dropdown:"ui dropdown",filtered:"filtered",hidden:"hidden transition",item:"item",label:"ui label",loading:"loading",menu:"menu",message:"message",multiple:"multiple",placeholder:"default",sizer:"sizer",search:"search",selected:"selected",selection:"selection",upward:"upward",leftward:"left",visible:"visible"}},e.fn.dropdown.settings.templates={dropdown:function(t){var i=t.placeholder||!1,a=(t.values,"");return a+='<i class="dropdown icon"></i>',t.placeholder?a+='<div class="default text">'+i+"</div>":a+='<div class="text"></div>',a+='<div class="menu">',e.each(t.values,function(e,t){a+=t.disabled?'<div class="disabled item" data-value="'+t.value+'">'+t.name+"</div>":'<div class="item" data-value="'+t.value+'">'+t.name+"</div>"}),a+="</div>"},menu:function(t,i){var a=t[i.values]||{},n="";return e.each(a,function(e,t){var a=t[i.text]?'data-text="'+t[i.text]+'"':"",o=t[i.disabled]?"disabled ":"";n+='<div class="'+o+'item" data-value="'+t[i.value]+'"'+a+">",n+=t[i.name],n+="</div>"}),n},label:function(e,t){return t+'<i class="delete icon"></i>'},message:function(e){return e},addition:function(e){return e}}}(jQuery,window,document);